var Godot=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(r){var t,n,o=void 0!==(r=r||{})?r:{};o.ready=new Promise(function(e,r){t=e,n=r});var a,i={};for(a in o)o.hasOwnProperty(a)&&(i[a]=o[a]);var s,u=[],c="./this.program",f=function(e,r){throw r},l=!1,d=!1;l="object"==typeof window,d="function"==typeof importScripts,s="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var m,p,g,v="";(l||d)&&(d?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),e&&(v=e),v=0!==v.indexOf("blob:")?v.substr(0,v.lastIndexOf("/")+1):"",m=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},d&&(g=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),p=function(e,r,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?r(n.response):t()},n.onerror=t,n.send(null)});var h=o.print||console.log.bind(console),b=o.printErr||console.warn.bind(console);for(a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);i=null,o.arguments&&(u=o.arguments),o.thisProgram&&(c=o.thisProgram),o.quit&&(f=o.quit);var E=16;var y,w,x,k=0,_=function(e){k=e},S=function(){return k};o.wasmBinary&&(y=o.wasmBinary),o.noExitRuntime&&(w=o.noExitRuntime),"object"!=typeof WebAssembly&&ae("no native wasm support detected");var L=!1;function D(e,r){e||ae("Assertion failed: "+r)}var A,P,F,T,R,C,M,O,B,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function N(e,r,t){for(var n=r+t,o=r;e[o]&&!(o>=n);)++o;if(o-r>16&&e.subarray&&I)return I.decode(e.subarray(r,o));for(var a="";r<o;){var i=e[r++];if(128&i){var s=63&e[r++];if(192!=(224&i)){var u=63&e[r++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&e[r++])<65536)a+=String.fromCharCode(i);else{var c=i-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&i)<<6|s)}else a+=String.fromCharCode(i)}return a}function U(e,r){return e?N(F,e,r):""}function j(e,r,t,n){if(!(n>0))return 0;for(var o=t,a=t+n-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i);if(s<=127){if(t>=a)break;r[t++]=s}else if(s<=2047){if(t+1>=a)break;r[t++]=192|s>>6,r[t++]=128|63&s}else if(s<=65535){if(t+2>=a)break;r[t++]=224|s>>12,r[t++]=128|s>>6&63,r[t++]=128|63&s}else{if(t+3>=a)break;r[t++]=240|s>>18,r[t++]=128|s>>12&63,r[t++]=128|s>>6&63,r[t++]=128|63&s}}return r[t]=0,t-o}function q(e,r,t){return j(e,F,r,t)}function z(e){for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++t)),n<=127?++r:r+=n<=2047?2:n<=65535?3:4}return r}function H(e){var r=z(e)+1,t=ut(r);return t&&j(e,P,t,r),t}function G(e){var r=z(e)+1,t=Et(r);return j(e,P,t,r),t}function V(e,r,t){for(var n=0;n<e.length;++n)P[r++>>0]=e.charCodeAt(n);t||(P[r>>0]=0)}function X(e){A=e,o.HEAP8=P=new Int8Array(e),o.HEAP16=T=new Int16Array(e),o.HEAP32=C=new Int32Array(e),o.HEAPU8=F=new Uint8Array(e),o.HEAPU16=R=new Uint16Array(e),o.HEAPU32=M=new Uint32Array(e),o.HEAPF32=O=new Float32Array(e),o.HEAPF64=B=new Float64Array(e)}o.INITIAL_MEMORY;var W,Y=[],Q=[],K=[],$=[],Z=[];Q.push({func:function(){it()}});var J=0,ee=null,re=null;function te(e){return e}function ne(e){J++,o.monitorRunDependencies&&o.monitorRunDependencies(J)}function oe(e){if(J--,o.monitorRunDependencies&&o.monitorRunDependencies(J),0==J&&(null!==ee&&(clearInterval(ee),ee=null),re)){var r=re;re=null,r()}}function ae(e){o.onAbort&&o.onAbort(e),b(e+=""),L=!0,1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var r=new WebAssembly.RuntimeError(e);throw n(r),r}o.preloadedImages={},o.preloadedAudios={};var ie="data:application/octet-stream;base64,";function se(e){return r=e,t=ie,String.prototype.startsWith?r.startsWith(t):0===r.indexOf(t);var r,t}var ue,ce,fe,le="godot.javascript.opt.wasm";function de(e){try{if(e==le&&y)return new Uint8Array(y);if(g)return g(e);throw"both async and sync fetching of the wasm failed"}catch(e){ae(e)}}se(le)||(ue=le,le=o.locateFile?o.locateFile(ue,v):v+ue);var me={358740:function(e,r,t,n){Zr.getBufferSubData(e,r,F,t,n)}};function pe(e){for(;e.length>0;){var r=e.shift();if("function"!=typeof r){var t=r.func;"number"==typeof t?void 0===r.arg?W.get(t)():W.get(t)(r.arg):t(void 0===r.arg?null:r.arg)}else r(o)}}var ge={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,r){for(var t=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:function(e){var r="/"===e.charAt(0),t="/"===e.substr(-1);return(e=ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!r).join("/"))||r||(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:function(e){var r=ge.splitPath(e),t=r[0],n=r[1];return t||n?(n&&(n=n.substr(0,n.length-1)),t+n):"."},basename:function(e){if("/"===e)return"/";var r=(e=(e=ge.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===r?e:e.substr(r+1)},extname:function(e){return ge.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return ge.normalize(e.join("/"))},join2:function(e,r){return ge.normalize(e+"/"+r)}};var ve={resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var n=t>=0?arguments[t]:we.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,r="/"===n.charAt(0)}return(r?"/":"")+(e=ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!r).join("/"))||"."},relative:function(e,r){function t(e){for(var r=0;r<e.length&&""===e[r];r++);for(var t=e.length-1;t>=0&&""===e[t];t--);return r>t?[]:e.slice(r,t-r+1)}e=ve.resolve(e).substr(1),r=ve.resolve(r).substr(1);for(var n=t(e.split("/")),o=t(r.split("/")),a=Math.min(n.length,o.length),i=a,s=0;s<a;s++)if(n[s]!==o[s]){i=s;break}var u=[];for(s=i;s<n.length;s++)u.push("..");return(u=u.concat(o.slice(i))).join("/")}},he={ttys:[],init:function(){},shutdown:function(){},register:function(e,r){he.ttys[e]={input:[],output:[],ops:r},we.registerDevice(e,he.stream_ops)},stream_ops:{open:function(e){var r=he.ttys[e.node.rdev];if(!r)throw new we.ErrnoError(43);e.tty=r,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,r,t,n,o){if(!e.tty||!e.tty.ops.get_char)throw new we.ErrnoError(60);for(var a=0,i=0;i<n;i++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new we.ErrnoError(29)}if(void 0===s&&0===a)throw new we.ErrnoError(6);if(null==s)break;a++,r[t+i]=s}return a&&(e.node.timestamp=Date.now()),a},write:function(e,r,t,n,o){if(!e.tty||!e.tty.ops.put_char)throw new we.ErrnoError(60);try{for(var a=0;a<n;a++)e.tty.ops.put_char(e.tty,r[t+a])}catch(e){throw new we.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var r=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(r=window.prompt("Input: "))&&(r+="\n"):"function"==typeof readline&&null!==(r=readline())&&(r+="\n"),!r)return null;e.input=nt(r,!0)}return e.input.shift()},put_char:function(e,r){null===r||10===r?(h(N(e.output,0)),e.output=[]):0!=r&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(h(N(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,r){null===r||10===r?(b(N(e.output,0)),e.output=[]):0!=r&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(b(N(e.output,0)),e.output=[])}}};function be(e){for(var r=function(e,r){return r||(r=E),Math.ceil(e/r)*r}(e,16384),t=ut(r);e<r;)P[t+e++]=0;return t}var Ee={ops_table:null,mount:function(e){return Ee.createNode(null,"/",16895,0)},createNode:function(e,r,t,n){if(we.isBlkdev(t)||we.isFIFO(t))throw new we.ErrnoError(63);Ee.ops_table||(Ee.ops_table={dir:{node:{getattr:Ee.node_ops.getattr,setattr:Ee.node_ops.setattr,lookup:Ee.node_ops.lookup,mknod:Ee.node_ops.mknod,rename:Ee.node_ops.rename,unlink:Ee.node_ops.unlink,rmdir:Ee.node_ops.rmdir,readdir:Ee.node_ops.readdir,symlink:Ee.node_ops.symlink},stream:{llseek:Ee.stream_ops.llseek}},file:{node:{getattr:Ee.node_ops.getattr,setattr:Ee.node_ops.setattr},stream:{llseek:Ee.stream_ops.llseek,read:Ee.stream_ops.read,write:Ee.stream_ops.write,allocate:Ee.stream_ops.allocate,mmap:Ee.stream_ops.mmap,msync:Ee.stream_ops.msync}},link:{node:{getattr:Ee.node_ops.getattr,setattr:Ee.node_ops.setattr,readlink:Ee.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ee.node_ops.getattr,setattr:Ee.node_ops.setattr},stream:we.chrdev_stream_ops}});var o=we.createNode(e,r,t,n);return we.isDir(o.mode)?(o.node_ops=Ee.ops_table.dir.node,o.stream_ops=Ee.ops_table.dir.stream,o.contents={}):we.isFile(o.mode)?(o.node_ops=Ee.ops_table.file.node,o.stream_ops=Ee.ops_table.file.stream,o.usedBytes=0,o.contents=null):we.isLink(o.mode)?(o.node_ops=Ee.ops_table.link.node,o.stream_ops=Ee.ops_table.link.stream):we.isChrdev(o.mode)&&(o.node_ops=Ee.ops_table.chrdev.node,o.stream_ops=Ee.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[r]=o,e.timestamp=o.timestamp),o},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var r=[],t=0;t<e.usedBytes;++t)r.push(e.contents[t]);return r}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){r=Math.max(r,t*(t<1048576?2:1.125)>>>0),0!=t&&(r=Math.max(r,256));var n=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,r){if(e.usedBytes!=r){if(0==r)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var t=e.contents;return e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),void(e.usedBytes=r)}if(e.contents||(e.contents=[]),e.contents.length>r)e.contents.length=r;else for(;e.contents.length<r;)e.contents.push(0);e.usedBytes=r}},node_ops:{getattr:function(e){var r={};return r.dev=we.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,we.isDir(e.mode)?r.size=4096:we.isFile(e.mode)?r.size=e.usedBytes:we.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr:function(e,r){void 0!==r.mode&&(e.mode=r.mode),void 0!==r.timestamp&&(e.timestamp=r.timestamp),void 0!==r.size&&Ee.resizeFileStorage(e,r.size)},lookup:function(e,r){throw we.genericErrors[44]},mknod:function(e,r,t,n){return Ee.createNode(e,r,t,n)},rename:function(e,r,t){if(we.isDir(e.mode)){var n;try{n=we.lookupNode(r,t)}catch(e){}if(n)for(var o in n.contents)throw new we.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=t,r.contents[t]=e,r.timestamp=e.parent.timestamp,e.parent=r},unlink:function(e,r){delete e.contents[r],e.timestamp=Date.now()},rmdir:function(e,r){var t=we.lookupNode(e,r);for(var n in t.contents)throw new we.ErrnoError(55);delete e.contents[r],e.timestamp=Date.now()},readdir:function(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,r,t){var n=Ee.createNode(e,r,41471,0);return n.link=t,n},readlink:function(e){if(!we.isLink(e.mode))throw new we.ErrnoError(28);return e.link}},stream_ops:{read:function(e,r,t,n,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var i=Math.min(e.node.usedBytes-o,n);if(i>8&&a.subarray)r.set(a.subarray(o,o+i),t);else for(var s=0;s<i;s++)r[t+s]=a[o+s];return i},write:function(e,r,t,n,o,a){if(r.buffer===P.buffer&&(a=!1),!n)return 0;var i=e.node;if(i.timestamp=Date.now(),r.subarray&&(!i.contents||i.contents.subarray)){if(a)return i.contents=r.subarray(t,t+n),i.usedBytes=n,n;if(0===i.usedBytes&&0===o)return i.contents=r.slice(t,t+n),i.usedBytes=n,n;if(o+n<=i.usedBytes)return i.contents.set(r.subarray(t,t+n),o),n}if(Ee.expandFileStorage(i,o+n),i.contents.subarray&&r.subarray)i.contents.set(r.subarray(t,t+n),o);else for(var s=0;s<n;s++)i.contents[o+s]=r[t+s];return i.usedBytes=Math.max(i.usedBytes,o+n),n},llseek:function(e,r,t){var n=r;if(1===t?n+=e.position:2===t&&we.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new we.ErrnoError(28);return n},allocate:function(e,r,t){Ee.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap:function(e,r,t,n,o,a){if(0!==r)throw new we.ErrnoError(28);if(!we.isFile(e.node.mode))throw new we.ErrnoError(43);var i,s,u=e.node.contents;if(2&a||u.buffer!==A){if((n>0||n+t<u.length)&&(u=u.subarray?u.subarray(n,n+t):Array.prototype.slice.call(u,n,n+t)),s=!0,!(i=be(t)))throw new we.ErrnoError(48);P.set(u,i)}else s=!1,i=u.byteOffset;return{ptr:i,allocated:s}},msync:function(e,r,t,n,o){if(!we.isFile(e.node.mode))throw new we.ErrnoError(43);if(2&o)return 0;Ee.stream_ops.write(e,r,0,n,t,!1);return 0}}},ye={dbs:{},indexedDB:function(){if("undefined"!=typeof indexedDB)return indexedDB;var e=null;return"object"==typeof window&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),D(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return Ee.mount.apply(null,arguments)},syncfs:function(e,r,t){ye.getLocalSet(e,function(n,o){if(n)return t(n);ye.getRemoteSet(e,function(e,n){if(e)return t(e);var a=r?n:o,i=r?o:n;ye.reconcile(a,i,t)})})},getDB:function(e,r){var t,n=ye.dbs[e];if(n)return r(null,n);try{t=ye.indexedDB().open(e,ye.DB_VERSION)}catch(e){return r(e)}if(!t)return r("Unable to connect to IndexedDB");t.onupgradeneeded=function(e){var r,t=e.target.result,n=e.target.transaction;(r=t.objectStoreNames.contains(ye.DB_STORE_NAME)?n.objectStore(ye.DB_STORE_NAME):t.createObjectStore(ye.DB_STORE_NAME)).indexNames.contains("timestamp")||r.createIndex("timestamp","timestamp",{unique:!1})},t.onsuccess=function(){n=t.result,ye.dbs[e]=n,r(null,n)},t.onerror=function(e){r(this.error),e.preventDefault()}},getLocalSet:function(e,r){var t={};function n(e){return"."!==e&&".."!==e}function o(e){return function(r){return ge.join2(e,r)}}for(var a=we.readdir(e.mountpoint).filter(n).map(o(e.mountpoint));a.length;){var i,s=a.pop();try{i=we.stat(s)}catch(e){return r(e)}we.isDir(i.mode)&&a.push.apply(a,we.readdir(s).filter(n).map(o(s))),t[s]={timestamp:i.mtime}}return r(null,{type:"local",entries:t})},getRemoteSet:function(e,r){var t={};ye.getDB(e.mountpoint,function(e,n){if(e)return r(e);try{var o=n.transaction([ye.DB_STORE_NAME],"readonly");o.onerror=function(e){r(this.error),e.preventDefault()},o.objectStore(ye.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(e){var o=e.target.result;if(!o)return r(null,{type:"remote",db:n,entries:t});t[o.primaryKey]={timestamp:o.key},o.continue()}}catch(e){return r(e)}})},loadLocalEntry:function(e,r){var t,n;try{n=we.lookupPath(e).node,t=we.stat(e)}catch(e){return r(e)}return we.isDir(t.mode)?r(null,{timestamp:t.mtime,mode:t.mode}):we.isFile(t.mode)?(n.contents=Ee.getFileDataAsTypedArray(n),r(null,{timestamp:t.mtime,mode:t.mode,contents:n.contents})):r(new Error("node type not supported"))},storeLocalEntry:function(e,r,t){try{if(we.isDir(r.mode))we.mkdir(e,r.mode);else{if(!we.isFile(r.mode))return t(new Error("node type not supported"));we.writeFile(e,r.contents,{canOwn:!0})}we.chmod(e,r.mode),we.utime(e,r.timestamp,r.timestamp)}catch(e){return t(e)}t(null)},removeLocalEntry:function(e,r){try{we.lookupPath(e);var t=we.stat(e);we.isDir(t.mode)?we.rmdir(e):we.isFile(t.mode)&&we.unlink(e)}catch(e){return r(e)}r(null)},loadRemoteEntry:function(e,r,t){var n=e.get(r);n.onsuccess=function(e){t(null,e.target.result)},n.onerror=function(e){t(this.error),e.preventDefault()}},storeRemoteEntry:function(e,r,t,n){var o=e.put(t,r);o.onsuccess=function(){n(null)},o.onerror=function(e){n(this.error),e.preventDefault()}},removeRemoteEntry:function(e,r,t){var n=e.delete(r);n.onsuccess=function(){t(null)},n.onerror=function(e){t(this.error),e.preventDefault()}},reconcile:function(e,r,t){var n=0,o=[];Object.keys(e.entries).forEach(function(t){var a=e.entries[t],i=r.entries[t];i&&a.timestamp.getTime()==i.timestamp.getTime()||(o.push(t),n++)});var a=[];if(Object.keys(r.entries).forEach(function(t){r.entries[t];e.entries[t]||(a.push(t),n++)}),!n)return t(null);var i=!1,s=("remote"===e.type?e.db:r.db).transaction([ye.DB_STORE_NAME],"readwrite"),u=s.objectStore(ye.DB_STORE_NAME);function c(e){if(e&&!i)return i=!0,t(e)}s.onerror=function(e){c(this.error),e.preventDefault()},s.oncomplete=function(e){i||t(null)},o.sort().forEach(function(e){"local"===r.type?ye.loadRemoteEntry(u,e,function(r,t){if(r)return c(r);ye.storeLocalEntry(e,t,c)}):ye.loadLocalEntry(e,function(r,t){if(r)return c(r);ye.storeRemoteEntry(u,e,t,c)})}),a.sort().reverse().forEach(function(e){"local"===r.type?ye.removeLocalEntry(e,c):ye.removeRemoteEntry(u,e,c)})}},we={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,r){if(r=r||{},!(e=ve.resolve(we.cwd(),e)))return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};for(var n in t)void 0===r[n]&&(r[n]=t[n]);if(r.recurse_count>8)throw new we.ErrnoError(32);for(var o=ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),a=we.root,i="/",s=0;s<o.length;s++){var u=s===o.length-1;if(u&&r.parent)break;if(a=we.lookupNode(a,o[s]),i=ge.join2(i,o[s]),we.isMountpoint(a)&&(!u||u&&r.follow_mount)&&(a=a.mounted.root),!u||r.follow)for(var c=0;we.isLink(a.mode);){var f=we.readlink(i);if(i=ve.resolve(ge.dirname(i),f),a=we.lookupPath(i,{recurse_count:r.recurse_count}).node,c++>40)throw new we.ErrnoError(32)}}return{path:i,node:a}},getPath:function(e){for(var r;;){if(we.isRoot(e)){var t=e.mount.mountpoint;return r?"/"!==t[t.length-1]?t+"/"+r:t+r:t}r=r?e.name+"/"+r:e.name,e=e.parent}},hashName:function(e,r){for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%we.nameTable.length},hashAddNode:function(e){var r=we.hashName(e.parent.id,e.name);e.name_next=we.nameTable[r],we.nameTable[r]=e},hashRemoveNode:function(e){var r=we.hashName(e.parent.id,e.name);if(we.nameTable[r]===e)we.nameTable[r]=e.name_next;else for(var t=we.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode:function(e,r){var t=we.mayLookup(e);if(t)throw new we.ErrnoError(t,e);for(var n=we.hashName(e.id,r),o=we.nameTable[n];o;o=o.name_next){var a=o.name;if(o.parent.id===e.id&&a===r)return o}return we.lookup(e,r)},createNode:function(e,r,t,n){var o=new we.FSNode(e,r,t,n);return we.hashAddNode(o),o},destroyNode:function(e){we.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var r=we.flagModes[e];if(void 0===r)throw new Error("Unknown file open mode: "+e);return r},flagsToPermissionString:function(e){var r=["r","w","rw"][3&e];return 512&e&&(r+="w"),r},nodePermissions:function(e,r){return we.ignorePermissions?0:(-1===r.indexOf("r")||292&e.mode)&&(-1===r.indexOf("w")||146&e.mode)&&(-1===r.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){var r=we.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate:function(e,r){try{we.lookupNode(e,r);return 20}catch(e){}return we.nodePermissions(e,"wx")},mayDelete:function(e,r,t){var n;try{n=we.lookupNode(e,r)}catch(e){return e.errno}var o=we.nodePermissions(e,"wx");if(o)return o;if(t){if(!we.isDir(n.mode))return 54;if(we.isRoot(n)||we.getPath(n)===we.cwd())return 10}else if(we.isDir(n.mode))return 31;return 0},mayOpen:function(e,r){return e?we.isLink(e.mode)?32:we.isDir(e.mode)&&("r"!==we.flagsToPermissionString(r)||512&r)?31:we.nodePermissions(e,we.flagsToPermissionString(r)):44},MAX_OPEN_FDS:4096,nextfd:function(e,r){e=e||0,r=r||we.MAX_OPEN_FDS;for(var t=e;t<=r;t++)if(!we.streams[t])return t;throw new we.ErrnoError(33)},getStream:function(e){return we.streams[e]},createStream:function(e,r,t){we.FSStream||(we.FSStream=function(){},we.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var n=new we.FSStream;for(var o in e)n[o]=e[o];e=n;var a=we.nextfd(r,t);return e.fd=a,we.streams[a]=e,e},closeStream:function(e){we.streams[e]=null},chrdev_stream_ops:{open:function(e){var r=we.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new we.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,r){return e<<8|r},registerDevice:function(e,r){we.devices[e]={stream_ops:r}},getDevice:function(e){return we.devices[e]},getMounts:function(e){for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push.apply(t,n.mounts)}return r},syncfs:function(e,r){"function"==typeof e&&(r=e,e=!1),we.syncFSRequests++,we.syncFSRequests>1&&b("warning: "+we.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var t=we.getMounts(we.root.mount),n=0;function o(e){return we.syncFSRequests--,r(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,o(e));++n>=t.length&&o(null)}t.forEach(function(r){if(!r.type.syncfs)return a(null);r.type.syncfs(r,e,a)})},mount:function(e,r,t){var n,o="/"===t,a=!t;if(o&&we.root)throw new we.ErrnoError(10);if(!o&&!a){var i=we.lookupPath(t,{follow_mount:!1});if(t=i.path,n=i.node,we.isMountpoint(n))throw new we.ErrnoError(10);if(!we.isDir(n.mode))throw new we.ErrnoError(54)}var s={type:e,opts:r,mountpoint:t,mounts:[]},u=e.mount(s);return u.mount=s,s.root=u,o?we.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(e){var r=we.lookupPath(e,{follow_mount:!1});if(!we.isMountpoint(r.node))throw new we.ErrnoError(28);var t=r.node,n=t.mounted,o=we.getMounts(n);Object.keys(we.nameTable).forEach(function(e){for(var r=we.nameTable[e];r;){var t=r.name_next;-1!==o.indexOf(r.mount)&&we.destroyNode(r),r=t}}),t.mounted=null;var a=t.mount.mounts.indexOf(n);t.mount.mounts.splice(a,1)},lookup:function(e,r){return e.node_ops.lookup(e,r)},mknod:function(e,r,t){var n=we.lookupPath(e,{parent:!0}).node,o=ge.basename(e);if(!o||"."===o||".."===o)throw new we.ErrnoError(28);var a=we.mayCreate(n,o);if(a)throw new we.ErrnoError(a);if(!n.node_ops.mknod)throw new we.ErrnoError(63);return n.node_ops.mknod(n,o,r,t)},create:function(e,r){return r=void 0!==r?r:438,r&=4095,r|=32768,we.mknod(e,r,0)},mkdir:function(e,r){return r=void 0!==r?r:511,r&=1023,r|=16384,we.mknod(e,r,0)},mkdirTree:function(e,r){for(var t=e.split("/"),n="",o=0;o<t.length;++o)if(t[o]){n+="/"+t[o];try{we.mkdir(n,r)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,r,t){return void 0===t&&(t=r,r=438),r|=8192,we.mknod(e,r,t)},symlink:function(e,r){if(!ve.resolve(e))throw new we.ErrnoError(44);var t=we.lookupPath(r,{parent:!0}).node;if(!t)throw new we.ErrnoError(44);var n=ge.basename(r),o=we.mayCreate(t,n);if(o)throw new we.ErrnoError(o);if(!t.node_ops.symlink)throw new we.ErrnoError(63);return t.node_ops.symlink(t,n,e)},rename:function(e,r){var t,n,o=ge.dirname(e),a=ge.dirname(r),i=ge.basename(e),s=ge.basename(r);if(t=we.lookupPath(e,{parent:!0}).node,n=we.lookupPath(r,{parent:!0}).node,!t||!n)throw new we.ErrnoError(44);if(t.mount!==n.mount)throw new we.ErrnoError(75);var u,c=we.lookupNode(t,i),f=ve.relative(e,a);if("."!==f.charAt(0))throw new we.ErrnoError(28);if("."!==(f=ve.relative(r,o)).charAt(0))throw new we.ErrnoError(55);try{u=we.lookupNode(n,s)}catch(e){}if(c!==u){var l=we.isDir(c.mode),d=we.mayDelete(t,i,l);if(d)throw new we.ErrnoError(d);if(d=u?we.mayDelete(n,s,l):we.mayCreate(n,s))throw new we.ErrnoError(d);if(!t.node_ops.rename)throw new we.ErrnoError(63);if(we.isMountpoint(c)||u&&we.isMountpoint(u))throw new we.ErrnoError(10);if(n!==t&&(d=we.nodePermissions(t,"w")))throw new we.ErrnoError(d);try{we.trackingDelegate.willMovePath&&we.trackingDelegate.willMovePath(e,r)}catch(t){b("FS.trackingDelegate['willMovePath']('"+e+"', '"+r+"') threw an exception: "+t.message)}we.hashRemoveNode(c);try{t.node_ops.rename(c,n,s)}catch(e){throw e}finally{we.hashAddNode(c)}try{we.trackingDelegate.onMovePath&&we.trackingDelegate.onMovePath(e,r)}catch(t){b("FS.trackingDelegate['onMovePath']('"+e+"', '"+r+"') threw an exception: "+t.message)}}},rmdir:function(e){var r=we.lookupPath(e,{parent:!0}).node,t=ge.basename(e),n=we.lookupNode(r,t),o=we.mayDelete(r,t,!0);if(o)throw new we.ErrnoError(o);if(!r.node_ops.rmdir)throw new we.ErrnoError(63);if(we.isMountpoint(n))throw new we.ErrnoError(10);try{we.trackingDelegate.willDeletePath&&we.trackingDelegate.willDeletePath(e)}catch(r){b("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+r.message)}r.node_ops.rmdir(r,t),we.destroyNode(n);try{we.trackingDelegate.onDeletePath&&we.trackingDelegate.onDeletePath(e)}catch(r){b("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+r.message)}},readdir:function(e){var r=we.lookupPath(e,{follow:!0}).node;if(!r.node_ops.readdir)throw new we.ErrnoError(54);return r.node_ops.readdir(r)},unlink:function(e){var r=we.lookupPath(e,{parent:!0}).node,t=ge.basename(e),n=we.lookupNode(r,t),o=we.mayDelete(r,t,!1);if(o)throw new we.ErrnoError(o);if(!r.node_ops.unlink)throw new we.ErrnoError(63);if(we.isMountpoint(n))throw new we.ErrnoError(10);try{we.trackingDelegate.willDeletePath&&we.trackingDelegate.willDeletePath(e)}catch(r){b("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+r.message)}r.node_ops.unlink(r,t),we.destroyNode(n);try{we.trackingDelegate.onDeletePath&&we.trackingDelegate.onDeletePath(e)}catch(r){b("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+r.message)}},readlink:function(e){var r=we.lookupPath(e).node;if(!r)throw new we.ErrnoError(44);if(!r.node_ops.readlink)throw new we.ErrnoError(28);return ve.resolve(we.getPath(r.parent),r.node_ops.readlink(r))},stat:function(e,r){var t=we.lookupPath(e,{follow:!r}).node;if(!t)throw new we.ErrnoError(44);if(!t.node_ops.getattr)throw new we.ErrnoError(63);return t.node_ops.getattr(t)},lstat:function(e){return we.stat(e,!0)},chmod:function(e,r,t){var n;"string"==typeof e?n=we.lookupPath(e,{follow:!t}).node:n=e;if(!n.node_ops.setattr)throw new we.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&r|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,r){we.chmod(e,r,!0)},fchmod:function(e,r){var t=we.getStream(e);if(!t)throw new we.ErrnoError(8);we.chmod(t.node,r)},chown:function(e,r,t,n){var o;"string"==typeof e?o=we.lookupPath(e,{follow:!n}).node:o=e;if(!o.node_ops.setattr)throw new we.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(e,r,t){we.chown(e,r,t,!0)},fchown:function(e,r,t){var n=we.getStream(e);if(!n)throw new we.ErrnoError(8);we.chown(n.node,r,t)},truncate:function(e,r){if(r<0)throw new we.ErrnoError(28);var t;"string"==typeof e?t=we.lookupPath(e,{follow:!0}).node:t=e;if(!t.node_ops.setattr)throw new we.ErrnoError(63);if(we.isDir(t.mode))throw new we.ErrnoError(31);if(!we.isFile(t.mode))throw new we.ErrnoError(28);var n=we.nodePermissions(t,"w");if(n)throw new we.ErrnoError(n);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate:function(e,r){var t=we.getStream(e);if(!t)throw new we.ErrnoError(8);if(0==(2097155&t.flags))throw new we.ErrnoError(28);we.truncate(t.node,r)},utime:function(e,r,t){var n=we.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(r,t)})},open:function(e,r,t,n,a){if(""===e)throw new we.ErrnoError(44);var i;if(t=void 0===t?438:t,t=64&(r="string"==typeof r?we.modeStringToFlags(r):r)?4095&t|32768:0,"object"==typeof e)i=e;else{e=ge.normalize(e);try{i=we.lookupPath(e,{follow:!(131072&r)}).node}catch(e){}}var s=!1;if(64&r)if(i){if(128&r)throw new we.ErrnoError(20)}else i=we.mknod(e,t,0),s=!0;if(!i)throw new we.ErrnoError(44);if(we.isChrdev(i.mode)&&(r&=-513),65536&r&&!we.isDir(i.mode))throw new we.ErrnoError(54);if(!s){var u=we.mayOpen(i,r);if(u)throw new we.ErrnoError(u)}512&r&&we.truncate(i,0),r&=-131713;var c=we.createStream({node:i,path:we.getPath(i),flags:r,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},n,a);c.stream_ops.open&&c.stream_ops.open(c),!o.logReadFiles||1&r||(we.readFiles||(we.readFiles={}),e in we.readFiles||(we.readFiles[e]=1,b("FS.trackingDelegate error on read file: "+e)));try{if(we.trackingDelegate.onOpenFile){var f=0;1!=(2097155&r)&&(f|=we.tracking.openFlags.READ),0!=(2097155&r)&&(f|=we.tracking.openFlags.WRITE),we.trackingDelegate.onOpenFile(e,f)}}catch(r){b("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+r.message)}return c},close:function(e){if(we.isClosed(e))throw new we.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{we.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,r,t){if(we.isClosed(e))throw new we.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new we.ErrnoError(70);if(0!=t&&1!=t&&2!=t)throw new we.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read:function(e,r,t,n,o){if(n<0||o<0)throw new we.ErrnoError(28);if(we.isClosed(e))throw new we.ErrnoError(8);if(1==(2097155&e.flags))throw new we.ErrnoError(8);if(we.isDir(e.node.mode))throw new we.ErrnoError(31);if(!e.stream_ops.read)throw new we.ErrnoError(28);var a=void 0!==o;if(a){if(!e.seekable)throw new we.ErrnoError(70)}else o=e.position;var i=e.stream_ops.read(e,r,t,n,o);return a||(e.position+=i),i},write:function(e,r,t,n,o,a){if(n<0||o<0)throw new we.ErrnoError(28);if(we.isClosed(e))throw new we.ErrnoError(8);if(0==(2097155&e.flags))throw new we.ErrnoError(8);if(we.isDir(e.node.mode))throw new we.ErrnoError(31);if(!e.stream_ops.write)throw new we.ErrnoError(28);e.seekable&&1024&e.flags&&we.llseek(e,0,2);var i=void 0!==o;if(i){if(!e.seekable)throw new we.ErrnoError(70)}else o=e.position;var s=e.stream_ops.write(e,r,t,n,o,a);i||(e.position+=s);try{e.path&&we.trackingDelegate.onWriteToFile&&we.trackingDelegate.onWriteToFile(e.path)}catch(r){b("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+r.message)}return s},allocate:function(e,r,t){if(we.isClosed(e))throw new we.ErrnoError(8);if(r<0||t<=0)throw new we.ErrnoError(28);if(0==(2097155&e.flags))throw new we.ErrnoError(8);if(!we.isFile(e.node.mode)&&!we.isDir(e.node.mode))throw new we.ErrnoError(43);if(!e.stream_ops.allocate)throw new we.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap:function(e,r,t,n,o,a){if(0!=(2&o)&&0==(2&a)&&2!=(2097155&e.flags))throw new we.ErrnoError(2);if(1==(2097155&e.flags))throw new we.ErrnoError(2);if(!e.stream_ops.mmap)throw new we.ErrnoError(43);return e.stream_ops.mmap(e,r,t,n,o,a)},msync:function(e,r,t,n,o){return e&&e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,o):0},munmap:function(e){return 0},ioctl:function(e,r,t){if(!e.stream_ops.ioctl)throw new we.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile:function(e,r){if((r=r||{}).flags=r.flags||0,r.encoding=r.encoding||"binary","utf8"!==r.encoding&&"binary"!==r.encoding)throw new Error('Invalid encoding type "'+r.encoding+'"');var t,n=we.open(e,r.flags),o=we.stat(e).size,a=new Uint8Array(o);return we.read(n,a,0,o,0),"utf8"===r.encoding?t=N(a,0):"binary"===r.encoding&&(t=a),we.close(n),t},writeFile:function(e,r,t){(t=t||{}).flags=t.flags||577;var n=we.open(e,t.flags,t.mode);if("string"==typeof r){var o=new Uint8Array(z(r)+1),a=j(r,o,0,o.length);we.write(n,o,0,a,void 0,t.canOwn)}else{if(!ArrayBuffer.isView(r))throw new Error("Unsupported data type");we.write(n,r,0,r.byteLength,void 0,t.canOwn)}we.close(n)},cwd:function(){return we.currentPath},chdir:function(e){var r=we.lookupPath(e,{follow:!0});if(null===r.node)throw new we.ErrnoError(44);if(!we.isDir(r.node.mode))throw new we.ErrnoError(54);var t=we.nodePermissions(r.node,"x");if(t)throw new we.ErrnoError(t);we.currentPath=r.path},createDefaultDirectories:function(){we.mkdir("/tmp"),we.mkdir("/home"),we.mkdir("/home/web_user")},createDefaultDevices:function(){we.mkdir("/dev"),we.registerDevice(we.makedev(1,3),{read:function(){return 0},write:function(e,r,t,n,o){return n}}),we.mkdev("/dev/null",we.makedev(1,3)),he.register(we.makedev(5,0),he.default_tty_ops),he.register(we.makedev(6,0),he.default_tty1_ops),we.mkdev("/dev/tty",we.makedev(5,0)),we.mkdev("/dev/tty1",we.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){ae("randomDevice")}}();we.createDevice("/dev","random",e),we.createDevice("/dev","urandom",e),we.mkdir("/dev/shm"),we.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){we.mkdir("/proc");var e=we.mkdir("/proc/self");we.mkdir("/proc/self/fd"),we.mount({mount:function(){var r=we.createNode(e,"fd",16895,73);return r.node_ops={lookup:function(e,r){var t=+r,n=we.getStream(t);if(!n)throw new we.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return o.parent=o,o}},r}},{},"/proc/self/fd")},createStandardStreams:function(){o.stdin?we.createDevice("/dev","stdin",o.stdin):we.symlink("/dev/tty","/dev/stdin"),o.stdout?we.createDevice("/dev","stdout",null,o.stdout):we.symlink("/dev/tty","/dev/stdout"),o.stderr?we.createDevice("/dev","stderr",null,o.stderr):we.symlink("/dev/tty1","/dev/stderr");we.open("/dev/stdin",0),we.open("/dev/stdout",1),we.open("/dev/stderr",1)},ensureErrnoError:function(){we.ErrnoError||(we.ErrnoError=function(e,r){this.node=r,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},we.ErrnoError.prototype=new Error,we.ErrnoError.prototype.constructor=we.ErrnoError,[44].forEach(function(e){we.genericErrors[e]=new we.ErrnoError(e),we.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){we.ensureErrnoError(),we.nameTable=new Array(4096),we.mount(Ee,{},"/"),we.createDefaultDirectories(),we.createDefaultDevices(),we.createSpecialDirectories(),we.filesystems={MEMFS:Ee,IDBFS:ye}},init:function(e,r,t){we.init.initialized=!0,we.ensureErrnoError(),o.stdin=e||o.stdin,o.stdout=r||o.stdout,o.stderr=t||o.stderr,we.createStandardStreams()},quit:function(){we.init.initialized=!1;var e=o._fflush;e&&e(0);for(var r=0;r<we.streams.length;r++){var t=we.streams[r];t&&we.close(t)}},getMode:function(e,r){var t=0;return e&&(t|=365),r&&(t|=146),t},findObject:function(e,r){var t=we.analyzePath(e,r);return t.exists?t.object:null},analyzePath:function(e,r){try{e=(n=we.lookupPath(e,{follow:!r})).path}catch(e){}var t={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=we.lookupPath(e,{parent:!0});t.parentExists=!0,t.parentPath=n.path,t.parentObject=n.node,t.name=ge.basename(e),n=we.lookupPath(e,{follow:!r}),t.exists=!0,t.path=n.path,t.object=n.node,t.name=n.node.name,t.isRoot="/"===n.path}catch(e){t.error=e.errno}return t},createPath:function(e,r,t,n){e="string"==typeof e?e:we.getPath(e);for(var o=r.split("/").reverse();o.length;){var a=o.pop();if(a){var i=ge.join2(e,a);try{we.mkdir(i)}catch(e){}e=i}}return i},createFile:function(e,r,t,n,o){var a=ge.join2("string"==typeof e?e:we.getPath(e),r),i=we.getMode(n,o);return we.create(a,i)},createDataFile:function(e,r,t,n,o,a){var i=r?ge.join2("string"==typeof e?e:we.getPath(e),r):e,s=we.getMode(n,o),u=we.create(i,s);if(t){if("string"==typeof t){for(var c=new Array(t.length),f=0,l=t.length;f<l;++f)c[f]=t.charCodeAt(f);t=c}we.chmod(u,146|s);var d=we.open(u,577);we.write(d,t,0,t.length,0,a),we.close(d),we.chmod(u,s)}return u},createDevice:function(e,r,t,n){var o=ge.join2("string"==typeof e?e:we.getPath(e),r),a=we.getMode(!!t,!!n);we.createDevice.major||(we.createDevice.major=64);var i=we.makedev(we.createDevice.major++,0);return we.registerDevice(i,{open:function(e){e.seekable=!1},close:function(e){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,r,n,o,a){for(var i=0,s=0;s<o;s++){var u;try{u=t()}catch(e){throw new we.ErrnoError(29)}if(void 0===u&&0===i)throw new we.ErrnoError(6);if(null==u)break;i++,r[n+s]=u}return i&&(e.node.timestamp=Date.now()),i},write:function(e,r,t,o,a){for(var i=0;i<o;i++)try{n(r[t+i])}catch(e){throw new we.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),i}}),we.mkdev(o,a,i)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!m)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=nt(m(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new we.ErrnoError(29)}},createLazyFile:function(e,r,t,n,o){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(e){if(!(e>this.length-1||e<0)){var r=e%this.chunkSize,t=e/this.chunkSize|0;return this.getter(t)[r]}},a.prototype.setDataGetter=function(e){this.getter=e},a.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",t,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+t+". Status: "+e.status);var r,n=Number(e.getResponseHeader("Content-length")),o=(r=e.getResponseHeader("Accept-Ranges"))&&"bytes"===r,a=(r=e.getResponseHeader("Content-Encoding"))&&"gzip"===r,i=1048576;o||(i=n);var s=this;s.setDataGetter(function(e){var r=e*i,o=(e+1)*i-1;if(o=Math.min(o,n-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,r){if(e>r)throw new Error("invalid range ("+e+", "+r+") or no bytes requested!");if(r>n-1)throw new Error("only "+n+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",t,!1),n!==i&&o.setRequestHeader("Range","bytes="+e+"-"+r),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+t+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):nt(o.responseText||"",!0)}(r,o)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]}),!a&&n||(i=n=1,n=this.getter(0).length,i=n,h("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=i,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!d)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var i=new a;Object.defineProperties(i,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:i}}else s={isDevice:!1,url:t};var u=we.createFile(e,r,s,n,o);s.contents?u.contents=s.contents:s.url&&(u.contents=null,u.url=s.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var c={};return Object.keys(u.stream_ops).forEach(function(e){var r=u.stream_ops[e];c[e]=function(){return we.forceLoadFile(u),r.apply(null,arguments)}}),c.read=function(e,r,t,n,o){we.forceLoadFile(u);var a=e.node.contents;if(o>=a.length)return 0;var i=Math.min(a.length-o,n);if(a.slice)for(var s=0;s<i;s++)r[t+s]=a[o+s];else for(s=0;s<i;s++)r[t+s]=a.get(o+s);return i},u.stream_ops=c,u},createPreloadedFile:function(e,r,t,n,a,i,s,u,c,f){Ne.init();var l=r?ve.resolve(ge.join2(e,r)):e;te("cp "+l);function d(t){function d(t){f&&f(),u||we.createDataFile(e,r,t,n,a,c),i&&i(),oe()}var m=!1;o.preloadPlugins.forEach(function(e){m||e.canHandle(l)&&(e.handle(t,l,d,function(){s&&s(),oe()}),m=!0)}),m||d(t)}ne(),"string"==typeof t?Ne.asyncLoad(t,function(e){d(e)},s):d(t)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,r,t){r=r||function(){},t=t||function(){};var n=we.indexedDB();try{var o=n.open(we.DB_NAME(),we.DB_VERSION)}catch(e){return t(e)}o.onupgradeneeded=function(){h("creating db"),o.result.createObjectStore(we.DB_STORE_NAME)},o.onsuccess=function(){var n=o.result.transaction([we.DB_STORE_NAME],"readwrite"),a=n.objectStore(we.DB_STORE_NAME),i=0,s=0,u=e.length;function c(){0==s?r():t()}e.forEach(function(e){var r=a.put(we.analyzePath(e).object.contents,e);r.onsuccess=function(){++i+s==u&&c()},r.onerror=function(){i+ ++s==u&&c()}}),n.onerror=t},o.onerror=t},loadFilesFromDB:function(e,r,t){r=r||function(){},t=t||function(){};var n=we.indexedDB();try{var o=n.open(we.DB_NAME(),we.DB_VERSION)}catch(e){return t(e)}o.onupgradeneeded=t,o.onsuccess=function(){var n=o.result;try{var a=n.transaction([we.DB_STORE_NAME],"readonly")}catch(e){return void t(e)}var i=a.objectStore(we.DB_STORE_NAME),s=0,u=0,c=e.length;function f(){0==u?r():t()}e.forEach(function(e){var r=i.get(e);r.onsuccess=function(){we.analyzePath(e).exists&&we.unlink(e),we.createDataFile(ge.dirname(e),ge.basename(e),r.result,!0,!0,!0),++s+u==c&&f()},r.onerror=function(){s+ ++u==c&&f()}}),a.onerror=t},o.onerror=t}},xe={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,r){if("/"!==r[0]){var t;if(-100===e)t=we.cwd();else{var n=we.getStream(e);if(!n)throw new we.ErrnoError(8);t=n.path}r=ge.join2(t,r)}return r},doStat:function(e,r,t){try{var n=e(r)}catch(e){if(e&&e.node&&ge.normalize(r)!==ge.normalize(we.getPath(e.node)))return-54;throw e}return C[t>>2]=n.dev,C[t+4>>2]=0,C[t+8>>2]=n.ino,C[t+12>>2]=n.mode,C[t+16>>2]=n.nlink,C[t+20>>2]=n.uid,C[t+24>>2]=n.gid,C[t+28>>2]=n.rdev,C[t+32>>2]=0,fe=[n.size>>>0,(ce=n.size,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)],C[t+40>>2]=fe[0],C[t+44>>2]=fe[1],C[t+48>>2]=4096,C[t+52>>2]=n.blocks,C[t+56>>2]=n.atime.getTime()/1e3|0,C[t+60>>2]=0,C[t+64>>2]=n.mtime.getTime()/1e3|0,C[t+68>>2]=0,C[t+72>>2]=n.ctime.getTime()/1e3|0,C[t+76>>2]=0,fe=[n.ino>>>0,(ce=n.ino,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)],C[t+80>>2]=fe[0],C[t+84>>2]=fe[1],0},doMsync:function(e,r,t,n,o){var a=F.slice(e,e+t);we.msync(r,a,o,t,n)},doMkdir:function(e,r){return"/"===(e=ge.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),we.mkdir(e,r,0),0},doMknod:function(e,r,t){switch(61440&r){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return we.mknod(e,r,t),0},doReadlink:function(e,r,t){if(t<=0)return-28;var n=we.readlink(e),o=Math.min(t,z(n)),a=P[r+o];return q(n,r,t+1),P[r+o]=a,o},doAccess:function(e,r){if(-8&r)return-28;var t;if(!(t=we.lookupPath(e,{follow:!0}).node))return-44;var n="";return 4&r&&(n+="r"),2&r&&(n+="w"),1&r&&(n+="x"),n&&we.nodePermissions(t,n)?-2:0},doDup:function(e,r,t){var n=we.getStream(t);return n&&we.close(n),we.open(e,r,0,t,t).fd},doReadv:function(e,r,t,n){for(var o=0,a=0;a<t;a++){var i=C[r+8*a>>2],s=C[r+(8*a+4)>>2],u=we.read(e,P,i,s,n);if(u<0)return-1;if(o+=u,u<s)break}return o},doWritev:function(e,r,t,n){for(var o=0,a=0;a<t;a++){var i=C[r+8*a>>2],s=C[r+(8*a+4)>>2],u=we.write(e,P,i,s,n);if(u<0)return-1;o+=u}return o},varargs:void 0,get:function(){return xe.varargs+=4,C[xe.varargs-4>>2]},getStr:function(e){return U(e)},getStreamFromFD:function(e){var r=we.getStream(e);if(!r)throw new we.ErrnoError(8);return r},get64:function(e,r){return e}};function ke(e){return C[ft()>>2]=e,e}var _e={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Se={mount:function(e){return o.websocket=o.websocket&&"object"==typeof o.websocket?o.websocket:{},o.websocket._callbacks={},o.websocket.on=function(e,r){return"function"==typeof r&&(this._callbacks[e]=r),this},o.websocket.emit=function(e,r){"function"==typeof this._callbacks[e]&&this._callbacks[e].call(this,r)},we.createNode(null,"/",16895,0)},createSocket:function(e,r,t){r&=-526337,t&&D(1==r==(6==t));var n={family:e,type:r,protocol:t,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:Se.websocket_sock_ops},o=Se.nextname(),a=we.createNode(Se.root,o,49152,0);a.sock=n;var i=we.createStream({path:o,node:a,flags:2,seekable:!1,stream_ops:Se.stream_ops});return n.stream=i,n},getSocket:function(e){var r=we.getStream(e);return r&&we.isSocket(r.node.mode)?r.node.sock:null},stream_ops:{poll:function(e){var r=e.node.sock;return r.sock_ops.poll(r)},ioctl:function(e,r,t){var n=e.node.sock;return n.sock_ops.ioctl(n,r,t)},read:function(e,r,t,n,o){var a=e.node.sock,i=a.sock_ops.recvmsg(a,n);return i?(r.set(i.buffer,t),i.buffer.length):0},write:function(e,r,t,n,o){var a=e.node.sock;return a.sock_ops.sendmsg(a,r,t,n)},close:function(e){var r=e.node.sock;r.sock_ops.close(r)}},nextname:function(){return Se.nextname.current||(Se.nextname.current=0),"socket["+Se.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,r,t){var n;if("object"==typeof r&&(n=r,r=null,t=null),n)if(n._socket)r=n._socket.remoteAddress,t=n._socket.remotePort;else{var a=/ws[s]?:\/\/([^:]+):(\d+)/.exec(n.url);if(!a)throw new Error("WebSocket URL must be in the format ws(s)://address:port");r=a[1],t=parseInt(a[2],10)}else try{var i=o.websocket&&"object"==typeof o.websocket,u="ws:#".replace("#","//");if(i&&"string"==typeof o.websocket.url&&(u=o.websocket.url),"ws://"===u||"wss://"===u){var c=r.split("/");u=u+c[0]+":"+t+"/"+c.slice(1).join("/")}var f="binary";i&&"string"==typeof o.websocket.subprotocol&&(f=o.websocket.subprotocol);var l=void 0;"null"!==f&&(f=f.replace(/^ +| +$/g,"").split(/ *, */),l=s?{protocol:f.toString()}:f),i&&null===o.websocket.subprotocol&&(f="null",l=void 0),(n=new WebSocket(u,l)).binaryType="arraybuffer"}catch(e){throw new we.ErrnoError(_e.EHOSTUNREACH)}var d={addr:r,port:t,socket:n,dgram_send_queue:[]};return Se.websocket_sock_ops.addPeer(e,d),Se.websocket_sock_ops.handlePeerEvents(e,d),2===e.type&&void 0!==e.sport&&d.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(65280&e.sport)>>8,255&e.sport])),d},getPeer:function(e,r,t){return e.peers[r+":"+t]},addPeer:function(e,r){e.peers[r.addr+":"+r.port]=r},removePeer:function(e,r){delete e.peers[r.addr+":"+r.port]},handlePeerEvents:function(e,r){var t=!0,n=function(){o.websocket.emit("open",e.stream.fd);try{for(var t=r.dgram_send_queue.shift();t;)r.socket.send(t),t=r.dgram_send_queue.shift()}catch(e){r.socket.close()}};function a(n){if("string"==typeof n){n=(new TextEncoder).encode(n)}else{if(D(void 0!==n.byteLength),0==n.byteLength)return;n=new Uint8Array(n)}var a=t;if(t=!1,a&&10===n.length&&255===n[0]&&255===n[1]&&255===n[2]&&255===n[3]&&n[4]==="p".charCodeAt(0)&&n[5]==="o".charCodeAt(0)&&n[6]==="r".charCodeAt(0)&&n[7]==="t".charCodeAt(0)){var i=n[8]<<8|n[9];return Se.websocket_sock_ops.removePeer(e,r),r.port=i,void Se.websocket_sock_ops.addPeer(e,r)}e.recv_queue.push({addr:r.addr,port:r.port,data:n}),o.websocket.emit("message",e.stream.fd)}s?(r.socket.on("open",n),r.socket.on("message",function(e,r){r.binary&&a(new Uint8Array(e).buffer)}),r.socket.on("close",function(){o.websocket.emit("close",e.stream.fd)}),r.socket.on("error",function(r){e.error=_e.ECONNREFUSED,o.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})):(r.socket.onopen=n,r.socket.onclose=function(){o.websocket.emit("close",e.stream.fd)},r.socket.onmessage=function(e){a(e.data)},r.socket.onerror=function(r){e.error=_e.ECONNREFUSED,o.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})},poll:function(e){if(1===e.type&&e.server)return e.pending.length?65:0;var r=0,t=1===e.type?Se.websocket_sock_ops.getPeer(e,e.daddr,e.dport):null;return(e.recv_queue.length||!t||t&&t.socket.readyState===t.socket.CLOSING||t&&t.socket.readyState===t.socket.CLOSED)&&(r|=65),(!t||t&&t.socket.readyState===t.socket.OPEN)&&(r|=4),(t&&t.socket.readyState===t.socket.CLOSING||t&&t.socket.readyState===t.socket.CLOSED)&&(r|=16),r},ioctl:function(e,r,t){switch(r){case 21531:var n=0;return e.recv_queue.length&&(n=e.recv_queue[0].data.length),C[t>>2]=n,0;default:return _e.EINVAL}},close:function(e){if(e.server){try{e.server.close()}catch(e){}e.server=null}for(var r=Object.keys(e.peers),t=0;t<r.length;t++){var n=e.peers[r[t]];try{n.socket.close()}catch(e){}Se.websocket_sock_ops.removePeer(e,n)}return 0},bind:function(e,r,t){if(void 0!==e.saddr||void 0!==e.sport)throw new we.ErrnoError(_e.EINVAL);if(e.saddr=r,e.sport=t,2===e.type){e.server&&(e.server.close(),e.server=null);try{e.sock_ops.listen(e,0)}catch(e){if(!(e instanceof we.ErrnoError))throw e;if(e.errno!==_e.EOPNOTSUPP)throw e}}},connect:function(e,r,t){if(e.server)throw new we.ErrnoError(_e.EOPNOTSUPP);if(void 0!==e.daddr&&void 0!==e.dport){var n=Se.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(n)throw n.socket.readyState===n.socket.CONNECTING?new we.ErrnoError(_e.EALREADY):new we.ErrnoError(_e.EISCONN)}var o=Se.websocket_sock_ops.createPeer(e,r,t);throw e.daddr=o.addr,e.dport=o.port,new we.ErrnoError(_e.EINPROGRESS)},listen:function(e,r){if(!s)throw new we.ErrnoError(_e.EOPNOTSUPP)},accept:function(e){if(!e.server)throw new we.ErrnoError(_e.EINVAL);var r=e.pending.shift();return r.stream.flags=e.stream.flags,r},getname:function(e,r){var t,n;if(r){if(void 0===e.daddr||void 0===e.dport)throw new we.ErrnoError(_e.ENOTCONN);t=e.daddr,n=e.dport}else t=e.saddr||0,n=e.sport||0;return{addr:t,port:n}},sendmsg:function(e,r,t,n,o,a){if(2===e.type){if(void 0!==o&&void 0!==a||(o=e.daddr,a=e.dport),void 0===o||void 0===a)throw new we.ErrnoError(_e.EDESTADDRREQ)}else o=e.daddr,a=e.dport;var i,s=Se.websocket_sock_ops.getPeer(e,o,a);if(1===e.type){if(!s||s.socket.readyState===s.socket.CLOSING||s.socket.readyState===s.socket.CLOSED)throw new we.ErrnoError(_e.ENOTCONN);if(s.socket.readyState===s.socket.CONNECTING)throw new we.ErrnoError(_e.EAGAIN)}if(ArrayBuffer.isView(r)&&(t+=r.byteOffset,r=r.buffer),i=r.slice(t,t+n),2===e.type&&(!s||s.socket.readyState!==s.socket.OPEN))return s&&s.socket.readyState!==s.socket.CLOSING&&s.socket.readyState!==s.socket.CLOSED||(s=Se.websocket_sock_ops.createPeer(e,o,a)),s.dgram_send_queue.push(i),n;try{return s.socket.send(i),n}catch(e){throw new we.ErrnoError(_e.EINVAL)}},recvmsg:function(e,r){if(1===e.type&&e.server)throw new we.ErrnoError(_e.ENOTCONN);var t=e.recv_queue.shift();if(!t){if(1===e.type){var n=Se.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(n){if(n.socket.readyState===n.socket.CLOSING||n.socket.readyState===n.socket.CLOSED)return null;throw new we.ErrnoError(_e.EAGAIN)}throw new we.ErrnoError(_e.ENOTCONN)}throw new we.ErrnoError(_e.EAGAIN)}var o=t.data.byteLength||t.data.length,a=t.data.byteOffset||0,i=t.data.buffer||t.data,s=Math.min(r,o),u={buffer:new Uint8Array(i,a,s),addr:t.addr,port:t.port};if(1===e.type&&s<o){var c=o-s;t.data=new Uint8Array(i,a+s,c),e.recv_queue.unshift(t)}return u}}};function Le(e){for(var r=e.split("."),t=0;t<4;t++){var n=Number(r[t]);if(isNaN(n))return null;r[t]=n}return(r[0]|r[1]<<8|r[2]<<16|r[3]<<24)>>>0}function De(e){return parseInt(e)}function Ae(e){var r,t,n,o,a=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=0===e.indexOf("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((r=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[r.length-4]=De(r[r.length-4])+256*De(r[r.length-3]),r[r.length-3]=De(r[r.length-2])+256*De(r[r.length-1]),r=r.slice(0,r.length-2)):r=e.split(":"),n=0,o=0,t=0;t<r.length;t++)if("string"==typeof r[t])if("Z"===r[t]){for(o=0;o<8-r.length+1;o++)a[t+o]=0;n=o-1}else a[t+n]=ct(parseInt(r[t],16));else a[t+n]=r[t];return[a[1]<<16|a[0],a[3]<<16|a[2],a[5]<<16|a[4],a[7]<<16|a[6]]}var Pe,Fe={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var r,t=Le(e);if(null!==t)return e;if(null!==(t=Ae(e)))return e;if(Fe.address_map.addrs[e])r=Fe.address_map.addrs[e];else{var n=Fe.address_map.id++;D(n<65535,"exceeded max address mappings of 65535"),r="172.29."+(255&n)+"."+(65280&n),Fe.address_map.names[r]=e,Fe.address_map.addrs[e]=r}return r},lookup_addr:function(e){return Fe.address_map.names[e]?Fe.address_map.names[e]:null}};function Te(e){return(255&e)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function Re(e){var r="",t=0,n=0,o=0,a=0,i=0,s=0,u=[65535&e[0],e[0]>>16,65535&e[1],e[1]>>16,65535&e[2],e[2]>>16,65535&e[3],e[3]>>16],c=!0,f="";for(s=0;s<5;s++)if(0!==u[s]){c=!1;break}if(c){if(f=Te(u[6]|u[7]<<16),-1===u[5])return r="::ffff:",r+=f;if(0===u[5])return r="::","0.0.0.0"===f&&(f=""),"0.0.0.1"===f&&(f="1"),r+=f}for(t=0;t<8;t++)0===u[t]&&(t-o>1&&(i=0),o=t,i++),i>n&&(a=t-(n=i)+1);for(t=0;t<8;t++)n>1&&0===u[t]&&t>=a&&t<a+n?t===a&&(r+=":",0===a&&(r+=":")):(r+=Number(lt(65535&u[t])).toString(16),r+=t<7?":":"");return r}function Ce(e,r){var t,n=T[e>>1],o=lt(R[e+2>>1]);switch(n){case 2:if(16!==r)return{errno:28};t=Te(t=C[e+4>>2]);break;case 10:if(28!==r)return{errno:28};t=Re(t=[C[e+8>>2],C[e+12>>2],C[e+16>>2],C[e+20>>2]]);break;default:return{errno:5}}return{family:n,addr:t,port:o}}function Me(e,r,t,n,o){switch(r){case 2:t=Le(t),o&&(C[o>>2]=16),T[e>>1]=r,C[e+4>>2]=t,T[e+2>>1]=ct(n);break;case 10:t=Ae(t),o&&(C[o>>2]=28),C[e>>2]=r,C[e+8>>2]=t[0],C[e+12>>2]=t[1],C[e+16>>2]=t[2],C[e+20>>2]=t[3],T[e+2>>1]=ct(n),C[e+4>>2]=0,C[e+24>>2]=0;break;default:return 5}return 0}Pe=function(){return performance.now()};var Oe=!0;function Be(e,r){if(Ne.mainLoop.timingMode=e,Ne.mainLoop.timingValue=r,!Ne.mainLoop.func)return 1;if(0==e)Ne.mainLoop.scheduler=function(){var e=0|Math.max(0,Ne.mainLoop.tickStartTime+r-Pe());setTimeout(Ne.mainLoop.runner,e)},Ne.mainLoop.method="timeout";else if(1==e)Ne.mainLoop.scheduler=function(){Ne.requestAnimationFrame(Ne.mainLoop.runner)},Ne.mainLoop.method="rAF";else if(2==e){if("undefined"==typeof setImmediate){var t=[];addEventListener("message",function(e){"setimmediate"!==e.data&&"setimmediate"!==e.data.target||(e.stopPropagation(),t.shift()())},!0),setImmediate=function(e){t.push(e),d?(void 0===o.setImmediates&&(o.setImmediates=[]),o.setImmediates.push(e),postMessage({target:"setimmediate"})):postMessage("setimmediate","*")}}Ne.mainLoop.scheduler=function(){setImmediate(Ne.mainLoop.runner)},Ne.mainLoop.method="immediate"}return 0}function Ie(e,r,t,n,o){w=!0,D(!Ne.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Ne.mainLoop.func=e,Ne.mainLoop.arg=n;var a=Ne.mainLoop.currentlyRunningMainloop;if(Ne.mainLoop.runner=function(){if(!L)if(Ne.mainLoop.queue.length>0){var r=Date.now(),t=Ne.mainLoop.queue.shift();if(t.func(t.arg),Ne.mainLoop.remainingBlockers){var n=Ne.mainLoop.remainingBlockers,o=n%1==0?n-1:Math.floor(n);t.counted?Ne.mainLoop.remainingBlockers=o:(o+=.5,Ne.mainLoop.remainingBlockers=(8*n+o)/9)}if(console.log('main loop blocker "'+t.name+'" took '+(Date.now()-r)+" ms"),Ne.mainLoop.updateStatus(),a<Ne.mainLoop.currentlyRunningMainloop)return;setTimeout(Ne.mainLoop.runner,0)}else a<Ne.mainLoop.currentlyRunningMainloop||(Ne.mainLoop.currentFrameNumber=Ne.mainLoop.currentFrameNumber+1|0,1==Ne.mainLoop.timingMode&&Ne.mainLoop.timingValue>1&&Ne.mainLoop.currentFrameNumber%Ne.mainLoop.timingValue!=0?Ne.mainLoop.scheduler():(0==Ne.mainLoop.timingMode&&(Ne.mainLoop.tickStartTime=Pe()),Ne.mainLoop.runIter(e),a<Ne.mainLoop.currentlyRunningMainloop||("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Ne.mainLoop.scheduler())))},o||(r&&r>0?Be(0,1e3/r):Be(1,1),Ne.mainLoop.scheduler()),t)throw"unwind"}var Ne={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Ne.mainLoop.scheduler=null,Ne.mainLoop.currentlyRunningMainloop++},resume:function(){Ne.mainLoop.currentlyRunningMainloop++;var e=Ne.mainLoop.timingMode,r=Ne.mainLoop.timingValue,t=Ne.mainLoop.func;Ne.mainLoop.func=null,Ie(t,0,!1,Ne.mainLoop.arg,!0),Be(e,r),Ne.mainLoop.scheduler()},updateStatus:function(){if(o.setStatus){var e=o.statusMessage||"Please wait...",r=Ne.mainLoop.remainingBlockers,t=Ne.mainLoop.expectedBlockers;r?r<t?o.setStatus(e+" ("+(t-r)+"/"+t+")"):o.setStatus(e):o.setStatus("")}},runIter:function(e){if(!L){if(o.preMainLoop)if(!1===o.preMainLoop())return;try{e()}catch(e){if(e instanceof wt)return;if("unwind"==e)return;throw e&&"object"==typeof e&&e.stack&&b("exception thrown: "+[e,e.stack]),e}o.postMainLoop&&o.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(o.preloadPlugins||(o.preloadPlugins=[]),!Ne.initted){Ne.initted=!0;try{new Blob,Ne.hasBlobConstructor=!0}catch(e){Ne.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Ne.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Ne.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Ne.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,o.noImageDecoding||void 0!==Ne.URLObject||(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),o.noImageDecoding=!0);var e={canHandle:function(e){return!o.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(e)}};e.handle=function(e,r,t,n){var a=null;if(Ne.hasBlobConstructor)try{(a=new Blob([e],{type:Ne.getMimetype(r)})).size!==e.length&&(a=new Blob([new Uint8Array(e).buffer],{type:Ne.getMimetype(r)}))}catch(e){!function e(r){e.shown||(e.shown={}),e.shown[r]||(e.shown[r]=1,b(r))}("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!a){var i=new Ne.BlobBuilder;i.append(new Uint8Array(e).buffer),a=i.getBlob()}var s=Ne.URLObject.createObjectURL(a),u=new Image;u.onload=function(){D(u.complete,"Image "+r+" could not be decoded");var n=document.createElement("canvas");n.width=u.width,n.height=u.height,n.getContext("2d").drawImage(u,0,0),o.preloadedImages[r]=n,Ne.URLObject.revokeObjectURL(s),t&&t(e)},u.onerror=function(e){console.log("Image "+s+" could not be decoded"),n&&n()},u.src=s},o.preloadPlugins.push(e);var r={canHandle:function(e){return!o.noAudioDecoding&&e.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(e,r,t,n){var a=!1;function i(n){a||(a=!0,o.preloadedAudios[r]=n,t&&t(e))}function s(){a||(a=!0,o.preloadedAudios[r]=new Audio,n&&n())}if(!Ne.hasBlobConstructor)return s();try{var u=new Blob([e],{type:Ne.getMimetype(r)})}catch(e){return s()}var c=Ne.URLObject.createObjectURL(u),f=new Audio;f.addEventListener("canplaythrough",function(){i(f)},!1),f.onerror=function(t){a||(console.log("warning: browser could not fully decode audio "+r+", trying slower base64 approach"),f.src="data:audio/x-"+r.substr(-3)+";base64,"+function(e){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="",n=0,o=0,a=0;a<e.length;a++)for(n=n<<8|e[a],o+=8;o>=6;){var i=n>>o-6&63;o-=6,t+=r[i]}return 2==o?(t+=r[(3&n)<<4],t+="=="):4==o&&(t+=r[(15&n)<<2],t+="="),t}(e),i(f))},f.src=c,Ne.safeSetTimeout(function(){i(f)},1e4)}};o.preloadPlugins.push(r);var t=o.canvas;t&&(t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock||t.msRequestPointerLock||function(){},t.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},t.exitPointerLock=t.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",n,!1),document.addEventListener("mozpointerlockchange",n,!1),document.addEventListener("webkitpointerlockchange",n,!1),document.addEventListener("mspointerlockchange",n,!1),o.elementPointerLock&&t.addEventListener("click",function(e){!Ne.pointerLock&&o.canvas.requestPointerLock&&(o.canvas.requestPointerLock(),e.preventDefault())},!1))}function n(){Ne.pointerLock=document.pointerLockElement===o.canvas||document.mozPointerLockElement===o.canvas||document.webkitPointerLockElement===o.canvas||document.msPointerLockElement===o.canvas}},createContext:function(e,r,t,n){if(r&&o.ctx&&e==o.canvas)return o.ctx;var a,i;if(r){var s={antialias:!1,alpha:!1,majorVersion:"undefined"!=typeof WebGL2RenderingContext?2:1};if(n)for(var u in n)s[u]=n[u];void 0!==tr&&(i=tr.createContext(e,s))&&(a=tr.getContext(i).GLctx)}else a=e.getContext("2d");return a?(t&&(r||D(void 0===Zr,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),o.ctx=a,r&&tr.makeContextCurrent(i),o.useWebGL=r,Ne.moduleContextCreatedCallbacks.forEach(function(e){e()}),Ne.init()),a):null},destroyContext:function(e,r,t){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,r){Ne.lockPointer=e,Ne.resizeCanvas=r,void 0===Ne.lockPointer&&(Ne.lockPointer=!0),void 0===Ne.resizeCanvas&&(Ne.resizeCanvas=!1);var t=o.canvas;function n(){Ne.isFullscreen=!1;var e=t.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e?(t.exitFullscreen=Ne.exitFullscreen,Ne.lockPointer&&t.requestPointerLock(),Ne.isFullscreen=!0,Ne.resizeCanvas?Ne.setFullscreenCanvasSize():Ne.updateCanvasDimensions(t)):(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e),Ne.resizeCanvas?Ne.setWindowedCanvasSize():Ne.updateCanvasDimensions(t)),o.onFullScreen&&o.onFullScreen(Ne.isFullscreen),o.onFullscreen&&o.onFullscreen(Ne.isFullscreen)}Ne.fullscreenHandlersInstalled||(Ne.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1));var a=document.createElement("div");t.parentNode.insertBefore(a,t),a.appendChild(t),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?function(){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(a.webkitRequestFullScreen?function(){a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),a.requestFullscreen()},exitFullscreen:function(){return!!Ne.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(e){var r=Date.now();if(0===Ne.nextRAF)Ne.nextRAF=r+1e3/60;else for(;r+2>=Ne.nextRAF;)Ne.nextRAF+=1e3/60;var t=Math.max(Ne.nextRAF-r,0);setTimeout(e,t)},requestAnimationFrame:function(e){"function"!=typeof requestAnimationFrame?(0,Ne.fakeRequestAnimationFrame)(e):requestAnimationFrame(e)},safeCallback:function(e){return function(){if(!L)return e.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){Ne.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(Ne.allowAsyncCallbacks=!0,Ne.queuedAsyncCallbacks.length>0){var e=Ne.queuedAsyncCallbacks;Ne.queuedAsyncCallbacks=[],e.forEach(function(e){e()})}},safeRequestAnimationFrame:function(e){return Ne.requestAnimationFrame(function(){L||(Ne.allowAsyncCallbacks?e():Ne.queuedAsyncCallbacks.push(e))})},safeSetTimeout:function(e,r){return w=!0,setTimeout(function(){L||(Ne.allowAsyncCallbacks?e():Ne.queuedAsyncCallbacks.push(e))},r)},safeSetInterval:function(e,r){return w=!0,setInterval(function(){L||Ne.allowAsyncCallbacks&&e()},r)},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var r=0;switch(e.type){case"DOMMouseScroll":r=e.detail/3;break;case"mousewheel":r=e.wheelDelta/120;break;case"wheel":switch(r=e.deltaY,e.deltaMode){case 0:r/=100;break;case 1:r/=3;break;case 2:r*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return r},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(Ne.pointerLock)"mousemove"!=e.type&&"mozMovementX"in e?Ne.mouseMovementX=Ne.mouseMovementY=0:(Ne.mouseMovementX=Ne.getMovementX(e),Ne.mouseMovementY=Ne.getMovementY(e)),"undefined"!=typeof SDL?(Ne.mouseX=SDL.mouseX+Ne.mouseMovementX,Ne.mouseY=SDL.mouseY+Ne.mouseMovementY):(Ne.mouseX+=Ne.mouseMovementX,Ne.mouseY+=Ne.mouseMovementY);else{var r=o.canvas.getBoundingClientRect(),t=o.canvas.width,n=o.canvas.height,a=void 0!==window.scrollX?window.scrollX:window.pageXOffset,i=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if("touchstart"===e.type||"touchend"===e.type||"touchmove"===e.type){var s=e.touch;if(void 0===s)return;var u=s.pageX-(a+r.left),c=s.pageY-(i+r.top),f={x:u*=t/r.width,y:c*=n/r.height};if("touchstart"===e.type)Ne.lastTouches[s.identifier]=f,Ne.touches[s.identifier]=f;else if("touchend"===e.type||"touchmove"===e.type){var l=Ne.touches[s.identifier];l||(l=f),Ne.lastTouches[s.identifier]=l,Ne.touches[s.identifier]=f}return}var d=e.pageX-(a+r.left),m=e.pageY-(i+r.top);d*=t/r.width,m*=n/r.height,Ne.mouseMovementX=d-Ne.mouseX,Ne.mouseMovementY=m-Ne.mouseY,Ne.mouseX=d,Ne.mouseY=m}},asyncLoad:function(e,r,t,n){var o=n?"":te("al "+e);p(e,function(t){D(t,'Loading data file "'+e+'" failed (no arrayBuffer).'),r(new Uint8Array(t)),o&&oe()},function(r){if(!t)throw'Loading data file "'+e+'" failed.';t()}),o&&ne()},resizeListeners:[],updateResizeListeners:function(){var e=o.canvas;Ne.resizeListeners.forEach(function(r){r(e.width,e.height)})},setCanvasSize:function(e,r,t){var n=o.canvas;Ne.updateCanvasDimensions(n,e,r),t||Ne.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var e=M[SDL.screen>>2];e|=8388608,C[SDL.screen>>2]=e}Ne.updateCanvasDimensions(o.canvas),Ne.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var e=M[SDL.screen>>2];e&=-8388609,C[SDL.screen>>2]=e}Ne.updateCanvasDimensions(o.canvas),Ne.updateResizeListeners()},updateCanvasDimensions:function(e,r,t){r&&t?(e.widthNative=r,e.heightNative=t):(r=e.widthNative,t=e.heightNative);var n=r,a=t;if(o.forcedAspectRatio&&o.forcedAspectRatio>0&&(n/a<o.forcedAspectRatio?n=Math.round(a*o.forcedAspectRatio):a=Math.round(n/o.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&"undefined"!=typeof screen){var i=Math.min(screen.width/n,screen.height/a);n=Math.round(n*i),a=Math.round(a*i)}Ne.resizeCanvas?(e.width!=n&&(e.width=n),e.height!=a&&(e.height=a),void 0!==e.style&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=r&&(e.width=r),e.height!=t&&(e.height=t),void 0!==e.style&&(n!=r||a!=t?(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",a+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var e=Ne.nextWgetRequestHandle;return Ne.nextWgetRequestHandle++,e}};var Ue={inEventHandler:0,removeAllEventListeners:function(){for(var e=Ue.eventHandlers.length-1;e>=0;--e)Ue._removeHandler(e);Ue.eventHandlers=[],Ue.deferredCalls=[]},registerRemoveEventListeners:function(){Ue.removeEventListenersRegistered||($.push(Ue.removeAllEventListeners),Ue.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,r,t){function n(e,r){if(e.length!=r.length)return!1;for(var t in e)if(e[t]!=r[t])return!1;return!0}for(var o in Ue.deferredCalls){var a=Ue.deferredCalls[o];if(a.targetFunction==e&&n(a.argsList,t))return}Ue.deferredCalls.push({targetFunction:e,precedence:r,argsList:t}),Ue.deferredCalls.sort(function(e,r){return e.precedence<r.precedence})},removeDeferredCalls:function(e){for(var r=0;r<Ue.deferredCalls.length;++r)Ue.deferredCalls[r].targetFunction==e&&(Ue.deferredCalls.splice(r,1),--r)},canPerformEventHandlerRequests:function(){return Ue.inEventHandler&&Ue.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ue.canPerformEventHandlerRequests())for(var e=0;e<Ue.deferredCalls.length;++e){var r=Ue.deferredCalls[e];Ue.deferredCalls.splice(e,1),--e,r.targetFunction.apply(null,r.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,r){for(var t=0;t<Ue.eventHandlers.length;++t)Ue.eventHandlers[t].target!=e||r&&r!=Ue.eventHandlers[t].eventTypeString||Ue._removeHandler(t--)},_removeHandler:function(e){var r=Ue.eventHandlers[e];r.target.removeEventListener(r.eventTypeString,r.eventListenerFunc,r.useCapture),Ue.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var r=function(r){++Ue.inEventHandler,Ue.currentEventHandler=e,Ue.runDeferredCalls(),e.handlerFunc(r),Ue.runDeferredCalls(),--Ue.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=r,e.target.addEventListener(e.eventTypeString,r,e.useCapture),Ue.eventHandlers.push(e),Ue.registerRemoveEventListeners();else for(var t=0;t<Ue.eventHandlers.length;++t)Ue.eventHandlers[t].target==e.target&&Ue.eventHandlers[t].eventTypeString==e.eventTypeString&&Ue._removeHandler(t--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function je(e,r,t){e.style.paddingLeft=e.style.paddingRight=t+"px",e.style.paddingTop=e.style.paddingBottom=r+"px"}var qe=null;var ze=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function He(e){var r;return e=(r=e)>2?U(r):r,ze[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function Ge(e){return He(e)}function Ve(e,r,t){var n=Ge(e);if(!n)return-4;C[r>>2]=n.width,C[t>>2]=n.height}function Xe(e){var r=ht(),t=Et(8),n=t+4,o=Et(e.id.length+1);q(e.id,o,e.id.length+1);Ve(o,t,n);var a=[C[t>>2],C[n>>2]];return bt(r),a}function We(e,r,t){var n=Ge(e);return n?(n.width=r,n.height=t,n.GLctxObject&&tr.resizeOffscreenFramebuffer(n.GLctxObject),0):-4}function Ye(e,r,t){if(e.controlTransferredOffscreen){var n=ht(),o=Et(e.id.length+1);q(e.id,o,e.id.length+1),We(o,r,t),bt(n)}else e.width=r,e.height=t}var Qe={};function Ke(){var e,r=devicePixelRatio,t=2==Qe.canvasResolutionScaleMode,n=2==Qe.scaleMode,o=0!=Qe.canvasResolutionScaleMode,a=3==Qe.scaleMode,i=t?Math.round(innerWidth*r):innerWidth,s=t?Math.round(innerHeight*r):innerHeight,u=i,c=s,f=Qe.target,l=Xe(f),d=l[0],m=l[1];(n&&(u*m<d*c?c=u*m/d|0:u*m>d*c&&(u=c*d/m|0),e=(s-c)/2|0),o&&(Ye(f,u,c),f.GLctxObject&&f.GLctxObject.GLctx.viewport(0,0,u,c)),t&&(e/=r,u/=r,c/=r,u=Math.round(1e4*u)/1e4,c=Math.round(1e4*c)/1e4,e=Math.round(1e4*e)/1e4),a)?je(f,(innerHeight-De(f.style.height))/2,(innerWidth-De(f.style.width))/2):(f.style.width=u+"px",f.style.height=c+"px",je(f,e,(innerWidth-u)/2));!a&&Qe.canvasResizedCallback&&W.get(Qe.canvasResizedCallback)(37,0,Qe.canvasResizedCallbackUserData)}function $e(e){return ze.indexOf(e)<0?e.getBoundingClientRect():{left:0,top:0}}function Ze(e,r){var t=function(e){var r=Xe(e),t=r[0],n=r[1],o=e.style.width,a=e.style.height,i=e.style.backgroundColor,s=document.body.style.backgroundColor,u=e.style.paddingLeft,c=e.style.paddingRight,f=e.style.paddingTop,l=e.style.paddingBottom,d=e.style.marginLeft,m=e.style.marginRight,p=e.style.marginTop,g=e.style.marginBottom,v=document.body.style.margin,h=document.documentElement.style.overflow,b=document.body.scroll,E=e.style.imageRendering;function y(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(document.removeEventListener("fullscreenchange",y),document.removeEventListener("webkitfullscreenchange",y),Ye(e,t,n),e.style.width=o,e.style.height=a,e.style.backgroundColor=i,s||(document.body.style.backgroundColor="white"),document.body.style.backgroundColor=s,e.style.paddingLeft=u,e.style.paddingRight=c,e.style.paddingTop=f,e.style.paddingBottom=l,e.style.marginLeft=d,e.style.marginRight=m,e.style.marginTop=p,e.style.marginBottom=g,document.body.style.margin=v,document.documentElement.style.overflow=h,document.body.scroll=b,e.style.imageRendering=E,e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,t,n),Qe.canvasResizedCallback&&W.get(Qe.canvasResizedCallback)(37,0,Qe.canvasResizedCallbackUserData))}return document.addEventListener("fullscreenchange",y),document.addEventListener("webkitfullscreenchange",y),y}(e),n=r.softFullscreen?innerWidth:screen.width,o=r.softFullscreen?innerHeight:screen.height,a=$e(e),i=a.width,s=a.height,u=Xe(e),c=u[0],f=u[1];if(3==r.scaleMode)je(e,(o-s)/2,(n-i)/2),n=i,o=s;else if(2==r.scaleMode)if(n*f<c*o){var l=f*n/c;je(e,(o-l)/2,0),o=l}else{var d=c*o/f;je(e,0,(n-d)/2),n=d}e.style.backgroundColor||(e.style.backgroundColor="black"),document.body.style.backgroundColor||(document.body.style.backgroundColor="black"),e.style.width=n+"px",e.style.height=o+"px",1==r.filteringMode&&(e.style.imageRendering="optimizeSpeed",e.style.imageRendering="-moz-crisp-edges",e.style.imageRendering="-o-crisp-edges",e.style.imageRendering="-webkit-optimize-contrast",e.style.imageRendering="optimize-contrast",e.style.imageRendering="crisp-edges",e.style.imageRendering="pixelated");var m=2==r.canvasResolutionScaleMode?devicePixelRatio:1;if(0!=r.canvasResolutionScaleMode){var p=n*m|0,g=o*m|0;Ye(e,p,g),e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,p,g)}return t}function Je(e,r){if(0==r.scaleMode&&0==r.canvasResolutionScaleMode||Ze(e,r),e.requestFullscreen)e.requestFullscreen();else{if(!e.webkitRequestFullscreen)return Ue.fullscreenEnabled()?-3:-1;e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}return Qe=r,r.canvasResizedCallback&&W.get(r.canvasResizedCallback)(37,0,r.canvasResizedCallbackUserData),0}function er(e){if(e.requestPointerLock)e.requestPointerLock();else{if(!e.msRequestPointerLock)return document.body.requestPointerLock||document.body.msRequestPointerLock?-3:-1;e.msRequestPointerLock()}return 0}function rr(e){var r=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,t=!!r;C[e>>2]=t,C[e+4>>2]=Ue.fullscreenEnabled();var n=t?r:Ue.previousFullscreenElement,o=Ue.getNodeNameForTarget(n),a=n&&n.id?n.id:"";q(o,e+8,128),q(a,e+136,128),C[e+264>>2]=n?n.clientWidth:0,C[e+268>>2]=n?n.clientHeight:0,C[e+272>>2]=screen.width,C[e+276>>2]=screen.height,t&&(Ue.previousFullscreenElement=r)}var tr={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],programInfos:{},stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){tr.lastError||(tr.lastError=e)},getNewId:function(e){for(var r=tr.counter++,t=e.length;t<r;t++)e[t]=null;return r},getSource:function(e,r,t,n){for(var o="",a=0;a<r;++a){var i=n?C[n+4*a>>2]:-1;o+=U(C[t+4*a>>2],i<0?void 0:i)}return o},createContext:function(e,r){r.renderViaOffscreenBackBuffer&&(r.preserveDrawingBuffer=!0);var t=r.majorVersion>1?e.getContext("webgl2",r):e.getContext("webgl",r);return t?tr.registerContext(t,r):0},enableOffscreenFramebufferAttributes:function(e){e.renderViaOffscreenBackBuffer=!0,e.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(e){var r=e.GLctx,t=r.createFramebuffer();if(r.bindFramebuffer(36160,t),e.defaultFbo=t,e.defaultFboForbidBlitFramebuffer=!1,r.getContextAttributes().antialias)e.defaultFboForbidBlitFramebuffer=!0;else{var n=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/);if(null!=n){var o=n[1];e.defaultFboForbidBlitFramebuffer=o<67}}e.defaultColorTarget=r.createTexture(),e.defaultDepthTarget=r.createRenderbuffer(),tr.resizeOffscreenFramebuffer(e),r.bindTexture(3553,e.defaultColorTarget),r.texParameteri(3553,10241,9728),r.texParameteri(3553,10240,9728),r.texParameteri(3553,10242,33071),r.texParameteri(3553,10243,33071),r.texImage2D(3553,0,6408,r.canvas.width,r.canvas.height,0,6408,5121,null),r.framebufferTexture2D(36160,36064,3553,e.defaultColorTarget,0),r.bindTexture(3553,null);r.createRenderbuffer();r.bindRenderbuffer(36161,e.defaultDepthTarget),r.renderbufferStorage(36161,33189,r.canvas.width,r.canvas.height),r.framebufferRenderbuffer(36160,36096,36161,e.defaultDepthTarget),r.bindRenderbuffer(36161,null);var a=r.createBuffer();r.bindBuffer(34962,a),r.bufferData(34962,new Float32Array([-1,-1,-1,1,1,-1,1,1]),35044),r.bindBuffer(34962,null),e.blitVB=a;var i=r.createShader(35633);r.shaderSource(i,"attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }"),r.compileShader(i);var s=r.createShader(35632);r.shaderSource(s,"varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }"),r.compileShader(s);var u=r.createProgram();r.attachShader(u,i),r.attachShader(u,s),r.linkProgram(u),e.blitProgram=u,e.blitPosLoc=r.getAttribLocation(u,"pos"),r.useProgram(u),r.uniform1i(r.getUniformLocation(u,"sampler"),0),r.useProgram(null),e.defaultVao=void 0,r.createVertexArray&&(e.defaultVao=r.createVertexArray(),r.bindVertexArray(e.defaultVao),r.enableVertexAttribArray(e.blitPosLoc),r.bindVertexArray(null))},resizeOffscreenFramebuffer:function(e){var r=e.GLctx;if(e.defaultColorTarget){var t=r.getParameter(32873);r.bindTexture(3553,e.defaultColorTarget),r.texImage2D(3553,0,6408,r.drawingBufferWidth,r.drawingBufferHeight,0,6408,5121,null),r.bindTexture(3553,t)}if(e.defaultDepthTarget){var n=r.getParameter(36007);r.bindRenderbuffer(36161,e.defaultDepthTarget),r.renderbufferStorage(36161,33189,r.drawingBufferWidth,r.drawingBufferHeight),r.bindRenderbuffer(36161,n)}},blitOffscreenFramebuffer:function(e){var r=e.GLctx,t=r.getParameter(3089);t&&r.disable(3089);var n=r.getParameter(36006);if(r.blitFramebuffer&&!e.defaultFboForbidBlitFramebuffer)r.bindFramebuffer(36008,e.defaultFbo),r.bindFramebuffer(36009,null),r.blitFramebuffer(0,0,r.canvas.width,r.canvas.height,0,0,r.canvas.width,r.canvas.height,16384,9728);else{r.bindFramebuffer(36160,null);var o=r.getParameter(35725);r.useProgram(e.blitProgram);var a=r.getParameter(34964);r.bindBuffer(34962,e.blitVB);var i=r.getParameter(34016);r.activeTexture(33984);var s=r.getParameter(32873);r.bindTexture(3553,e.defaultColorTarget);var u=r.getParameter(3042);u&&r.disable(3042);var c=r.getParameter(2884);c&&r.disable(2884);var f=r.getParameter(2929);f&&r.disable(2929);var l=r.getParameter(2960);function d(){r.vertexAttribPointer(e.blitPosLoc,2,5126,!1,0,0),r.drawArrays(5,0,4)}if(l&&r.disable(2960),e.defaultVao){var m=r.getParameter(34229);r.bindVertexArray(e.defaultVao),d(),r.bindVertexArray(m)}else{for(var p={buffer:r.getVertexAttrib(e.blitPosLoc,34975),size:r.getVertexAttrib(e.blitPosLoc,34339),stride:r.getVertexAttrib(e.blitPosLoc,34340),type:r.getVertexAttrib(e.blitPosLoc,34341),normalized:r.getVertexAttrib(e.blitPosLoc,34922),pointer:r.getVertexAttribOffset(e.blitPosLoc,34373)},g=r.getParameter(34921),v=[],h=0;h<g;++h){var b=r.getVertexAttrib(h,34338),E=h==e.blitPosLoc;b&&!E&&r.disableVertexAttribArray(h),!b&&E&&r.enableVertexAttribArray(h),v[h]=b}d();for(h=0;h<g;++h){b=v[h];var y=h==e.blitPosLoc;b&&!y&&r.enableVertexAttribArray(h),!b&&y&&r.disableVertexAttribArray(h)}r.bindBuffer(34962,p.buffer),r.vertexAttribPointer(e.blitPosLoc,p.size,p.type,p.normalized,p.stride,p.offset)}l&&r.enable(2960),f&&r.enable(2929),c&&r.enable(2884),u&&r.enable(3042),r.bindTexture(3553,s),r.activeTexture(i),r.bindBuffer(34962,a),r.useProgram(o)}r.bindFramebuffer(36160,n),t&&r.enable(3089)},registerContext:function(e,r){var t=tr.getNewId(tr.contexts),n={handle:t,attributes:r,version:r.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),tr.contexts[t]=n,(void 0===r.enableExtensionsByDefault||r.enableExtensionsByDefault)&&tr.initExtensions(n),r.renderViaOffscreenBackBuffer&&tr.createOffscreenFramebuffer(n),t},makeContextCurrent:function(e){return tr.currentContext=tr.contexts[e],o.ctx=Zr=tr.currentContext&&tr.currentContext.GLctx,!(e&&!Zr)},getContext:function(e){return tr.contexts[e]},deleteContext:function(e){tr.currentContext===tr.contexts[e]&&(tr.currentContext=null),"object"==typeof Ue&&Ue.removeAllHandlersOnTarget(tr.contexts[e].GLctx.canvas),tr.contexts[e]&&tr.contexts[e].GLctx.canvas&&(tr.contexts[e].GLctx.canvas.GLctxObject=void 0),tr.contexts[e]=null},initExtensions:function(e){if(e||(e=tr.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var r,t=e.GLctx;!function(e){var r=e.getExtension("ANGLE_instanced_arrays");if(r)e.vertexAttribDivisor=function(e,t){r.vertexAttribDivisorANGLE(e,t)},e.drawArraysInstanced=function(e,t,n,o){r.drawArraysInstancedANGLE(e,t,n,o)},e.drawElementsInstanced=function(e,t,n,o,a){r.drawElementsInstancedANGLE(e,t,n,o,a)}}(t),function(e){var r=e.getExtension("OES_vertex_array_object");if(r)e.createVertexArray=function(){return r.createVertexArrayOES()},e.deleteVertexArray=function(e){r.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){r.bindVertexArrayOES(e)},e.isVertexArray=function(e){return r.isVertexArrayOES(e)}}(t),function(e){var r=e.getExtension("WEBGL_draw_buffers");if(r)e.drawBuffers=function(e,t){r.drawBuffersWEBGL(e,t)}}(t),(r=t).dibvbi=r.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"),function(e){e.mdibvbi=e.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance")}(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach(function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)})}},populateUniformTable:function(e){for(var r=tr.programs[e],t=tr.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},n=t.uniforms,o=Zr.getProgramParameter(r,35718),a=0;a<o;++a){var i=Zr.getActiveUniform(r,a),s=i.name;t.maxUniformLength=Math.max(t.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var u=Zr.getUniformLocation(r,s);if(u){var c=tr.getNewId(tr.uniforms);n[s]=[i.size,c],tr.uniforms[c]=u;for(var f=1;f<i.size;++f){var l=s+"["+f+"]";u=Zr.getUniformLocation(r,l),c=tr.getNewId(tr.uniforms),tr.uniforms[c]=u}}}}};function nr(e,r){return(e>>>0)+4294967296*r}var or=[];function ar(e,r,t,n){Zr.drawElements(e,r,t,n)}function ir(e,r,t,n){for(var o=0;o<e;o++){var a=Zr[t](),i=a&&tr.getNewId(n);a?(a.name=i,n[i]=a):tr.recordError(1282),C[r+4*o>>2]=i}}function sr(e,r,t,n,o,a,i,s){r=tr.programs[r];var u=Zr[e](r,t);if(u){var c=s&&q(u.name,s,n);o&&(C[o>>2]=c),a&&(C[a>>2]=u.size),i&&(C[i>>2]=u.type)}}function ur(e,r){M[e>>2]=r,M[e+4>>2]=(r-M[e>>2])/4294967296}function cr(e,r,t){if(r){var n=void 0;switch(e){case 36346:n=1;break;case 36344:return void(0!=t&&1!=t&&tr.recordError(1280));case 34814:case 36345:n=0;break;case 34466:var o=Zr.getParameter(34467);n=o?o.length:0;break;case 33309:if(tr.currentContext.version<2)return void tr.recordError(1282);n=2*(Zr.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(tr.currentContext.version<2)return void tr.recordError(1280);n=33307==e?3:0}if(void 0===n){var a=Zr.getParameter(e);switch(typeof a){case"number":n=a;break;case"boolean":n=a?1:0;break;case"string":return void tr.recordError(1280);case"object":if(null===a)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:n=0;break;default:return void tr.recordError(1280)}else{if(a instanceof Float32Array||a instanceof Uint32Array||a instanceof Int32Array||a instanceof Array){for(var i=0;i<a.length;++i)switch(t){case 0:C[r+4*i>>2]=a[i];break;case 2:O[r+4*i>>2]=a[i];break;case 4:P[r+i>>0]=a[i]?1:0}return}try{n=0|a.name}catch(r){return tr.recordError(1280),void b("GL_INVALID_ENUM in glGet"+t+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+r+")")}}break;default:return tr.recordError(1280),void b("GL_INVALID_ENUM in glGet"+t+"v: Native code calling glGet"+t+"v("+e+") and it returns "+a+" of type "+typeof a+"!")}}switch(t){case 1:ur(r,n);break;case 0:C[r>>2]=n;break;case 2:O[r>>2]=n;break;case 4:P[r>>0]=n?1:0}}else tr.recordError(1281)}function fr(e,r,t,n){if(t){var o,a=Zr.getIndexedParameter(e,r);switch(typeof a){case"boolean":o=a?1:0;break;case"number":o=a;break;case"object":if(null===a)switch(e){case 35983:case 35368:o=0;break;default:return void tr.recordError(1280)}else{if(!(a instanceof WebGLBuffer))return void tr.recordError(1280);o=0|a.name}break;default:return void tr.recordError(1280)}switch(n){case 1:ur(t,o);break;case 0:C[t>>2]=o;break;case 2:O[t>>2]=o;break;case 4:P[t>>0]=o?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+n}}else tr.recordError(1281)}function lr(e){var r=z(e)+1,t=ut(r);return q(e,t,r),t}function dr(e,r,t,n){if(t){var o=Zr.getUniform(tr.programs[e],tr.uniforms[r]);if("number"==typeof o||"boolean"==typeof o)switch(n){case 0:C[t>>2]=o;break;case 2:O[t>>2]=o}else for(var a=0;a<o.length;a++)switch(n){case 0:C[t+4*a>>2]=o[a];break;case 2:O[t+4*a>>2]=o[a]}}else tr.recordError(1281)}function mr(e,r,t,n){if(t){var o=Zr.getVertexAttrib(e,r);if(34975==r)C[t>>2]=o&&o.name;else if("number"==typeof o||"boolean"==typeof o)switch(n){case 0:C[t>>2]=o;break;case 2:O[t>>2]=o;break;case 5:C[t>>2]=Math.fround(o)}else for(var a=0;a<o.length;a++)switch(n){case 0:C[t+4*a>>2]=o[a];break;case 2:O[t+4*a>>2]=o[a];break;case 5:C[t+4*a>>2]=Math.fround(o[a])}}else tr.recordError(1281)}function pr(e){return 0==(e-=5120)?P:1==e?F:2==e?T:4==e?C:6==e?O:5==e||28922==e||28520==e||30779==e||30782==e?M:R}function gr(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function vr(e,r,t,n,o,a){var i=pr(e),s=gr(i),u=1<<s,c=function(e,r,t,n){var o;return r*(e*t+(o=n)-1&-o)}(t,n,function(e){return{5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[e-6402]||1}(r)*u,tr.unpackAlignment);return i.subarray(o>>s,o+c>>s)}var hr=[];var br=[];function Er(e){try{return x.grow(e-A.byteLength+65535>>>16),X(x.buffer),1}catch(e){}}function yr(e,r,t,n,o,a,i){Ue.fullscreenChangeEvent||(Ue.fullscreenChangeEvent=ut(280));var s={target:e,eventTypeString:a,callbackfunc:n,handlerFunc:function(e){var t=e||event,a=Ue.fullscreenChangeEvent;rr(a),W.get(n)(o,a,r)&&t.preventDefault()},useCapture:t};Ue.registerOrRemoveHandler(s)}function wr(e,r,t,n,o,a,i){Ue.keyEvent||(Ue.keyEvent=ut(164));var s={target:He(e),allowsDeferredCalls:!0,eventTypeString:a,callbackfunc:n,handlerFunc:function(e){var t=Ue.keyEvent,a=t>>2;C[a+0]=e.location,C[a+1]=e.ctrlKey,C[a+2]=e.shiftKey,C[a+3]=e.altKey,C[a+4]=e.metaKey,C[a+5]=e.repeat,C[a+6]=e.charCode,C[a+7]=e.keyCode,C[a+8]=e.which,q(e.key||"",t+36,32),q(e.code||"",t+68,32),q(e.char||"",t+100,32),q(e.locale||"",t+132,32),W.get(n)(o,t,r)&&e.preventDefault()},useCapture:t};Ue.registerOrRemoveHandler(s)}function xr(e,r,t){var n=e>>2;C[n+0]=r.screenX,C[n+1]=r.screenY,C[n+2]=r.clientX,C[n+3]=r.clientY,C[n+4]=r.ctrlKey,C[n+5]=r.shiftKey,C[n+6]=r.altKey,C[n+7]=r.metaKey,T[2*n+16]=r.button,T[2*n+17]=r.buttons,C[n+9]=r.movementX,C[n+10]=r.movementY;var o=$e(t);C[n+11]=r.clientX-o.left,C[n+12]=r.clientY-o.top}function kr(e,r,t,n,o,a,i){Ue.mouseEvent||(Ue.mouseEvent=ut(64));var s={target:e=He(e),allowsDeferredCalls:"mousemove"!=a&&"mouseenter"!=a&&"mouseleave"!=a,eventTypeString:a,callbackfunc:n,handlerFunc:function(t){var a=t||event;xr(Ue.mouseEvent,a,e),W.get(n)(o,Ue.mouseEvent,r)&&a.preventDefault()},useCapture:t};Ue.registerOrRemoveHandler(s)}function _r(e,r,t,n,o,a,i){Ue.touchEvent||(Ue.touchEvent=ut(1684));var s={target:e=He(e),allowsDeferredCalls:"touchstart"==a||"touchend"==a,eventTypeString:a,callbackfunc:n,handlerFunc:function(t){for(var a={},i=t.touches,s=0;s<i.length;++s)a[(u=i[s]).identifier]=u;i=t.changedTouches;for(s=0;s<i.length;++s){var u;(u=i[s]).isChanged=1,a[u.identifier]=u}i=t.targetTouches;for(s=0;s<i.length;++s)a[i[s].identifier].onTarget=1;var c=Ue.touchEvent,f=c>>2;C[f+1]=t.ctrlKey,C[f+2]=t.shiftKey,C[f+3]=t.altKey,C[f+4]=t.metaKey,f+=5;var l=$e(e),d=0;for(var s in a){var m=a[s];if(C[f+0]=m.identifier,C[f+1]=m.screenX,C[f+2]=m.screenY,C[f+3]=m.clientX,C[f+4]=m.clientY,C[f+5]=m.pageX,C[f+6]=m.pageY,C[f+7]=m.isChanged,C[f+8]=m.onTarget,C[f+9]=m.clientX-l.left,C[f+10]=m.clientY-l.top,f+=13,++d>31)break}C[c>>2]=d,W.get(n)(o,c,r)&&t.preventDefault()},useCapture:t};Ue.registerOrRemoveHandler(s)}var Sr=["default","low-power","high-performance"];function Lr(){return tr.currentContext?tr.currentContext.handle:0}function Dr(e){return tr.makeContextCurrent(e)?0:-5}o._emscripten_webgl_get_current_context=Lr,o._emscripten_webgl_make_context_current=Dr;var Ar={};function Pr(){if(!Pr.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(var r in Ar)e[r]=Ar[r];var t=[];for(var r in e)t.push(r+"="+e[r]);Pr.strings=t}return Pr.strings}var Fr={};var Tr={get_func:function(e){return W.get(e)},error:function(){b.apply(null,Array.from(arguments))},print:function(){h.apply(null,Array.from(arguments))},malloc:function(e){return ut(e)},free:function(e){st(e)},getHeapValue:function(e,r){return function(e,r,t){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":return P[e>>0];case"i16":return T[e>>1];case"i32":case"i64":return C[e>>2];case"float":return O[e>>2];case"double":return B[e>>3];default:ae("invalid type for getValue: "+r)}return null}(e,r)},setHeapValue:function(e,r,t){!function(e,r,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":P[e>>0]=r;break;case"i16":T[e>>1]=r;break;case"i32":C[e>>2]=r;break;case"i64":fe=[r>>>0,(ce=r,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)],C[e>>2]=fe[0],C[e+4>>2]=fe[1];break;case"float":O[e>>2]=r;break;case"double":B[e>>3]=r;break;default:ae("invalid type for setValue: "+t)}}(e,r,t)},heapSub:function(e,r,t){const n=e.BYTES_PER_ELEMENT;return e.subarray(r/n,r/n+t)},heapCopy:function(e,r,t){const n=e.BYTES_PER_ELEMENT;return e.slice(r/n,r/n+t)},parseString:function(e){return U(e)},strlen:function(e){return z(e)},allocString:function(e){const r=Tr.strlen(e)+1,t=Tr.malloc(r);return q(e,t,r),t},allocStringArray:function(e){const r=e.length,t=Tr.malloc(4*r);for(let n=0;n<r;n++)C[(t>>2)+n]=Tr.allocString(e[n]);return t},freeStringArray:function(e,r){for(let t=0;t<r;t++)Tr.free(C[(e>>2)+t]);Tr.free(e)},stringToHeap:function(e,r,t){return j(e,P,r,t)}},Rr={_idbfs:!1,_syncing:!1,_mount_points:[],is_persistent:function(){return Rr._idbfs?1:0},init:function(e){if(Rr._idbfs=!1,!Array.isArray(e))return Promise.reject(new Error("Persistent paths must be an array"));if(!e.length)return Promise.resolve();return Rr._mount_points=e.slice(),Rr._mount_points.forEach(function(e){!function(e){try{we.stat(e)}catch(r){if(r.errno!==_e.ENOENT)throw r;we.mkdirTree(e)}}(e),we.mount(ye,{},e)}),new Promise(function(e,r){we.syncfs(!0,function(r){r?(Rr._mount_points=[],Rr._idbfs=!1,Tr.print(`IndexedDB not available: ${r.message}`)):Rr._idbfs=!0,e(r)})})},deinit:function(){Rr._mount_points.forEach(function(e){try{we.unmount(e)}catch(e){Tr.print("Already unmounted",e)}Rr._idbfs&&ye.dbs[e]&&(ye.dbs[e].close(),delete ye.dbs[e])}),Rr._mount_points=[],Rr._idbfs=!1,Rr._syncing=!1},sync:function(){return Rr._syncing?(Tr.error("Already syncing!"),Promise.resolve()):(Rr._syncing=!0,new Promise(function(e,r){we.syncfs(!1,function(r){r&&Tr.error(`Failed to save IDB file system: ${r.message}`),Rr._syncing=!1,e(r)})}))},copy_to_fs:function(e,r){const t=e.lastIndexOf("/");let n="/";t>0&&(n=e.slice(0,t));try{we.stat(n)}catch(e){if(e.errno!==_e.ENOENT)throw e;we.mkdirTree(n)}we.writeFile(e,new Uint8Array(r))}},Cr={request_quit:function(){},_async_cbs:[],_fs_sync_promise:null,atexit:function(e){Cr._async_cbs.push(e)},finish_async:function(e){Cr._fs_sync_promise.then(function(e){const r=[];return Cr._async_cbs.forEach(function(e){r.push(new Promise(e))}),Promise.all(r)}).then(function(){return Rr.sync()}).then(function(r){setTimeout(function(){e()},0)})}},Mr={ctx:null,input:null,driver:null,interval:0,init:function(e,r,t,n){const o=new(window.AudioContext||window.webkitAudioContext)({sampleRate:e});return Mr.ctx=o,o.onstatechange=function(){let e=0;switch(o.state){case"suspended":e=0;break;case"running":e=1;break;case"closed":e=2}t(e)},o.onstatechange(),Mr.interval=setInterval(function(){let e=0;o.baseLatency&&(e+=Mr.ctx.baseLatency),o.outputLatency&&(e+=Mr.ctx.outputLatency),n(e)},1e3),Cr.atexit(Mr.close_async),o.destination.channelCount},create_input:function(e){if(Mr.input)return 0;function r(r){try{Mr.input=Mr.ctx.createMediaStreamSource(r),e(Mr.input)}catch(e){Tr.error("Failed creaating input.",e)}}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then(r,function(e){Tr.error("Error getting user media.",e)});else{if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),!navigator.getUserMedia)return Tr.error("getUserMedia not available."),1;navigator.getUserMedia({audio:!0},r,function(e){Tr.print(e)})}return 0},close_async:function(e,r){const t=Mr.ctx;if(Mr.ctx=null,!t)return void e();Mr.interval&&(clearInterval(Mr.interval),Mr.interval=0),Mr.input&&(Mr.input.disconnect(),Mr.input=null);let n=Promise.resolve();Mr.driver&&(n=Mr.driver.close()),n.then(function(){return t.close()}).then(function(){t.onstatechange=null,e()}).catch(function(r){t.onstatechange=null,Tr.error("Error closing AudioContext",r),e()})}};var Or={script:null,create:function(e,r){return Or.script=Mr.ctx.createScriptProcessor(e,2,r),Mr.driver=Or,Or.script.bufferSize},start:function(e,r,t,n,o){Or.script.onaudioprocess=function(a){const i=Tr.heapSub(O,e,r),s=a.inputBuffer;if(Mr.input){const e=s.getChannelData(0).length;for(let r=0;r<2;r++){const t=s.getChannelData(r);for(let n=0;n<e;n++)i[2*n+r]=t[n]}}o();const u=Tr.heapSub(O,t,n),c=a.outputBuffer,f=c.numberOfChannels;for(let e=0;e<f;e++){const r=c.getChannelData(e);for(let t=0;t<r.length;t++)r[t]=u[t*f+e]}},Or.script.connect(Mr.ctx.destination)},get_node:function(){return Or.script},close:function(){return new Promise(function(e,r){Or.script.disconnect(),Or.script.onaudioprocess=null,Or.script=null,e()})}};var Br={canvas:null,locale:"en",resize_on_start:!1,on_execute:null,init_config:function(e){Br.resize_on_start=!!e.resizeCanvasOnStart,Br.canvas=e.canvas,Br.locale=e.locale||Br.locale,Br.on_execute=e.onExecute,o.onExit=e.onExit},locate_file:function(e){return o.locateFile(e)}};var Ir={shape:"auto",visible:!0,cursors:{},set_style:function(e){Br.canvas.style.cursor=e},set_shape:function(e){Ir.shape=e;let r=e;if(e in Ir.cursors){const t=Ir.cursors[e];r=`url("${t.url}") ${t.x} ${t.y}, auto`}Ir.visible&&Ir.set_style(r)},clear:function(){Ir.set_style(""),Ir.shape="auto",Ir.visible=!0,Object.keys(Ir.cursors).forEach(function(e){URL.revokeObjectURL(Ir.cursors[e]),delete Ir.cursors[e]})}},Nr={handlers:[],has:function(e,r,t,n){return-1!==Nr.handlers.findIndex(function(o){return o.target===e&&o.event===r&&o.method===t&&o.capture===n})},add:function(e,r,t,n){Nr.has(e,r,t,n)||(Nr.handlers.push(new function(e,r,t,n){this.target=e,this.event=r,this.method=t,this.capture=n}(e,r,t,n)),e.addEventListener(r,t,n))},clear:function(){Nr.handlers.forEach(function(e){e.target.removeEventListener(e.event,e.method,e.capture)}),Nr.handlers.length=0}},Ur={promises:[],pending_files:[],add_entry:function(e){e.isDirectory?Ur.add_dir(e):e.isFile?Ur.add_file(e):Tr.error("Unrecognized entry...",e)},add_dir:function(e){Ur.promises.push(new Promise(function(r,t){e.createReader().readEntries(function(e){for(let r=0;r<e.length;r++)Ur.add_entry(e[r]);r()})}))},add_file:function(e){Ur.promises.push(new Promise(function(r,t){e.file(function(e){const n=new FileReader;n.onload=function(){const t={path:e.relativePath||e.webkitRelativePath,name:e.name,type:e.type,size:e.size,data:n.result};t.path||(t.path=t.name),Ur.pending_files.push(t),r()},n.onerror=function(){Tr.print("Error reading file"),t()},n.readAsArrayBuffer(e)},function(e){Tr.print("Error!"),t()})}))},process:function(e,r){0!==Ur.promises.length?Ur.promises.pop().then(function(){setTimeout(function(){Ur.process(e,r)},0)}):e()},_process_event:function(e,r){if(e.preventDefault(),e.dataTransfer.items)for(let r=0;r<e.dataTransfer.items.length;r++){const t=e.dataTransfer.items[r];let n=null;"getAsEntry"in t?n=t.getAsEntry():"webkitGetAsEntry"in t&&(n=t.webkitGetAsEntry()),n&&Ur.add_entry(n)}else Tr.error("File upload not supported");new Promise(Ur.process).then(function(){const e=`/tmp/drop-${parseInt(Math.random()*(1<<30),10)}/`,t=[],n=[];we.mkdir(e),Ur.pending_files.forEach(r=>{const o=r.path;Rr.copy_to_fs(e+o,r.data);let a=o.indexOf("/");if(-1===a)t.push(e+o);else{const r=o.substr(0,a);(a=r.indexOf("/"))<0&&-1===t.indexOf(e+r)&&t.push(e+r)}n.push(e+o)}),Ur.promises=[],Ur.pending_files=[],r(t);const o=[e.substr(0,e.length-1)];n.forEach(function(r){we.unlink(r);let t=r.replace(e,""),n=t.lastIndexOf("/");for(;n>0;)t=t.substr(0,n),-1===o.indexOf(e+t)&&o.push(e+t),n=t.lastIndexOf("/")}),o.sort(function(e,r){const t=(e.match(/\//g)||[]).length,n=(r.match(/\//g)||[]).length;return t>n?-1:t<n?1:0}).forEach(function(e){we.rmdir(e)})})},handler:function(e){return function(r){Ur._process_event(r,e)}}},jr={samples:[],get_pads:function(){try{const e=navigator.getGamepads();return e||[]}catch(e){return[]}},get_samples:function(){return jr.samples},get_sample:function(e){const r=jr.samples;return e<r.length?r[e]:null},sample:function(){const e=jr.get_pads(),r=[];for(let t=0;t<e.length;t++){const n=e[t];if(!n){r.push(null);continue}const o={standard:"standard"===n.mapping,buttons:[],axes:[],connected:n.connected};for(let e=0;e<n.buttons.length;e++)o.buttons.push(n.buttons[e].value);for(let e=0;e<n.axes.length;e++)o.axes.push(n.axes[e]);r.push(o)}jr.samples=r},init:function(e){function r(r){const t=jr.get_guid(r),n=Tr.allocString(r.id),o=Tr.allocString(t);e(r.index,1,n,o),Tr.free(n),Tr.free(o)}Nr.samples=[];const t=jr.get_pads();for(let e=0;e<t.length;e++)t[e]&&r(t[e]);Nr.add(window,"gamepadconnected",function(e){r(e.gamepad)},!1),Nr.add(window,"gamepaddisconnected",function(r){e(r.gamepad.index,0)},!1)},get_guid:function(e){if(e.mapping)return e.mapping;const r=navigator.userAgent;let t="Unknown";r.indexOf("Android")>=0?t="Android":r.indexOf("Linux")>=0?t="Linux":r.indexOf("iPhone")>=0?t="iOS":r.indexOf("Macintosh")>=0?t="MacOSX":r.indexOf("Windows")>=0&&(t="Windows");const n=e.id,o=/vendor: ([0-9a-f]{4}) product: ([0-9a-f]{4})/i,a=/^([0-9a-f]+)-([0-9a-f]+)-/i;let i="",s="";if(o.test(n)){const e=o.exec(n);i=e[1].padStart(4,"0"),s=e[2].padStart(4,"0")}else if(a.test(n)){const e=a.exec(n);i=e[1].padStart(4,"0"),s=e[2].padStart(4,"0")}return i&&s?t+i+s:`${t}Unknown`}},qr={window_icon:""};var zr={_last_id:0,_references:{},get:function(e){return zr._references[e]},add:function(e){const r=++zr._last_id;return zr._references[r]=e,r},remove:function(e){delete zr._references[e]}},Hr={_onopen:function(e,r,t){const n=zr.get(e);if(!n)return;const o=Tr.allocString(n.protocol);r(o),Tr.free(o)},_onmessage:function(e,r,t){if(!zr.get(e))return;let n,o=0;if(t.data instanceof ArrayBuffer)n=new Uint8Array(t.data);else{if(t.data instanceof Blob)return void Tr.error("Blob type not supported");if("string"!=typeof t.data)return void Tr.error("Unknown message type");{o=1;const e=new TextEncoder("utf-8");n=new Uint8Array(e.encode(t.data))}}const a=n.length*n.BYTES_PER_ELEMENT,i=Tr.malloc(a);F.set(n,i),r(i,a,o),Tr.free(i)},_onerror:function(e,r,t){zr.get(e)&&r()},_onclose:function(e,r,t){if(!zr.get(e))return;const n=Tr.allocString(t.reason);r(t.code,n,t.wasClean?1:0),Tr.free(n)},send:function(e,r){const t=zr.get(e);return t&&t.readyState===t.OPEN?(t.send(r),0):1},create:function(e,r,t,n,o){const a=zr.add(e);return e.onopen=Hr._onopen.bind(null,a,r),e.onmessage=Hr._onmessage.bind(null,a,t),e.onerror=Hr._onerror.bind(null,a,n),e.onclose=Hr._onclose.bind(null,a,o),a},close:function(e,r,t){const n=zr.get(e);if(n&&n.readyState<n.CLOSING){const e=r,o=Tr.parseString(t);n.close(e,o)}},destroy:function(e){const r=zr.get(e);r&&(Hr.close(e,1001,""),zr.remove(e),r.onopen=null,r.onmessage=null,r.onerror=null,r.onclose=null)}};var Gr={gl:null,texture_ids:[null,null],textures:[null,null],session:null,space:null,frame:null,pose:null,orig_requestAnimationFrame:null,requestAnimationFrame:e=>{if(Gr.session&&Gr.space){const r=function(r,t){Gr.frame=t,Gr.pose=t.getViewerPose(Gr.space),e(r),Gr.frame=null,Gr.pose=null};Gr.session.requestAnimationFrame(r)}else Gr.orig_requestAnimationFrame(e)},monkeyPatchRequestAnimationFrame:e=>{null===Gr.orig_requestAnimationFrame&&(Gr.orig_requestAnimationFrame=Ne.requestAnimationFrame),Ne.requestAnimationFrame=e?Gr.requestAnimationFrame:Gr.orig_requestAnimationFrame},pauseResumeMainLoop:()=>{Ne.pauseAsyncCallbacks(),Ne.mainLoop.pause(),window.setTimeout(function(){Ne.resumeAsyncCallbacks(),Ne.mainLoop.resume()},0)},shaderProgram:null,programInfo:null,buffer:null,vsSource:"\n\t\t\tconst vec2 scale = vec2(0.5, 0.5);\n\t\t\tattribute vec4 aVertexPosition;\n\n\t\t\tvarying highp vec2 vTextureCoord;\n\n\t\t\tvoid main () {\n\t\t\t\tgl_Position = aVertexPosition;\n\t\t\t\tvTextureCoord = aVertexPosition.xy * scale + scale;\n\t\t\t}\n\t\t",fsSource:"\n\t\t\tvarying highp vec2 vTextureCoord;\n\n\t\t\tuniform sampler2D uSampler;\n\n\t\t\tvoid main() {\n\t\t\t\tgl_FragColor = texture2D(uSampler, vTextureCoord);\n\t\t\t}\n\t\t",initShaderProgram:(e,r,t)=>{const n=Gr.loadShader(e,e.VERTEX_SHADER,r),o=Gr.loadShader(e,e.FRAGMENT_SHADER,t),a=e.createProgram();return e.attachShader(a,n),e.attachShader(a,o),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)?a:(Tr.error(`Unable to initialize the shader program: ${e.getProgramInfoLog(a)}`),null)},loadShader:(e,r,t)=>{const n=e.createShader(r);return e.shaderSource(n,t),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(Tr.error(`An error occurred compiling the shader: ${e.getShaderInfoLog(n)}`),e.deleteShader(n),null)},initBuffer:e=>{const r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);return e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),r},blitTexture:(e,r)=>{null===Gr.shaderProgram&&(Gr.shaderProgram=Gr.initShaderProgram(e,Gr.vsSource,Gr.fsSource),Gr.programInfo={program:Gr.shaderProgram,attribLocations:{vertexPosition:e.getAttribLocation(Gr.shaderProgram,"aVertexPosition")},uniformLocations:{uSampler:e.getUniformLocation(Gr.shaderProgram,"uSampler")}},Gr.buffer=Gr.initBuffer(e));const t=e.getParameter(e.CURRENT_PROGRAM);e.useProgram(Gr.shaderProgram),e.bindBuffer(e.ARRAY_BUFFER,Gr.buffer),e.vertexAttribPointer(Gr.programInfo.attribLocations.vertexPosition,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(Gr.programInfo.attribLocations.vertexPosition),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r),e.uniform1i(Gr.programInfo.uniformLocations.uSampler,0),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,null),e.disableVertexAttribArray(Gr.programInfo.attribLocations.vertexPosition),e.bindBuffer(e.ARRAY_BUFFER,null),e.useProgram(t)},controllers:[],sampleControllers:()=>{if(!Gr.session||!Gr.frame)return;let e=2;const r=[];Gr.session.inputSources.forEach(t=>{"tracked-pointer"===t.targetRayMode?"right"===t.handedness?r[1]=t:"left"!==t.handedness&&r[0]||(r[0]=t):r[e++]=t}),Gr.controllers=r},getControllerId:e=>Gr.controllers.indexOf(e)};var Vr={requests:[],getUnusedRequestId:function(){const e=Vr.requests.length;for(let r=0;r<e;++r)if(!(Vr.requests[r]instanceof XMLHttpRequest))return r;return Vr.requests.push(null),e},setupRequest:function(e){e.responseType="arraybuffer"}};function Xr(e){return e%4==0&&(e%100!=0||e%400==0)}function Wr(e,r){for(var t=0,n=0;n<=r;t+=e[n++]);return t}var Yr=[31,29,31,30,31,30,31,31,30,31,30,31],Qr=[31,28,31,30,31,30,31,31,30,31,30,31];function Kr(e,r){for(var t=new Date(e.getTime());r>0;){var n=Xr(t.getFullYear()),o=t.getMonth(),a=(n?Yr:Qr)[o];if(!(r>a-t.getDate()))return t.setDate(t.getDate()+r),t;r-=a-t.getDate()+1,t.setDate(1),o<11?t.setMonth(o+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return t}var $r=[];var Zr,Jr=function(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=we.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n};Object.defineProperties(Jr.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return we.isDir(this.mode)}},isDevice:{get:function(){return we.isChrdev(this.mode)}}}),we.FSNode=Jr,we.staticInit(),o.requestFullscreen=function(e,r){Ne.requestFullscreen(e,r)},o.requestAnimationFrame=function(e){Ne.requestAnimationFrame(e)},o.setCanvasSize=function(e,r,t){Ne.setCanvasSize(e,r,t)},o.pauseMainLoop=function(){Ne.mainLoop.pause()},o.resumeMainLoop=function(){Ne.mainLoop.resume()},o.getUserMedia=function(){Ne.getUserMedia()},o.createContext=function(e,r,t,n){return Ne.createContext(e,r,t,n)};for(var et=0;et<32;++et)or.push(new Array(et));var rt=new Float32Array(288);for(et=0;et<288;++et)hr[et]=rt.subarray(0,et+1);var tt=new Int32Array(288);for(et=0;et<288;++et)br[et]=tt.subarray(0,et+1);function nt(e,r,t){var n=t>0?t:z(e)+1,o=new Array(n),a=j(e,o,0,o.length);return r&&(o.length=a),o}o.request_quit=function(){Cr.request_quit()},Cr._fs_sync_promise=Promise.resolve(),o.initFS=Rr.init,o.deinitFS=Rr.deinit,o.copyToFS=Rr.copy_to_fs,o.initConfig=Br.init_config,Cr.atexit(function(e,r){Ir.clear(),e()}),Cr.atexit(function(e,r){Nr.clear(),e()});var ot,at={t:function(e,r){return t=e,n=r,void $.unshift({func:t,arg:n});var t,n},wi:function(e,r,t,n,o){try{for(var a=0,i=r?C[r>>2]:0,s=r?C[r+4>>2]:0,u=t?C[t>>2]:0,c=t?C[t+4>>2]:0,f=n?C[n>>2]:0,l=n?C[n+4>>2]:0,d=0,m=0,p=0,g=0,v=0,h=0,b=(r?C[r>>2]:0)|(t?C[t>>2]:0)|(n?C[n>>2]:0),E=(r?C[r+4>>2]:0)|(t?C[t+4>>2]:0)|(n?C[n+4>>2]:0),y=function(e,r,t,n){return e<32?r&n:t&n},w=0;w<e;w++){var x=1<<w%32;if(y(w,b,E,x)){var k=we.getStream(w);if(!k)throw new we.ErrnoError(8);var _=xe.DEFAULT_POLLMASK;k.stream_ops.poll&&(_=k.stream_ops.poll(k)),1&_&&y(w,i,s,x)&&(w<32?d|=x:m|=x,a++),4&_&&y(w,u,c,x)&&(w<32?p|=x:g|=x,a++),2&_&&y(w,f,l,x)&&(w<32?v|=x:h|=x,a++)}}return r&&(C[r>>2]=d,C[r+4>>2]=m),t&&(C[t>>2]=p,C[t+4>>2]=g),n&&(C[n>>2]=v,C[n+4>>2]=h),a}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},ji:function(e,r){try{return e=xe.getStr(e),xe.doAccess(e,r)}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},ki:function(e){try{return e=xe.getStr(e),we.chdir(e),0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},vi:function(e,r){try{return e=xe.getStr(e),we.chmod(e,r),0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},Ca:function(e,r,t){xe.varargs=t;try{var n=xe.getStreamFromFD(e);switch(r){case 0:return(o=xe.get())<0?-28:we.open(n.path,n.flags,0,o).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:var o=xe.get();return n.flags|=o,0;case 12:return o=xe.get(),T[o+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return ke(28),-1;default:return-28}}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},li:function(e,r){try{if(0===r)return-28;var t=we.cwd();return r<z(t)+1?-68:(q(t,e,r),e)}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},hi:function(e,r,t){try{var n=xe.getStreamFromFD(e);n.getdents||(n.getdents=we.readdir(n.path));for(var o=0,a=we.llseek(n,0,1),i=Math.floor(a/280);i<n.getdents.length&&o+280<=t;){var s,u,c=n.getdents[i];if("."===c[0])s=1,u=4;else{var f=we.lookupNode(n.node,c);s=f.id,u=we.isChrdev(f.mode)?2:we.isDir(f.mode)?4:we.isLink(f.mode)?10:8}fe=[s>>>0,(ce=s,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)],C[r+o>>2]=fe[0],C[r+o+4>>2]=fe[1],fe=[280*(i+1)>>>0,(ce=280*(i+1),+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)],C[r+o+8>>2]=fe[0],C[r+o+12>>2]=fe[1],T[r+o+16>>1]=280,P[r+o+18>>0]=u,q(c,r+o+19,256),o+=280,i+=1}return we.llseek(n,280*i,0),o}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},oi:function(){return 42},vb:function(e,r,t){xe.varargs=t;try{var n=xe.getStreamFromFD(e);switch(r){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:if(!n.tty)return-59;var o=xe.get();return C[o>>2]=0,0;case 21520:return n.tty?-28:-59;case 21531:return o=xe.get(),we.ioctl(n,r,o);case 21523:case 21524:return n.tty?0:-59;default:ae("bad ioctl syscall "+r)}}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},si:function(e,r){try{return e=xe.getStr(e),xe.doMkdir(e,r)}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},tb:function(e,r,t){xe.varargs=t;try{var n=xe.getStr(e),o=t?xe.get():0;return we.open(n,r,o).fd}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},xi:function(e,r,t){try{for(var n=0,o=0;o<r;o++){var a=e+8*o,i=C[a>>2],s=T[a+4>>1],u=32,c=we.getStream(i);c&&(u=xe.DEFAULT_POLLMASK,c.stream_ops.poll&&(u=c.stream_ops.poll(c))),(u&=24|s)&&n++,T[a+6>>1]=u}return n}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},ii:function(e,r){try{return e=xe.getStr(e),r=xe.getStr(r),we.rename(e,r),0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},mi:function(e){try{return e=xe.getStr(e),we.rmdir(e),0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},ga:function(e,r){try{xe.varargs=r;var t=function(){var e=Se.getSocket(xe.get());if(!e)throw new we.ErrnoError(8);return e},n=function(e){var r=xe.get(),t=xe.get();if(e&&0===r)return null;var n=Ce(r,t);if(n.errno)throw new we.ErrnoError(n.errno);return n.addr=Fe.lookup_addr(n.addr)||n.addr,n};switch(e){case 1:var o=xe.get(),a=xe.get(),i=xe.get();return(s=Se.createSocket(o,a,i)).stream.fd;case 2:var s=t(),u=n();return s.sock_ops.bind(s,u.addr,u.port),0;case 3:return s=t(),u=n(),s.sock_ops.connect(s,u.addr,u.port),0;case 4:s=t();var c=xe.get();return s.sock_ops.listen(s,c),0;case 5:s=t();var f=xe.get(),l=xe.get(),d=s.sock_ops.accept(s);return f&&Me(f,d.family,Fe.lookup_name(d.daddr),d.dport,l),d.stream.fd;case 6:return s=t(),f=xe.get(),l=xe.get(),Me(f,s.family,Fe.lookup_name(s.saddr||"0.0.0.0"),s.sport,l),0;case 7:return s=t(),f=xe.get(),l=xe.get(),s.daddr?(Me(f,s.family,Fe.lookup_name(s.daddr),s.dport,l),0):-53;case 11:s=t();var m=xe.get(),p=xe.get(),g=(xe.get(),n(!0));return g?s.sock_ops.sendmsg(s,P,m,p,g.addr,g.port):we.write(s.stream,P,m,p);case 12:s=t();var v=xe.get(),h=xe.get();return xe.get(),f=xe.get(),l=xe.get(),(I=s.sock_ops.recvmsg(s,h))?(f&&Me(f,s.family,Fe.lookup_name(I.addr),I.port,l),F.set(I.buffer,v),I.buffer.byteLength):0;case 14:return-50;case 15:s=t();var b=xe.get(),E=xe.get(),y=xe.get(),w=xe.get();return 1===b&&4===E?(C[y>>2]=s.error,C[w>>2]=4,s.error=null,0):-50;case 16:s=t(),m=xe.get(),xe.get();var x,k=C[m+8>>2],_=C[m+12>>2],S=C[m>>2],L=C[m+4>>2];if(S){if((u=Ce(S,L)).errno)return-u.errno;x=u.port,f=Fe.lookup_addr(u.addr)||u.addr}for(var D=0,A=0;A<_;A++)D+=C[k+(8*A+4)>>2];var T=new Uint8Array(D),R=0;for(A=0;A<_;A++)for(var M=C[k+(8*A+0)>>2],O=C[k+(8*A+4)>>2],B=0;B<O;B++)T[R++]=P[M+B>>0];return s.sock_ops.sendmsg(s,T,0,D,f,x);case 17:for(s=t(),m=xe.get(),xe.get(),k=C[m+8>>2],_=C[m+12>>2],D=0,A=0;A<_;A++)D+=C[k+(8*A+4)>>2];var I;if(!(I=s.sock_ops.recvmsg(s,D)))return 0;(S=C[m>>2])&&Me(S,s.family,Fe.lookup_name(I.addr),I.port);var N=0,U=I.buffer.byteLength;for(A=0;U>0&&A<_;A++)M=C[k+(8*A+0)>>2],(O=C[k+(8*A+4)>>2])&&(p=Math.min(O,U),v=I.buffer.subarray(N,N+p),F.set(v,M+N),N+=p,U-=p);return N;default:return-52}}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},ri:function(e,r){try{return e=xe.getStr(e),xe.doStat(we.stat,e,r)}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},ui:function(e,r,t){try{return e=xe.getStr(e),C[t+4>>2]=4096,C[t+40>>2]=4096,C[t+8>>2]=1e6,C[t+12>>2]=5e5,C[t+16>>2]=5e5,C[t+20>>2]=we.nextInode,C[t+24>>2]=1e6,C[t+28>>2]=42,C[t+44>>2]=2,C[t+36>>2]=255,0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},ni:function(e){try{return e=xe.getStr(e),we.unlink(e),0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},qi:function(e,r,t,n){try{ae("cannot wait on child processes")}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),-e.errno}},oa:function(){ae()},Kb:function(e,r){var t;if(0===e)t=Date.now();else{if(1!==e&&4!==e||!Oe)return ke(28),-1;t=Pe()}return C[r>>2]=t/1e3|0,C[r+4>>2]=t%1e3*1e3*1e3|0,0},Zi:function(e){ae("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Jb:function(){ae("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},jb:function(e,r){ae("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Yi:function(e,r){ae("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},yb:function(e){return dt(e)},Mi:function(e,r,t){var n=function(e,r){var t;for($r.length=0,r>>=2;t=F[e++];){var n=t<105;n&&1&r&&r++,$r.push(n?B[r++>>1]:C[r]),++r}return $r}(r,t);return me[e].apply(null,n)},Fb:function(){Ne.mainLoop.pause(),Ne.mainLoop.func=null},rb:function(e,r){if(!(e=He(e)))return-4;var t={scaleMode:C[r>>2],canvasResolutionScaleMode:C[r+4>>2],filteringMode:C[r+8>>2],canvasResizedCallback:C[r+12>>2],canvasResizedCallbackUserData:C[r+16>>2],target:e,softFullscreen:!0},n=Ze(e,t);document.documentElement.style.overflow="hidden",document.body.scroll="no",document.body.style.margin="0px";var o=function(e){for(var r=e,t=r.parentNode,n=[];r!=document.body;){for(var o=t.children,a=0;a<o.length;++a)o[a]!=r&&(n.push({node:o[a],displayState:o[a].style.display}),o[a].style.display="none");r=t,t=t.parentNode}return n}(e);return qe=function(){n(),function(e){for(var r=0;r<e.length;++r)e[r].node.style.display=e[r].displayState}(o),removeEventListener("resize",Ke),t.canvasResizedCallback&&W.get(t.canvasResizedCallback)(37,0,t.canvasResizedCallbackUserData),Qe=0},Qe=t,addEventListener("resize",Ke),t.canvasResizedCallback&&W.get(t.canvasResizedCallback)(37,0,t.canvasResizedCallbackUserData),0},Bg:function(){if(!Ue.fullscreenEnabled())return-1;Ue.removeDeferredCalls(Je);var e=ze[1];if(e.exitFullscreen)e.fullscreenElement&&e.exitFullscreen();else{if(!e.webkitExitFullscreen)return-1;e.webkitFullscreenElement&&e.webkitExitFullscreen()}return 0},ob:function(){if(Ue.removeDeferredCalls(er),document.exitPointerLock)document.exitPointerLock();else{if(!document.msExitPointerLock)return-1;document.msExitPointerLock()}return 0},Za:function(){return qe&&qe(),qe=null,0},Fi:function(e){w=!1,_t(e)},Ja:Ve,di:function(e,r,t){if(!(e=He(e)))return-4;var n=$e(e);return B[r>>3]=n.width,B[t>>3]=n.height,0},Mh:function(e){return Ue.fullscreenEnabled()?(rr(e),0):-1},qg:Pe,Me:function(e){return e&&function(e){var r=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement,t=!!r;C[e>>2]=t;var n=Ue.getNodeNameForTarget(r),o=r&&r.id?r.id:"";q(n,e+4,128),q(o,e+132,128)}(e),document.body&&(document.body.requestPointerLock||document.body.mozRequestPointerLock||document.body.webkitRequestPointerLock||document.body.msRequestPointerLock)?0:-1},Jh:function(e){Zr.activeTexture(e)},Ih:function(e,r){Zr.attachShader(tr.programs[e],tr.shaders[r])},ye:function(e,r){Zr.beginQuery(e,tr.queries[r])},_h:function(e,r){Zr.disjointTimerQueryExt.beginQueryEXT(e,tr.timerQueriesEXT[r])},de:function(e){Zr.beginTransformFeedback(e)},Hh:function(e,r,t){Zr.bindAttribLocation(tr.programs[e],r,U(t))},Gh:function(e,r){35051==e?Zr.currentPixelPackBufferBinding=r:35052==e&&(Zr.currentPixelUnpackBufferBinding=r),Zr.bindBuffer(e,tr.buffers[r])},ae:function(e,r,t){Zr.bindBufferBase(e,r,tr.buffers[t])},be:function(e,r,t,n,o){Zr.bindBufferRange(e,r,tr.buffers[t],n,o)},Fh:function(e,r){Zr.bindFramebuffer(e,r?tr.framebuffers[r]:tr.currentContext.defaultFbo)},Eh:function(e,r){Zr.bindRenderbuffer(e,tr.renderbuffers[r])},cd:function(e,r){Zr.bindSampler(e,tr.samplers[r])},Dh:function(e,r){Zr.bindTexture(e,tr.textures[r])},Wc:function(e,r){Zr.bindTransformFeedback(e,tr.transformFeedbacks[r])},je:function(e){Zr.bindVertexArray(tr.vaos[e])},Sh:function(e){Zr.bindVertexArray(tr.vaos[e])},Ch:function(e,r,t,n){Zr.blendColor(e,r,t,n)},Ah:function(e){Zr.blendEquation(e)},zh:function(e,r){Zr.blendEquationSeparate(e,r)},yh:function(e,r){Zr.blendFunc(e,r)},xh:function(e,r,t,n){Zr.blendFuncSeparate(e,r,t,n)},me:function(e,r,t,n,o,a,i,s,u,c){Zr.blitFramebuffer(e,r,t,n,o,a,i,s,u,c)},wh:function(e,r,t,n){tr.currentContext.version>=2?t?Zr.bufferData(e,F,n,t,r):Zr.bufferData(e,r,n):Zr.bufferData(e,t?F.subarray(t,t+r):r,n)},vh:function(e,r,t,n){tr.currentContext.version>=2?Zr.bufferSubData(e,r,F,n,t):Zr.bufferSubData(e,r,F.subarray(n,n+t))},uh:function(e){return Zr.checkFramebufferStatus(e)},th:function(e){Zr.clear(e)},Dd:function(e,r,t,n){Zr.clearBufferfi(e,r,t,n)},Ed:function(e,r,t){Zr.clearBufferfv(e,r,O,t>>2)},Gd:function(e,r,t){Zr.clearBufferiv(e,r,C,t>>2)},Fd:function(e,r,t){Zr.clearBufferuiv(e,r,M,t>>2)},sh:function(e,r,t,n){Zr.clearColor(e,r,t,n)},rh:function(e){Zr.clearDepth(e)},ph:function(e){Zr.clearStencil(e)},md:function(e,r,t,n){return Zr.clientWaitSync(tr.syncs[e],r,nr(t,n))},oh:function(e,r,t,n){Zr.colorMask(!!e,!!r,!!t,!!n)},nh:function(e){Zr.compileShader(tr.shaders[e])},mh:function(e,r,t,n,o,a,i,s){tr.currentContext.version>=2?Zr.currentPixelUnpackBufferBinding?Zr.compressedTexImage2D(e,r,t,n,o,a,i,s):Zr.compressedTexImage2D(e,r,t,n,o,a,F,s,i):Zr.compressedTexImage2D(e,r,t,n,o,a,s?F.subarray(s,s+i):null)},Ee:function(e,r,t,n,o,a,i,s,u){Zr.currentPixelUnpackBufferBinding?Zr.compressedTexImage3D(e,r,t,n,o,a,i,s,u):Zr.compressedTexImage3D(e,r,t,n,o,a,i,F,u,s)},lh:function(e,r,t,n,o,a,i,s,u){tr.currentContext.version>=2?Zr.currentPixelUnpackBufferBinding?Zr.compressedTexSubImage2D(e,r,t,n,o,a,i,s,u):Zr.compressedTexSubImage2D(e,r,t,n,o,a,i,F,u,s):Zr.compressedTexSubImage2D(e,r,t,n,o,a,i,u?F.subarray(u,u+s):null)},De:function(e,r,t,n,o,a,i,s,u,c,f){Zr.currentPixelUnpackBufferBinding?Zr.compressedTexSubImage3D(e,r,t,n,o,a,i,s,u,c,f):Zr.compressedTexSubImage3D(e,r,t,n,o,a,i,s,u,F,f,c)},Bd:function(e,r,t,n,o){Zr.copyBufferSubData(e,r,t,n,o)},kh:function(e,r,t,n,o,a,i,s){Zr.copyTexImage2D(e,r,t,n,o,a,i,s)},jh:function(e,r,t,n,o,a,i,s){Zr.copyTexSubImage2D(e,r,t,n,o,a,i,s)},Fe:function(e,r,t,n,o,a,i,s,u){Zr.copyTexSubImage3D(e,r,t,n,o,a,i,s,u)},ih:function(){var e=tr.getNewId(tr.programs),r=Zr.createProgram();return r.name=e,tr.programs[e]=r,e},hh:function(e){var r=tr.getNewId(tr.shaders);return tr.shaders[r]=Zr.createShader(e),r},gh:function(e){Zr.cullFace(e)},eh:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.buffers[n];o&&(Zr.deleteBuffer(o),o.name=0,tr.buffers[n]=null,n==Zr.currentPixelPackBufferBinding&&(Zr.currentPixelPackBufferBinding=0),n==Zr.currentPixelUnpackBufferBinding&&(Zr.currentPixelUnpackBufferBinding=0))}},dh:function(e,r){for(var t=0;t<e;++t){var n=C[r+4*t>>2],o=tr.framebuffers[n];o&&(Zr.deleteFramebuffer(o),o.name=0,tr.framebuffers[n]=null)}},ch:function(e){if(e){var r=tr.programs[e];r?(Zr.deleteProgram(r),r.name=0,tr.programs[e]=null,tr.programInfos[e]=null):tr.recordError(1281)}},Ae:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.queries[n];o&&(Zr.deleteQuery(o),tr.queries[n]=null)}},ai:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.timerQueriesEXT[n];o&&(Zr.disjointTimerQueryExt.deleteQueryEXT(o),tr.timerQueriesEXT[n]=null)}},bh:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.renderbuffers[n];o&&(Zr.deleteRenderbuffer(o),o.name=0,tr.renderbuffers[n]=null)}},fd:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.samplers[n];o&&(Zr.deleteSampler(o),o.name=0,tr.samplers[n]=null)}},ah:function(e){if(e){var r=tr.shaders[e];r?(Zr.deleteShader(r),tr.shaders[e]=null):tr.recordError(1281)}},nd:function(e){if(e){var r=tr.syncs[e];r?(Zr.deleteSync(r),r.name=0,tr.syncs[e]=null):tr.recordError(1281)}},$g:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.textures[n];o&&(Zr.deleteTexture(o),o.name=0,tr.textures[n]=null)}},Vc:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.transformFeedbacks[n];o&&(Zr.deleteTransformFeedback(o),o.name=0,tr.transformFeedbacks[n]=null)}},ie:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2];Zr.deleteVertexArray(tr.vaos[n]),tr.vaos[n]=null}},Rh:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2];Zr.deleteVertexArray(tr.vaos[n]),tr.vaos[n]=null}},_g:function(e){Zr.depthFunc(e)},Zg:function(e){Zr.depthMask(!!e)},Yg:function(e,r){Zr.depthRange(e,r)},Xg:function(e,r){Zr.detachShader(tr.programs[e],tr.shaders[r])},Wg:function(e){Zr.disable(e)},Vg:function(e){Zr.disableVertexAttribArray(e)},Ug:function(e,r,t){Zr.drawArrays(e,r,t)},sd:function(e,r,t,n){Zr.drawArraysInstanced(e,r,t,n)},Nh:function(e,r,t,n){Zr.drawArraysInstanced(e,r,t,n)},Pe:function(e,r,t,n){Zr.drawArraysInstanced(e,r,t,n)},Qe:function(e,r,t,n){Zr.drawArraysInstanced(e,r,t,n)},Fc:function(e,r,t,n){Zr.drawArraysInstanced(e,r,t,n)},ue:function(e,r){for(var t=or[e],n=0;n<e;n++)t[n]=C[r+4*n>>2];Zr.drawBuffers(t)},Ke:function(e,r){for(var t=or[e],n=0;n<e;n++)t[n]=C[r+4*n>>2];Zr.drawBuffers(t)},Oh:function(e,r){for(var t=or[e],n=0;n<e;n++)t[n]=C[r+4*n>>2];Zr.drawBuffers(t)},Tg:function(e,r,t,n){Zr.drawElements(e,r,t,n)},rd:function(e,r,t,n,o){Zr.drawElementsInstanced(e,r,t,n,o)},Lh:function(e,r,t,n,o){Zr.drawElementsInstanced(e,r,t,n,o)},Le:function(e,r,t,n,o){Zr.drawElementsInstanced(e,r,t,n,o)},Ne:function(e,r,t,n,o){Zr.drawElementsInstanced(e,r,t,n,o)},Oe:function(e,r,t,n,o){Zr.drawElementsInstanced(e,r,t,n,o)},Ie:function(e,r,t,n,o,a){ar(e,n,o,a)},Sg:function(e){Zr.enable(e)},Rg:function(e){Zr.enableVertexAttribArray(e)},xe:function(e){Zr.endQuery(e)},Zh:function(e){Zr.disjointTimerQueryExt.endQueryEXT(e)},ce:function(){Zr.endTransformFeedback()},qd:function(e,r){var t=Zr.fenceSync(e,r);if(t){var n=tr.getNewId(tr.syncs);return t.name=n,tr.syncs[n]=t,n}return 0},Qg:function(){Zr.finish()},Pg:function(){Zr.flush()},Og:function(e,r,t,n){Zr.framebufferRenderbuffer(e,r,t,tr.renderbuffers[n])},Ng:function(e,r,t,n,o){Zr.framebufferTexture2D(e,r,t,tr.textures[n],o)},ke:function(e,r,t,n,o){Zr.framebufferTextureLayer(e,r,tr.textures[t],n,o)},Lg:function(e){Zr.frontFace(e)},Kg:function(e,r){ir(e,r,"createBuffer",tr.buffers)},Ig:function(e,r){ir(e,r,"createFramebuffer",tr.framebuffers)},Ce:function(e,r){ir(e,r,"createQuery",tr.queries)},bi:function(e,r){for(var t=0;t<e;t++){var n=Zr.disjointTimerQueryExt.createQueryEXT();if(!n){for(tr.recordError(1282);t<e;)C[r+4*t++>>2]=0;return}var o=tr.getNewId(tr.timerQueriesEXT);n.name=o,tr.timerQueriesEXT[o]=n,C[r+4*t>>2]=o}},Hg:function(e,r){ir(e,r,"createRenderbuffer",tr.renderbuffers)},gd:function(e,r){ir(e,r,"createSampler",tr.samplers)},Gg:function(e,r){ir(e,r,"createTexture",tr.textures)},Tc:function(e,r){ir(e,r,"createTransformFeedback",tr.transformFeedbacks)},he:function(e,r){ir(e,r,"createVertexArray",tr.vaos)},Qh:function(e,r){ir(e,r,"createVertexArray",tr.vaos)},Jg:function(e){Zr.generateMipmap(e)},Fg:function(e,r,t,n,o,a,i){sr("getActiveAttrib",e,r,t,n,o,a,i)},Eg:function(e,r,t,n,o,a,i){sr("getActiveUniform",e,r,t,n,o,a,i)},ud:function(e,r,t,n,o){e=tr.programs[e];var a=Zr.getActiveUniformBlockName(e,r);if(a)if(o&&t>0){var i=q(a,o,t);n&&(C[n>>2]=i)}else n&&(C[n>>2]=0)},vd:function(e,r,t,n){if(n)switch(e=tr.programs[e],t){case 35393:var o=Zr.getActiveUniformBlockName(e,r);return void(C[n>>2]=o.length+1);default:var a=Zr.getActiveUniformBlockParameter(e,r,t);if(!a)return;if("number"==typeof a)C[n>>2]=a;else for(var i=0;i<a.length;i++)C[n+4*i>>2]=a[i]}else tr.recordError(1281)},xd:function(e,r,t,n,o){if(o)if(r>0&&0==t)tr.recordError(1281);else{e=tr.programs[e];for(var a=[],i=0;i<r;i++)a.push(C[t+4*i>>2]);var s=Zr.getActiveUniforms(e,a,n);if(s){var u=s.length;for(i=0;i<u;i++)C[o+4*i>>2]=s[i]}}else tr.recordError(1281)},Dg:function(e,r,t,n){var o=Zr.getAttachedShaders(tr.programs[e]),a=o.length;a>r&&(a=r),C[t>>2]=a;for(var i=0;i<a;++i){var s=tr.shaders.indexOf(o[i]);C[n+4*i>>2]=s}},Cg:function(e,r){return Zr.getAttribLocation(tr.programs[e],U(r))},Ag:function(e,r){cr(e,r,4)},hd:function(e,r,t){t?ur(t,Zr.getBufferParameter(e,r)):tr.recordError(1281)},zg:function(e,r,t){t?C[t>>2]=Zr.getBufferParameter(e,r):tr.recordError(1281)},yg:function(){var e=Zr.getError()||tr.lastError;return tr.lastError=0,e},xg:function(e,r){cr(e,r,2)},Qd:function(e,r){return Zr.getFragDataLocation(tr.programs[e],U(r))},wg:function(e,r,t,n){var o=Zr.getFramebufferAttachmentParameter(e,r,t);(o instanceof WebGLRenderbuffer||o instanceof WebGLTexture)&&(o=0|o.name),C[n>>2]=o},id:function(e,r,t){fr(e,r,t,1)},kd:function(e,r){cr(e,r,1)},ee:function(e,r,t){fr(e,r,t,0)},vg:function(e,r){cr(e,r,0)},Hc:function(e,r,t,n,o){if(n<0)tr.recordError(1281);else if(o){var a=Zr.getInternalformatParameter(e,r,t);if(null!==a)for(var i=0;i<a.length&&i<n;++i)C[o+i>>2]=a[i]}else tr.recordError(1281)},Pc:function(e,r,t,n,o){tr.recordError(1282)},tg:function(e,r,t,n){var o=Zr.getProgramInfoLog(tr.programs[e]);null===o&&(o="(unknown error)");var a=r>0&&n?q(o,n,r):0;t&&(C[t>>2]=a)},ug:function(e,r,t){if(t)if(e>=tr.counter)tr.recordError(1281);else{var n=tr.programInfos[e];if(n)if(35716==r){var o=Zr.getProgramInfoLog(tr.programs[e]);null===o&&(o="(unknown error)"),C[t>>2]=o.length+1}else if(35719==r)C[t>>2]=n.maxUniformLength;else if(35722==r){if(-1==n.maxAttributeLength){e=tr.programs[e];var a=Zr.getProgramParameter(e,35721);n.maxAttributeLength=0;for(var i=0;i<a;++i){var s=Zr.getActiveAttrib(e,i);n.maxAttributeLength=Math.max(n.maxAttributeLength,s.name.length+1)}}C[t>>2]=n.maxAttributeLength}else if(35381==r){if(-1==n.maxUniformBlockNameLength){e=tr.programs[e];var u=Zr.getProgramParameter(e,35382);for(n.maxUniformBlockNameLength=0,i=0;i<u;++i){var c=Zr.getActiveUniformBlockName(e,i);n.maxUniformBlockNameLength=Math.max(n.maxUniformBlockNameLength,c.length+1)}}C[t>>2]=n.maxUniformBlockNameLength}else C[t>>2]=Zr.getProgramParameter(tr.programs[e],r);else tr.recordError(1282)}else tr.recordError(1281)},Uh:function(e,r,t){if(t){var n=tr.timerQueriesEXT[e],o=Zr.disjointTimerQueryExt.getQueryObjectEXT(n,r);ur(t,"boolean"==typeof o?o?1:0:o)}else tr.recordError(1281)},Wh:function(e,r,t){if(t){var n,o=tr.timerQueriesEXT[e],a=Zr.disjointTimerQueryExt.getQueryObjectEXT(o,r);n="boolean"==typeof a?a?1:0:a,C[t>>2]=n}else tr.recordError(1281)},Th:function(e,r,t){if(t){var n=tr.timerQueriesEXT[e],o=Zr.disjointTimerQueryExt.getQueryObjectEXT(n,r);ur(t,"boolean"==typeof o?o?1:0:o)}else tr.recordError(1281)},ve:function(e,r,t){if(t){var n,o=tr.queries[e],a=Zr.getQueryParameter(o,r);n="boolean"==typeof a?a?1:0:a,C[t>>2]=n}else tr.recordError(1281)},Vh:function(e,r,t){if(t){var n,o=tr.timerQueriesEXT[e],a=Zr.disjointTimerQueryExt.getQueryObjectEXT(o,r);n="boolean"==typeof a?a?1:0:a,C[t>>2]=n}else tr.recordError(1281)},we:function(e,r,t){t?C[t>>2]=Zr.getQuery(e,r):tr.recordError(1281)},Xh:function(e,r,t){t?C[t>>2]=Zr.disjointTimerQueryExt.getQueryEXT(e,r):tr.recordError(1281)},sg:function(e,r,t){t?C[t>>2]=Zr.getRenderbufferParameter(e,r):tr.recordError(1281)},Yc:function(e,r,t){t?(e=tr.samplers[e],O[t>>2]=Zr.getSamplerParameter(e,r)):tr.recordError(1281)},Zc:function(e,r,t){t?(e=tr.samplers[e],C[t>>2]=Zr.getSamplerParameter(e,r)):tr.recordError(1281)},pg:function(e,r,t,n){var o=Zr.getShaderInfoLog(tr.shaders[e]);null===o&&(o="(unknown error)");var a=r>0&&n?q(o,n,r):0;t&&(C[t>>2]=a)},og:function(e,r,t,n){var o=Zr.getShaderPrecisionFormat(e,r);C[t>>2]=o.rangeMin,C[t+4>>2]=o.rangeMax,C[n>>2]=o.precision},ng:function(e,r,t,n){var o=Zr.getShaderSource(tr.shaders[e]);if(o){var a=r>0&&n?q(o,n,r):0;t&&(C[t>>2]=a)}},rg:function(e,r,t){if(t)if(35716==r){var n=Zr.getShaderInfoLog(tr.shaders[e]);null===n&&(n="(unknown error)");var o=n?n.length+1:0;C[t>>2]=o}else if(35720==r){var a=Zr.getShaderSource(tr.shaders[e]),i=a?a.length+1:0;C[t>>2]=i}else C[t>>2]=Zr.getShaderParameter(tr.shaders[e],r);else tr.recordError(1281)},mg:function(e){if(tr.stringCache[e])return tr.stringCache[e];var r;switch(e){case 7939:var t=Zr.getSupportedExtensions()||[];r=lr((t=t.concat(t.map(function(e){return"GL_"+e}))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var n=Zr.getParameter(e);n||tr.recordError(1280),r=lr(n);break;case 7938:var o=Zr.getParameter(7938);r=lr(o=tr.currentContext.version>=2?"OpenGL ES 3.0 ("+o+")":"OpenGL ES 2.0 ("+o+")");break;case 35724:var a=Zr.getParameter(35724),i=a.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==i&&(3==i[1].length&&(i[1]=i[1]+"0"),a="OpenGL ES GLSL ES "+i[1]+" ("+a+")"),r=lr(a);break;default:return tr.recordError(1280),0}return tr.stringCache[e]=r,r},Cd:function(e,r){if(tr.currentContext.version<2)return tr.recordError(1282),0;var t=tr.stringiCache[e];if(t)return r<0||r>=t.length?(tr.recordError(1281),0):t[r];switch(e){case 7939:var n=Zr.getSupportedExtensions()||[];return n=(n=n.concat(n.map(function(e){return"GL_"+e}))).map(function(e){return lr(e)}),t=tr.stringiCache[e]=n,r<0||r>=t.length?(tr.recordError(1281),0):t[r];default:return tr.recordError(1280),0}},jd:function(e,r,t,n,o){if(t<0)tr.recordError(1281);else if(o){var a=Zr.getSyncParameter(tr.syncs[e],r);C[n>>2]=a,null!==a&&n&&(C[n>>2]=1)}else tr.recordError(1281)},lg:function(e,r,t){t?O[t>>2]=Zr.getTexParameter(e,r):tr.recordError(1281)},kg:function(e,r,t){t?C[t>>2]=Zr.getTexParameter(e,r):tr.recordError(1281)},_d:function(e,r,t,n,o,a,i){e=tr.programs[e];var s=Zr.getTransformFeedbackVarying(e,r);if(s){if(i&&t>0){var u=q(s.name,i,t);n&&(C[n>>2]=u)}else n&&(C[n>>2]=0);o&&(C[o>>2]=s.size),a&&(C[a>>2]=s.type)}},wd:function(e,r){return Zr.getUniformBlockIndex(tr.programs[e],U(r))},yd:function(e,r,t,n){if(n)if(r>0&&(0==t||0==n))tr.recordError(1281);else{e=tr.programs[e];for(var o=[],a=0;a<r;a++)o.push(U(C[t+4*a>>2]));var i=Zr.getUniformIndices(e,o);if(i){var s=i.length;for(a=0;a<s;a++)C[n+4*a>>2]=i[a]}}else tr.recordError(1281)},hg:function(e,r){var t=0;if("]"==(r=U(r))[r.length-1]){var n=r.lastIndexOf("[");t="]"!=r[n+1]?De(r.slice(n+1)):0,r=r.slice(0,n)}var o=tr.programInfos[e]&&tr.programInfos[e].uniforms[r];return o&&t>=0&&t<o[0]?o[1]+t:-1},jg:function(e,r,t){dr(e,r,t,2)},ig:function(e,r,t){dr(e,r,t,0)},Rd:function(e,r,t){dr(e,r,t,0)},Yd:function(e,r,t){mr(e,r,t,0)},Xd:function(e,r,t){mr(e,r,t,0)},eg:function(e,r,t){t?C[t>>2]=Zr.getVertexAttribOffset(e,r):tr.recordError(1281)},gg:function(e,r,t){mr(e,r,t,2)},fg:function(e,r,t){mr(e,r,t,5)},dg:function(e,r){Zr.hint(e,r)},Mc:function(e,r,t){for(var n=or[r],o=0;o<r;o++)n[o]=C[t+4*o>>2];Zr.invalidateFramebuffer(e,n)},Lc:function(e,r,t,n,o,a,i){for(var s=or[r],u=0;u<r;u++)s[u]=C[t+4*u>>2];Zr.invalidateSubFramebuffer(e,s,n,o,a,i)},cg:function(e){var r=tr.buffers[e];return r?Zr.isBuffer(r):0},bg:function(e){return Zr.isEnabled(e)},ag:function(e){var r=tr.framebuffers[e];return r?Zr.isFramebuffer(r):0},$f:function(e){return(e=tr.programs[e])?Zr.isProgram(e):0},ze:function(e){var r=tr.queries[e];return r?Zr.isQuery(r):0},$h:function(e){var r=tr.timerQueriesEXT[e];return r?Zr.disjointTimerQueryExt.isQueryEXT(r):0},_f:function(e){var r=tr.renderbuffers[e];return r?Zr.isRenderbuffer(r):0},ed:function(e){var r=tr.samplers[e];return r?Zr.isSampler(r):0},Zf:function(e){var r=tr.shaders[e];return r?Zr.isShader(r):0},pd:function(e){return Zr.isSync(tr.syncs[e])},Yf:function(e){var r=tr.textures[e];return r?Zr.isTexture(r):0},Sc:function(e){return Zr.isTransformFeedback(tr.transformFeedbacks[e])},ge:function(e){var r=tr.vaos[e];return r?Zr.isVertexArray(r):0},Ph:function(e){var r=tr.vaos[e];return r?Zr.isVertexArray(r):0},Wf:function(e){Zr.lineWidth(e)},Vf:function(e){Zr.linkProgram(tr.programs[e]),tr.populateUniformTable(e)},Rc:function(){Zr.pauseTransformFeedback()},Uf:function(e,r){3317==e&&(tr.unpackAlignment=r),Zr.pixelStorei(e,r)},Tf:function(e,r){Zr.polygonOffset(e,r)},Oc:function(e,r,t,n){tr.recordError(1280)},Nc:function(e,r,t){tr.recordError(1280)},Yh:function(e,r){Zr.disjointTimerQueryExt.queryCounterEXT(tr.timerQueriesEXT[e],r)},Je:function(e){Zr.readBuffer(e)},Sf:function(e,r,t,n,o,a,i){if(tr.currentContext.version>=2)if(Zr.currentPixelPackBufferBinding)Zr.readPixels(e,r,t,n,o,a,i);else{var s=pr(a);Zr.readPixels(e,r,t,n,o,a,s,i>>gr(s))}else{var u=vr(a,o,t,n,i);u?Zr.readPixels(e,r,t,n,o,a,u):tr.recordError(1280)}},Rf:function(){},Qf:function(e,r,t,n){Zr.renderbufferStorage(e,r,t,n)},le:function(e,r,t,n,o){Zr.renderbufferStorageMultisample(e,r,t,n,o)},Qc:function(){Zr.resumeTransformFeedback()},Pf:function(e,r){Zr.sampleCoverage(e,!!r)},$c:function(e,r,t){Zr.samplerParameterf(tr.samplers[e],r,t)},_c:function(e,r,t){var n=O[t>>2];Zr.samplerParameterf(tr.samplers[e],r,n)},bd:function(e,r,t){Zr.samplerParameteri(tr.samplers[e],r,t)},ad:function(e,r,t){var n=C[t>>2];Zr.samplerParameteri(tr.samplers[e],r,n)},Of:function(e,r,t,n){Zr.scissor(e,r,t,n)},Nf:function(){tr.recordError(1280)},Mf:function(e,r,t,n){var o=tr.getSource(e,r,t,n);Zr.shaderSource(tr.shaders[e],o)},Lf:function(e,r,t){Zr.stencilFunc(e,r,t)},Kf:function(e,r,t,n){Zr.stencilFuncSeparate(e,r,t,n)},Jf:function(e){Zr.stencilMask(e)},If:function(e,r){Zr.stencilMaskSeparate(e,r)},Hf:function(e,r,t){Zr.stencilOp(e,r,t)},Gf:function(e,r,t,n){Zr.stencilOpSeparate(e,r,t,n)},Ff:function(e,r,t,n,o,a,i,s,u){if(tr.currentContext.version>=2)if(Zr.currentPixelUnpackBufferBinding)Zr.texImage2D(e,r,t,n,o,a,i,s,u);else if(u){var c=pr(s);Zr.texImage2D(e,r,t,n,o,a,i,s,c,u>>gr(c))}else Zr.texImage2D(e,r,t,n,o,a,i,s,null);else Zr.texImage2D(e,r,t,n,o,a,i,s,u?vr(s,i,n,o,u):null)},He:function(e,r,t,n,o,a,i,s,u,c){if(Zr.currentPixelUnpackBufferBinding)Zr.texImage3D(e,r,t,n,o,a,i,s,u,c);else if(c){var f=pr(u);Zr.texImage3D(e,r,t,n,o,a,i,s,u,f,c>>gr(f))}else Zr.texImage3D(e,r,t,n,o,a,i,s,u,null)},Ef:function(e,r,t){Zr.texParameterf(e,r,t)},Df:function(e,r,t){var n=O[t>>2];Zr.texParameterf(e,r,n)},Bf:function(e,r,t){Zr.texParameteri(e,r,t)},Af:function(e,r,t){var n=C[t>>2];Zr.texParameteri(e,r,n)},Kc:function(e,r,t,n,o){Zr.texStorage2D(e,r,t,n,o)},Ic:function(e,r,t,n,o,a){Zr.texStorage3D(e,r,t,n,o,a)},zf:function(e,r,t,n,o,a,i,s,u){if(tr.currentContext.version>=2)if(Zr.currentPixelUnpackBufferBinding)Zr.texSubImage2D(e,r,t,n,o,a,i,s,u);else if(u){var c=pr(s);Zr.texSubImage2D(e,r,t,n,o,a,i,s,c,u>>gr(c))}else Zr.texSubImage2D(e,r,t,n,o,a,i,s,null);else{var f=null;u&&(f=vr(s,i,o,a,u)),Zr.texSubImage2D(e,r,t,n,o,a,i,s,f)}},Ge:function(e,r,t,n,o,a,i,s,u,c,f){if(Zr.currentPixelUnpackBufferBinding)Zr.texSubImage3D(e,r,t,n,o,a,i,s,u,c,f);else if(f){var l=pr(c);Zr.texSubImage3D(e,r,t,n,o,a,i,s,u,c,l,f>>gr(l))}else Zr.texSubImage3D(e,r,t,n,o,a,i,s,u,c,null)},$d:function(e,r,t,n){e=tr.programs[e];for(var o=[],a=0;a<r;a++)o.push(U(C[t+4*a>>2]));Zr.transformFeedbackVaryings(e,o,n)},yf:function(e,r){Zr.uniform1f(tr.uniforms[e],r)},xf:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform1fv(tr.uniforms[e],O,t>>2,r);else{if(r<=288)for(var n=hr[r-1],o=0;o<r;++o)n[o]=O[t+4*o>>2];else n=O.subarray(t>>2,t+4*r>>2);Zr.uniform1fv(tr.uniforms[e],n)}},wf:function(e,r){Zr.uniform1i(tr.uniforms[e],r)},vf:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform1iv(tr.uniforms[e],C,t>>2,r);else{if(r<=288)for(var n=br[r-1],o=0;o<r;++o)n[o]=C[t+4*o>>2];else n=C.subarray(t>>2,t+4*r>>2);Zr.uniform1iv(tr.uniforms[e],n)}},Pd:function(e,r){Zr.uniform1ui(tr.uniforms[e],r)},Kd:function(e,r,t){Zr.uniform1uiv(tr.uniforms[e],M,t>>2,r)},uf:function(e,r,t){Zr.uniform2f(tr.uniforms[e],r,t)},tf:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform2fv(tr.uniforms[e],O,t>>2,2*r);else{if(r<=144)for(var n=hr[2*r-1],o=0;o<2*r;o+=2)n[o]=O[t+4*o>>2],n[o+1]=O[t+(4*o+4)>>2];else n=O.subarray(t>>2,t+8*r>>2);Zr.uniform2fv(tr.uniforms[e],n)}},sf:function(e,r,t){Zr.uniform2i(tr.uniforms[e],r,t)},rf:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform2iv(tr.uniforms[e],C,t>>2,2*r);else{if(r<=144)for(var n=br[2*r-1],o=0;o<2*r;o+=2)n[o]=C[t+4*o>>2],n[o+1]=C[t+(4*o+4)>>2];else n=C.subarray(t>>2,t+8*r>>2);Zr.uniform2iv(tr.uniforms[e],n)}},Od:function(e,r,t){Zr.uniform2ui(tr.uniforms[e],r,t)},Jd:function(e,r,t){Zr.uniform2uiv(tr.uniforms[e],M,t>>2,2*r)},qf:function(e,r,t,n){Zr.uniform3f(tr.uniforms[e],r,t,n)},pf:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform3fv(tr.uniforms[e],O,t>>2,3*r);else{if(r<=96)for(var n=hr[3*r-1],o=0;o<3*r;o+=3)n[o]=O[t+4*o>>2],n[o+1]=O[t+(4*o+4)>>2],n[o+2]=O[t+(4*o+8)>>2];else n=O.subarray(t>>2,t+12*r>>2);Zr.uniform3fv(tr.uniforms[e],n)}},of:function(e,r,t,n){Zr.uniform3i(tr.uniforms[e],r,t,n)},nf:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform3iv(tr.uniforms[e],C,t>>2,3*r);else{if(r<=96)for(var n=br[3*r-1],o=0;o<3*r;o+=3)n[o]=C[t+4*o>>2],n[o+1]=C[t+(4*o+4)>>2],n[o+2]=C[t+(4*o+8)>>2];else n=C.subarray(t>>2,t+12*r>>2);Zr.uniform3iv(tr.uniforms[e],n)}},Nd:function(e,r,t,n){Zr.uniform3ui(tr.uniforms[e],r,t,n)},Id:function(e,r,t){Zr.uniform3uiv(tr.uniforms[e],M,t>>2,3*r)},mf:function(e,r,t,n,o){Zr.uniform4f(tr.uniforms[e],r,t,n,o)},lf:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform4fv(tr.uniforms[e],O,t>>2,4*r);else{if(r<=72){var n=hr[4*r-1],o=O;t>>=2;for(var a=0;a<4*r;a+=4){var i=t+a;n[a]=o[i],n[a+1]=o[i+1],n[a+2]=o[i+2],n[a+3]=o[i+3]}}else n=O.subarray(t>>2,t+16*r>>2);Zr.uniform4fv(tr.uniforms[e],n)}},kf:function(e,r,t,n,o){Zr.uniform4i(tr.uniforms[e],r,t,n,o)},jf:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform4iv(tr.uniforms[e],C,t>>2,4*r);else{if(r<=72)for(var n=br[4*r-1],o=0;o<4*r;o+=4)n[o]=C[t+4*o>>2],n[o+1]=C[t+(4*o+4)>>2],n[o+2]=C[t+(4*o+8)>>2],n[o+3]=C[t+(4*o+12)>>2];else n=C.subarray(t>>2,t+16*r>>2);Zr.uniform4iv(tr.uniforms[e],n)}},Md:function(e,r,t,n,o){Zr.uniform4ui(tr.uniforms[e],r,t,n,o)},Hd:function(e,r,t){Zr.uniform4uiv(tr.uniforms[e],M,t>>2,4*r)},td:function(e,r,t){e=tr.programs[e],Zr.uniformBlockBinding(e,r,t)},hf:function(e,r,t,n){if(tr.currentContext.version>=2)Zr.uniformMatrix2fv(tr.uniforms[e],!!t,O,n>>2,4*r);else{if(r<=72)for(var o=hr[4*r-1],a=0;a<4*r;a+=4)o[a]=O[n+4*a>>2],o[a+1]=O[n+(4*a+4)>>2],o[a+2]=O[n+(4*a+8)>>2],o[a+3]=O[n+(4*a+12)>>2];else o=O.subarray(n>>2,n+16*r>>2);Zr.uniformMatrix2fv(tr.uniforms[e],!!t,o)}},te:function(e,r,t,n){Zr.uniformMatrix2x3fv(tr.uniforms[e],!!t,O,n>>2,6*r)},re:function(e,r,t,n){Zr.uniformMatrix2x4fv(tr.uniforms[e],!!t,O,n>>2,8*r)},ff:function(e,r,t,n){if(tr.currentContext.version>=2)Zr.uniformMatrix3fv(tr.uniforms[e],!!t,O,n>>2,9*r);else{if(r<=32)for(var o=hr[9*r-1],a=0;a<9*r;a+=9)o[a]=O[n+4*a>>2],o[a+1]=O[n+(4*a+4)>>2],o[a+2]=O[n+(4*a+8)>>2],o[a+3]=O[n+(4*a+12)>>2],o[a+4]=O[n+(4*a+16)>>2],o[a+5]=O[n+(4*a+20)>>2],o[a+6]=O[n+(4*a+24)>>2],o[a+7]=O[n+(4*a+28)>>2],o[a+8]=O[n+(4*a+32)>>2];else o=O.subarray(n>>2,n+36*r>>2);Zr.uniformMatrix3fv(tr.uniforms[e],!!t,o)}},se:function(e,r,t,n){Zr.uniformMatrix3x2fv(tr.uniforms[e],!!t,O,n>>2,6*r)},oe:function(e,r,t,n){Zr.uniformMatrix3x4fv(tr.uniforms[e],!!t,O,n>>2,12*r)},ef:function(e,r,t,n){if(tr.currentContext.version>=2)Zr.uniformMatrix4fv(tr.uniforms[e],!!t,O,n>>2,16*r);else{if(r<=18){var o=hr[16*r-1],a=O;n>>=2;for(var i=0;i<16*r;i+=16){var s=n+i;o[i]=a[s],o[i+1]=a[s+1],o[i+2]=a[s+2],o[i+3]=a[s+3],o[i+4]=a[s+4],o[i+5]=a[s+5],o[i+6]=a[s+6],o[i+7]=a[s+7],o[i+8]=a[s+8],o[i+9]=a[s+9],o[i+10]=a[s+10],o[i+11]=a[s+11],o[i+12]=a[s+12],o[i+13]=a[s+13],o[i+14]=a[s+14],o[i+15]=a[s+15]}}else o=O.subarray(n>>2,n+64*r>>2);Zr.uniformMatrix4fv(tr.uniforms[e],!!t,o)}},pe:function(e,r,t,n){Zr.uniformMatrix4x2fv(tr.uniforms[e],!!t,O,n>>2,8*r)},ne:function(e,r,t,n){Zr.uniformMatrix4x3fv(tr.uniforms[e],!!t,O,n>>2,12*r)},df:function(e){Zr.useProgram(tr.programs[e])},cf:function(e){Zr.validateProgram(tr.programs[e])},bf:function(e,r){Zr.vertexAttrib1f(e,r)},af:function(e,r){Zr.vertexAttrib1f(e,O[r>>2])},$e:function(e,r,t){Zr.vertexAttrib2f(e,r,t)},_e:function(e,r){Zr.vertexAttrib2f(e,O[r>>2],O[r+4>>2])},Ze:function(e,r,t,n){Zr.vertexAttrib3f(e,r,t,n)},Ye:function(e,r){Zr.vertexAttrib3f(e,O[r>>2],O[r+4>>2],O[r+8>>2])},We:function(e,r,t,n,o){Zr.vertexAttrib4f(e,r,t,n,o)},Ve:function(e,r){Zr.vertexAttrib4f(e,O[r>>2],O[r+4>>2],O[r+8>>2],O[r+12>>2])},Xc:function(e,r){Zr.vertexAttribDivisor(e,r)},Kh:function(e,r){Zr.vertexAttribDivisor(e,r)},Re:function(e,r){Zr.vertexAttribDivisor(e,r)},Se:function(e,r){Zr.vertexAttribDivisor(e,r)},Gc:function(e,r){Zr.vertexAttribDivisor(e,r)},Vd:function(e,r,t,n,o){Zr.vertexAttribI4i(e,r,t,n,o)},Td:function(e,r){Zr.vertexAttribI4i(e,C[r>>2],C[r+4>>2],C[r+8>>2],C[r+12>>2])},Ud:function(e,r,t,n,o){Zr.vertexAttribI4ui(e,r,t,n,o)},Sd:function(e,r){Zr.vertexAttribI4ui(e,M[r>>2],M[r+4>>2],M[r+8>>2],M[r+12>>2])},Zd:function(e,r,t,n,o){Zr.vertexAttribIPointer(e,r,t,n,o)},Ue:function(e,r,t,n,o,a){Zr.vertexAttribPointer(e,r,t,!!n,o,a)},Te:function(e,r,t,n){Zr.viewport(e,r,t,n)},ld:function(e,r,t,n){Zr.waitSync(tr.syncs[e],r,nr(t,n))},O:function(e,r){return function(e,r){throw yt(e,r||1),"longjmp"}(e,r)},ci:function(e,r,t){F.copyWithin(e,r,r+t)},Mg:function(e,r,t){return function(e,r){return Ue.fullscreenEnabled()?(e=He(e))?e.requestFullscreen||e.webkitRequestFullscreen?Ue.canPerformEventHandlerRequests()?Je(e,r):r.deferUntilInEventHandler?(Ue.deferCall(Je,1,[e,r]),1):-2:-3:-4:-1}(e,{scaleMode:C[t>>2],canvasResolutionScaleMode:C[t+4>>2],filteringMode:C[t+8>>2],deferUntilInEventHandler:r,canvasResizedCallback:C[t+12>>2],canvasResizedCallbackUserData:C[t+16>>2]})},gf:function(e,r){return(e=He(e))?e.requestPointerLock||e.msRequestPointerLock?Ue.canPerformEventHandlerRequests()?er(e):r?(Ue.deferCall(er,2,[e]),1):-2:-1:-4},ta:function(e){e>>>=0;var r=F.length;if(e>2147483648)return!1;for(var t,n,o=1;o<=4;o*=2){var a=r*(1+.2/o);if(a=Math.min(a,e+100663296),Er(Math.min(2147483648,((t=Math.max(16777216,e,a))%(n=65536)>0&&(t+=n-t%n),t))))return!0}return!1},sb:We,fh:function(e,r,t){return(e=He(e))?(e.style.width=r+"px",e.style.height=t+"px",0):-4},oc:function(e,r,t,n,o){return Ue.fullscreenEnabled()?(e=He(e))?(yr(e,r,t,n,19,"fullscreenchange"),yr(e,r,t,n,19,"webkitfullscreenchange"),0):-4:-1},rc:function(e,r,t,n,o){return wr(e,r,t,n,2,"keydown"),0},qc:function(e,r,t,n,o){return wr(e,r,t,n,1,"keypress"),0},pc:function(e,r,t,n,o){return wr(e,r,t,n,3,"keyup"),0},Cb:function(e,r,t,n,o){Ie(W.get(e),r,t,n,o)},Ac:function(e,r,t,n,o){return kr(e,r,t,n,5,"mousedown"),0},zc:function(e,r,t,n,o){return kr(e,r,t,n,8,"mousemove"),0},yc:function(e,r,t,n,o){return kr(e,r,t,n,6,"mouseup"),0},sc:function(e,r,t,n,o){return _r(e,r,t,n,25,"touchcancel"),0},tc:function(e,r,t,n,o){return _r(e,r,t,n,23,"touchend"),0},uc:function(e,r,t,n,o){return _r(e,r,t,n,24,"touchmove"),0},vc:function(e,r,t,n,o){return _r(e,r,t,n,22,"touchstart"),0},wc:function(e,r,t,n,o){return void 0!==(e=He(e)).onwheel?(function(e,r,t,n,o,a,i){Ue.wheelEvent||(Ue.wheelEvent=ut(96));var s={target:e,allowsDeferredCalls:!0,eventTypeString:a,callbackfunc:n,handlerFunc:function(t){var a=t||event,i=Ue.wheelEvent;xr(i,a,e),B[i+64>>3]=a.deltaX,B[i+72>>3]=a.deltaY,B[i+80>>3]=a.deltaZ,C[i+88>>2]=a.deltaMode,W.get(n)(o,i,r)&&a.preventDefault()},useCapture:t};Ue.registerOrRemoveHandler(s)}(e,r,t,n,9,"wheel"),0):-1},gi:function(e){for(var r=Pe();Pe()-r<e;);},lb:function(){return tr.currentContext&&tr.currentContext.GLctx?tr.currentContext.defaultFbo?(tr.blitOffscreenFramebuffer(tr.currentContext),0):tr.currentContext.attributes.explicitSwapControl?0:-3:-3},Uc:function(e,r){return t=e,o=C[6+(n=r>>2)],a={alpha:!!C[n+0],depth:!!C[n+1],stencil:!!C[n+2],antialias:!!C[n+3],premultipliedAlpha:!!C[n+4],preserveDrawingBuffer:!!C[n+5],powerPreference:Sr[o],failIfMajorPerformanceCaveat:!!C[n+7],majorVersion:C[n+8],minorVersion:C[n+9],enableExtensionsByDefault:C[n+10],explicitSwapControl:C[n+11],proxyContextToMainThread:C[n+12],renderViaOffscreenBackBuffer:C[n+13]},(i=Ge(t))?(a.explicitSwapControl&&!a.renderViaOffscreenBackBuffer&&(a.renderViaOffscreenBackBuffer=!0),tr.createContext(i,a)):0;var t,n,o,a,i},hc:function(e){tr.currentContext==e&&(tr.currentContext=0),tr.deleteContext(e)},dd:function(e){for(var r=e>>2,t=0;t<14;++t)C[r+t]=0;C[r+0]=C[r+1]=C[r+3]=C[r+4]=C[r+8]=C[r+10]=1},Jc:Dr,ei:function(e,r){try{var t=0;return Pr().forEach(function(n,o){var a=r+t;C[e+4*o>>2]=a,V(n,a),t+=n.length+1}),0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),e.errno}},fi:function(e,r){try{var t=Pr();C[e>>2]=t.length;var n=0;return t.forEach(function(e){n+=e.length+1}),C[r>>2]=n,0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),e.errno}},ua:function(e){try{var r=xe.getStreamFromFD(e);return we.close(r),0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),e.errno}},pi:function(e,r){try{var t=xe.getStreamFromFD(e),n=t.tty?2:we.isDir(t.mode)?3:we.isLink(t.mode)?7:4;return P[r>>0]=n,0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),e.errno}},ub:function(e,r,t,n){try{var o=xe.getStreamFromFD(e),a=xe.doReadv(o,r,t);return C[n>>2]=a,0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),e.errno}},Cc:function(e,r,t,n,o){try{var a=xe.getStreamFromFD(e),i=4294967296*t+(r>>>0);return i<=-9007199254740992||i>=9007199254740992?-61:(we.llseek(a,i,n),fe=[a.position>>>0,(ce=a.position,+Math.abs(ce)>=1?ce>0?(0|Math.min(+Math.floor(ce/4294967296),4294967295))>>>0:~~+Math.ceil((ce-+(~~ce>>>0))/4294967296)>>>0:0)],C[o>>2]=fe[0],C[o+4>>2]=fe[1],a.getdents&&0===i&&0===n&&(a.getdents=null),0)}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),e.errno}},_a:function(e,r,t,n){try{var o=xe.getStreamFromFD(e),a=xe.doWritev(o,r,t);return C[n>>2]=a,0}catch(e){return void 0!==we&&e instanceof we.ErrnoError||ae(e),e.errno}},Ta:function e(r){e.buffer||(e.buffer=ut(256),Fr[0]="Success",Fr[-1]="Invalid value for 'ai_flags' field",Fr[-2]="NAME or SERVICE is unknown",Fr[-3]="Temporary failure in name resolution",Fr[-4]="Non-recoverable failure in name res",Fr[-6]="'ai_family' not supported",Fr[-7]="'ai_socktype' not supported",Fr[-8]="SERVICE not supported for 'ai_socktype'",Fr[-10]="Memory allocation failure",Fr[-11]="System error returned in 'errno'",Fr[-12]="Argument buffer overflow");var t="Unknown error";return r in Fr&&(t=Fr[r].length>255?"Message too long":Fr[r]),V(t,e.buffer),e.buffer},v:function(){return 0|S()},Ua:function(e,r,t,n){var o,a=0,i=0,s=0,u=0,c=0,f=0;function l(e,r,t,n,o,a){var i,s,u;return s=10===e?28:16,o=10===e?Re(o):Te(o),D(!Me(i=ut(s),e,o,a)),u=ut(32),C[u+4>>2]=e,C[u+8>>2]=r,C[u+12>>2]=t,C[u+24>>2]=n,C[u+20>>2]=i,C[u+16>>2]=10===e?28:16,C[u+28>>2]=0,u}if(t&&(s=C[t>>2],u=C[t+4>>2],c=C[t+8>>2],f=C[t+12>>2]),c&&!f&&(f=2===c?17:6),!c&&f&&(c=17===f?2:1),0===f&&(f=6),0===c&&(c=1),!e&&!r)return-2;if(-1088&s)return-1;if(0!==t&&2&C[t>>2]&&!e)return-1;if(32&s)return-2;if(0!==c&&1!==c&&2!==c)return-7;if(0!==u&&2!==u&&10!==u)return-6;if(r&&(r=U(r),i=parseInt(r,10),isNaN(i)))return 1024&s?-2:-8;if(!e)return 0===u&&(u=2),0==(1&s)&&(a=2===u?mt(2130706433):[0,0,0,1]),o=l(u,c,f,null,a,i),C[n>>2]=o,0;if(null!==(a=Le(e=U(e))))if(0===u||2===u)u=2;else{if(!(10===u&&8&s))return-2;a=[0,0,mt(65535),a],u=10}else if(null!==(a=Ae(e))){if(0!==u&&10!==u)return-2;u=10}return null!=a?(o=l(u,c,f,e,a,i),C[n>>2]=o,0):4&s?-2:(a=Le(e=Fe.lookup_name(e)),0===u?u=2:10===u&&(a=[0,0,mt(65535),a]),o=l(u,c,f,null,a,i),C[n>>2]=o,0)},Yb:function(e,r,t,n,o,a,i){var s=Ce(e,r);if(s.errno)return-6;var u=s.port,c=s.addr,f=!1;if(t&&n){var l;if(1&i||!(l=Fe.lookup_addr(c))){if(8&i)return-2}else c=l;q(c,t,n)+1>=n&&(f=!0)}return o&&a&&q(u=""+u,o,a)+1>=a&&(f=!0),f?-12:0},Nb:function(e){var r=Date.now();return C[e>>2]=r/1e3|0,C[e+4>>2]=r%1e3*1e3|0,0},c:function(e){Zr.activeTexture(e)},La:function(e,r){Zr.attachShader(tr.programs[e],tr.shaders[r])},db:function(e){Zr.beginTransformFeedback(e)},Bb:function(e,r,t){Zr.bindAttribLocation(tr.programs[e],r,U(t))},b:function(e,r){35051==e?Zr.currentPixelPackBufferBinding=r:35052==e&&(Zr.currentPixelUnpackBufferBinding=r),Zr.bindBuffer(e,tr.buffers[r])},P:function(e,r,t){Zr.bindBufferBase(e,r,tr.buffers[t])},e:function(e,r){Zr.bindFramebuffer(e,r?tr.framebuffers[r]:tr.currentContext.defaultFbo)},aa:function(e,r){Zr.bindRenderbuffer(e,tr.renderbuffers[r])},a:function(e,r){Zr.bindTexture(e,tr.textures[r])},k:function(e){Zr.bindVertexArray(tr.vaos[e])},E:function(e){Zr.blendEquation(e)},T:function(e,r){Zr.blendFunc(e,r)},w:function(e,r,t,n){Zr.blendFuncSeparate(e,r,t,n)},ja:function(e,r,t,n,o,a,i,s,u,c){Zr.blitFramebuffer(e,r,t,n,o,a,i,s,u,c)},o:function(e,r,t,n){tr.currentContext.version>=2?t?Zr.bufferData(e,F,n,t,r):Zr.bufferData(e,r,n):Zr.bufferData(e,t?F.subarray(t,t+r):r,n)},L:function(e,r,t,n){tr.currentContext.version>=2?Zr.bufferSubData(e,r,F,n,t):Zr.bufferSubData(e,r,F.subarray(n,n+t))},N:function(e){return Zr.checkFramebufferStatus(e)},K:function(e){Zr.clear(e)},ra:function(e,r,t){Zr.clearBufferfv(e,r,O,t>>2)},R:function(e,r,t,n){Zr.clearColor(e,r,t,n)},ba:function(e){Zr.clearDepth(e)},Q:function(e,r,t,n){Zr.colorMask(!!e,!!r,!!t,!!n)},Na:function(e){Zr.compileShader(tr.shaders[e])},Gb:function(e,r,t,n,o,a,i,s){tr.currentContext.version>=2?Zr.currentPixelUnpackBufferBinding?Zr.compressedTexImage2D(e,r,t,n,o,a,i,s):Zr.compressedTexImage2D(e,r,t,n,o,a,F,s,i):Zr.compressedTexImage2D(e,r,t,n,o,a,s?F.subarray(s,s+i):null)},Hi:function(e,r,t,n,o,a,i,s,u){Zr.currentPixelUnpackBufferBinding?Zr.compressedTexImage3D(e,r,t,n,o,a,i,s,u):Zr.compressedTexImage3D(e,r,t,n,o,a,i,F,u,s)},Ki:function(e,r,t,n,o,a,i,s,u){tr.currentContext.version>=2?Zr.currentPixelUnpackBufferBinding?Zr.compressedTexSubImage2D(e,r,t,n,o,a,i,s,u):Zr.compressedTexSubImage2D(e,r,t,n,o,a,i,F,u,s):Zr.compressedTexSubImage2D(e,r,t,n,o,a,i,u?F.subarray(u,u+s):null)},fb:function(e,r,t,n,o,a,i,s,u,c,f){Zr.currentPixelUnpackBufferBinding?Zr.compressedTexSubImage3D(e,r,t,n,o,a,i,s,u,c,f):Zr.compressedTexSubImage3D(e,r,t,n,o,a,i,s,u,F,f,c)},Gi:function(e,r,t,n,o){Zr.copyBufferSubData(e,r,t,n,o)},$a:function(e,r,t,n,o,a,i,s){Zr.copyTexSubImage2D(e,r,t,n,o,a,i,s)},Db:function(){var e=tr.getNewId(tr.programs),r=Zr.createProgram();return r.name=e,tr.programs[e]=r,e},Pa:function(e){var r=tr.getNewId(tr.shaders);return tr.shaders[r]=Zr.createShader(e),r},sa:function(e){Zr.cullFace(e)},M:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.buffers[n];o&&(Zr.deleteBuffer(o),o.name=0,tr.buffers[n]=null,n==Zr.currentPixelPackBufferBinding&&(Zr.currentPixelPackBufferBinding=0),n==Zr.currentPixelUnpackBufferBinding&&(Zr.currentPixelUnpackBufferBinding=0))}},H:function(e,r){for(var t=0;t<e;++t){var n=C[r+4*t>>2],o=tr.framebuffers[n];o&&(Zr.deleteFramebuffer(o),o.name=0,tr.framebuffers[n]=null)}},S:function(e){if(e){var r=tr.programs[e];r?(Zr.deleteProgram(r),r.name=0,tr.programs[e]=null,tr.programInfos[e]=null):tr.recordError(1281)}},Y:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.renderbuffers[n];o&&(Zr.deleteRenderbuffer(o),o.name=0,tr.renderbuffers[n]=null)}},J:function(e){if(e){var r=tr.shaders[e];r?(Zr.deleteShader(r),tr.shaders[e]=null):tr.recordError(1281)}},D:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2],o=tr.textures[n];o&&(Zr.deleteTexture(o),o.name=0,tr.textures[n]=null)}},fa:function(e,r){for(var t=0;t<e;t++){var n=C[r+4*t>>2];Zr.deleteVertexArray(tr.vaos[n]),tr.vaos[n]=null}},_:function(e){Zr.depthFunc(e)},I:function(e){Zr.depthMask(!!e)},i:function(e){Zr.disable(e)},n:function(e){Zr.disableVertexAttribArray(e)},A:function(e,r,t){Zr.drawArrays(e,r,t)},xa:function(e,r,t,n){Zr.drawArraysInstanced(e,r,t,n)},Ga:function(e,r){for(var t=or[e],n=0;n<e;n++)t[n]=C[r+4*n>>2];Zr.drawBuffers(t)},ca:ar,Ha:function(e,r,t,n,o){Zr.drawElementsInstanced(e,r,t,n,o)},p:function(e){Zr.enable(e)},j:function(e){Zr.enableVertexAttribArray(e)},cb:function(){Zr.endTransformFeedback()},Qi:function(){Zr.finish()},$:function(e,r,t,n){Zr.framebufferRenderbuffer(e,r,t,tr.renderbuffers[n])},z:function(e,r,t,n,o){Zr.framebufferTexture2D(e,r,t,tr.textures[n],o)},Ii:function(e,r,t,n,o){Zr.framebufferTextureLayer(e,r,tr.textures[t],n,o)},Hb:function(e){Zr.frontFace(e)},C:function(e,r){ir(e,r,"createBuffer",tr.buffers)},F:function(e,r){ir(e,r,"createFramebuffer",tr.framebuffers)},ia:function(e,r){ir(e,r,"createRenderbuffer",tr.renderbuffers)},u:function(e,r){ir(e,r,"createTexture",tr.textures)},X:function(e,r){ir(e,r,"createVertexArray",tr.vaos)},U:function(e){Zr.generateMipmap(e)},Ib:function(){var e=Zr.getError()||tr.lastError;return tr.lastError=0,e},Di:function(e,r){cr(e,r,2)},ma:function(e,r){cr(e,r,0)},zb:function(e,r,t,n){var o=Zr.getProgramInfoLog(tr.programs[e]);null===o&&(o="(unknown error)");var a=r>0&&n?q(o,n,r):0;t&&(C[t>>2]=a)},Ka:function(e,r,t){if(t)if(e>=tr.counter)tr.recordError(1281);else{var n=tr.programInfos[e];if(n)if(35716==r){var o=Zr.getProgramInfoLog(tr.programs[e]);null===o&&(o="(unknown error)"),C[t>>2]=o.length+1}else if(35719==r)C[t>>2]=n.maxUniformLength;else if(35722==r){if(-1==n.maxAttributeLength){e=tr.programs[e];var a=Zr.getProgramParameter(e,35721);n.maxAttributeLength=0;for(var i=0;i<a;++i){var s=Zr.getActiveAttrib(e,i);n.maxAttributeLength=Math.max(n.maxAttributeLength,s.name.length+1)}}C[t>>2]=n.maxAttributeLength}else if(35381==r){if(-1==n.maxUniformBlockNameLength){e=tr.programs[e];var u=Zr.getProgramParameter(e,35382);for(n.maxUniformBlockNameLength=0,i=0;i<u;++i){var c=Zr.getActiveUniformBlockName(e,i);n.maxUniformBlockNameLength=Math.max(n.maxUniformBlockNameLength,c.length+1)}}C[t>>2]=n.maxUniformBlockNameLength}else C[t>>2]=Zr.getProgramParameter(tr.programs[e],r);else tr.recordError(1282)}else tr.recordError(1281)},Ma:function(e,r,t,n){var o=Zr.getShaderInfoLog(tr.shaders[e]);null===o&&(o="(unknown error)");var a=r>0&&n?q(o,n,r):0;t&&(C[t>>2]=a)},qa:function(e,r,t){if(t)if(35716==r){var n=Zr.getShaderInfoLog(tr.shaders[e]);null===n&&(n="(unknown error)");var o=n?n.length+1:0;C[t>>2]=o}else if(35720==r){var a=Zr.getShaderSource(tr.shaders[e]),i=a?a.length+1:0;C[t>>2]=i}else C[t>>2]=Zr.getShaderParameter(tr.shaders[e],r);else tr.recordError(1281)},Qa:function(e){if(tr.stringCache[e])return tr.stringCache[e];var r;switch(e){case 7939:var t=Zr.getSupportedExtensions()||[];r=lr((t=t.concat(t.map(function(e){return"GL_"+e}))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var n=Zr.getParameter(e);n||tr.recordError(1280),r=lr(n);break;case 7938:var o=Zr.getParameter(7938);r=lr(o=tr.currentContext.version>=2?"OpenGL ES 3.0 ("+o+")":"OpenGL ES 2.0 ("+o+")");break;case 35724:var a=Zr.getParameter(35724),i=a.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==i&&(3==i[1].length&&(i[1]=i[1]+"0"),a="OpenGL ES GLSL ES "+i[1]+" ("+a+")"),r=lr(a);break;default:return tr.recordError(1280),0}return tr.stringCache[e]=r,r},Ei:function(e,r){if(tr.currentContext.version<2)return tr.recordError(1282),0;var t=tr.stringiCache[e];if(t)return r<0||r>=t.length?(tr.recordError(1281),0):t[r];switch(e){case 7939:var n=Zr.getSupportedExtensions()||[];return n=(n=n.concat(n.map(function(e){return"GL_"+e}))).map(function(e){return lr(e)}),t=tr.stringiCache[e]=n,r<0||r>=t.length?(tr.recordError(1281),0):t[r];default:return tr.recordError(1280),0}},Ai:function(e,r){return Zr.getUniformBlockIndex(tr.programs[e],U(r))},va:function(e,r){var t=0;if("]"==(r=U(r))[r.length-1]){var n=r.lastIndexOf("[");t="]"!=r[n+1]?De(r.slice(n+1)):0,r=r.slice(0,n)}var o=tr.programInfos[e]&&tr.programInfos[e].uniforms[r];return o&&t>=0&&t<o[0]?o[1]+t:-1},Oi:function(e,r,t){for(var n=or[r],o=0;o<r;o++)n[o]=C[t+4*o>>2];Zr.invalidateFramebuffer(e,n)},Ab:function(e){Zr.linkProgram(tr.programs[e]),tr.populateUniformTable(e)},la:function(e,r){3317==e&&(tr.unpackAlignment=r),Zr.pixelStorei(e,r)},ka:function(e){Zr.readBuffer(e)},eb:function(e,r,t,n,o,a,i){if(tr.currentContext.version>=2)if(Zr.currentPixelPackBufferBinding)Zr.readPixels(e,r,t,n,o,a,i);else{var s=pr(a);Zr.readPixels(e,r,t,n,o,a,s,i>>gr(s))}else{var u=vr(a,o,t,n,i);u?Zr.readPixels(e,r,t,n,o,a,u):tr.recordError(1280)}},ha:function(e,r,t,n){Zr.renderbufferStorage(e,r,t,n)},Da:function(e,r,t,n,o){Zr.renderbufferStorageMultisample(e,r,t,n,o)},W:function(e,r,t,n){Zr.scissor(e,r,t,n)},Oa:function(e,r,t,n){var o=tr.getSource(e,r,t,n);Zr.shaderSource(tr.shaders[e],o)},q:function(e,r,t,n,o,a,i,s,u){if(tr.currentContext.version>=2)if(Zr.currentPixelUnpackBufferBinding)Zr.texImage2D(e,r,t,n,o,a,i,s,u);else if(u){var c=pr(s);Zr.texImage2D(e,r,t,n,o,a,i,s,c,u>>gr(c))}else Zr.texImage2D(e,r,t,n,o,a,i,s,null);else Zr.texImage2D(e,r,t,n,o,a,i,s,u?vr(s,i,n,o,u):null)},Fa:function(e,r,t,n,o,a,i,s,u,c){if(Zr.currentPixelUnpackBufferBinding)Zr.texImage3D(e,r,t,n,o,a,i,s,u,c);else if(c){var f=pr(u);Zr.texImage3D(e,r,t,n,o,a,i,s,u,f,c>>gr(f))}else Zr.texImage3D(e,r,t,n,o,a,i,s,u,null)},g:function(e,r,t){Zr.texParameterf(e,r,t)},d:function(e,r,t){Zr.texParameteri(e,r,t)},Li:function(e,r,t,n,o){Zr.texStorage2D(e,r,t,n,o)},Ea:function(e,r,t,n,o,a,i,s,u){if(tr.currentContext.version>=2)if(Zr.currentPixelUnpackBufferBinding)Zr.texSubImage2D(e,r,t,n,o,a,i,s,u);else if(u){var c=pr(s);Zr.texSubImage2D(e,r,t,n,o,a,i,s,c,u>>gr(c))}else Zr.texSubImage2D(e,r,t,n,o,a,i,s,null);else{var f=null;u&&(f=vr(s,i,o,a,u)),Zr.texSubImage2D(e,r,t,n,o,a,i,s,f)}},Ra:function(e,r,t,n,o,a,i,s,u,c,f){if(Zr.currentPixelUnpackBufferBinding)Zr.texSubImage3D(e,r,t,n,o,a,i,s,u,c,f);else if(f){var l=pr(c);Zr.texSubImage3D(e,r,t,n,o,a,i,s,u,c,l,f>>gr(l))}else Zr.texSubImage3D(e,r,t,n,o,a,i,s,u,c,null)},Ci:function(e,r,t,n){e=tr.programs[e];for(var o=[],a=0;a<r;a++)o.push(U(C[t+4*a>>2]));Zr.transformFeedbackVaryings(e,o,n)},f:function(e,r){Zr.uniform1f(tr.uniforms[e],r)},s:function(e,r){Zr.uniform1i(tr.uniforms[e],r)},gb:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform1iv(tr.uniforms[e],C,t>>2,r);else{if(r<=288)for(var n=br[r-1],o=0;o<r;++o)n[o]=C[t+4*o>>2];else n=C.subarray(t>>2,t+4*r>>2);Zr.uniform1iv(tr.uniforms[e],n)}},Eb:function(e,r){Zr.uniform1ui(tr.uniforms[e],r)},bb:function(e,r,t){Zr.uniform2f(tr.uniforms[e],r,t)},l:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform2fv(tr.uniforms[e],O,t>>2,2*r);else{if(r<=144)for(var n=hr[2*r-1],o=0;o<2*r;o+=2)n[o]=O[t+4*o>>2],n[o+1]=O[t+(4*o+4)>>2];else n=O.subarray(t>>2,t+8*r>>2);Zr.uniform2fv(tr.uniforms[e],n)}},Aa:function(e,r,t){Zr.uniform2i(tr.uniforms[e],r,t)},na:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform2iv(tr.uniforms[e],C,t>>2,2*r);else{if(r<=144)for(var n=br[2*r-1],o=0;o<2*r;o+=2)n[o]=C[t+4*o>>2],n[o+1]=C[t+(4*o+4)>>2];else n=C.subarray(t>>2,t+8*r>>2);Zr.uniform2iv(tr.uniforms[e],n)}},ab:function(e,r,t,n){Zr.uniform3f(tr.uniforms[e],r,t,n)},Z:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform3fv(tr.uniforms[e],O,t>>2,3*r);else{if(r<=96)for(var n=hr[3*r-1],o=0;o<3*r;o+=3)n[o]=O[t+4*o>>2],n[o+1]=O[t+(4*o+4)>>2],n[o+2]=O[t+(4*o+8)>>2];else n=O.subarray(t>>2,t+12*r>>2);Zr.uniform3fv(tr.uniforms[e],n)}},za:function(e,r,t,n){Zr.uniform3i(tr.uniforms[e],r,t,n)},wa:function(e,r,t,n,o){Zr.uniform4f(tr.uniforms[e],r,t,n,o)},x:function(e,r,t){if(tr.currentContext.version>=2)Zr.uniform4fv(tr.uniforms[e],O,t>>2,4*r);else{if(r<=72){var n=hr[4*r-1],o=O;t>>=2;for(var a=0;a<4*r;a+=4){var i=t+a;n[a]=o[i],n[a+1]=o[i+1],n[a+2]=o[i+2],n[a+3]=o[i+3]}}else n=O.subarray(t>>2,t+16*r>>2);Zr.uniform4fv(tr.uniforms[e],n)}},ya:function(e,r,t,n,o){Zr.uniform4i(tr.uniforms[e],r,t,n,o)},zi:function(e,r,t){e=tr.programs[e],Zr.uniformBlockBinding(e,r,t)},xb:function(e,r,t,n){if(tr.currentContext.version>=2)Zr.uniformMatrix2fv(tr.uniforms[e],!!t,O,n>>2,4*r);else{if(r<=72)for(var o=hr[4*r-1],a=0;a<4*r;a+=4)o[a]=O[n+4*a>>2],o[a+1]=O[n+(4*a+4)>>2],o[a+2]=O[n+(4*a+8)>>2],o[a+3]=O[n+(4*a+12)>>2];else o=O.subarray(n>>2,n+16*r>>2);Zr.uniformMatrix2fv(tr.uniforms[e],!!t,o)}},wb:function(e,r,t,n){if(tr.currentContext.version>=2)Zr.uniformMatrix3fv(tr.uniforms[e],!!t,O,n>>2,9*r);else{if(r<=32)for(var o=hr[9*r-1],a=0;a<9*r;a+=9)o[a]=O[n+4*a>>2],o[a+1]=O[n+(4*a+4)>>2],o[a+2]=O[n+(4*a+8)>>2],o[a+3]=O[n+(4*a+12)>>2],o[a+4]=O[n+(4*a+16)>>2],o[a+5]=O[n+(4*a+20)>>2],o[a+6]=O[n+(4*a+24)>>2],o[a+7]=O[n+(4*a+28)>>2],o[a+8]=O[n+(4*a+32)>>2];else o=O.subarray(n>>2,n+36*r>>2);Zr.uniformMatrix3fv(tr.uniforms[e],!!t,o)}},m:function(e,r,t,n){if(tr.currentContext.version>=2)Zr.uniformMatrix4fv(tr.uniforms[e],!!t,O,n>>2,16*r);else{if(r<=18){var o=hr[16*r-1],a=O;n>>=2;for(var i=0;i<16*r;i+=16){var s=n+i;o[i]=a[s],o[i+1]=a[s+1],o[i+2]=a[s+2],o[i+3]=a[s+3],o[i+4]=a[s+4],o[i+5]=a[s+5],o[i+6]=a[s+6],o[i+7]=a[s+7],o[i+8]=a[s+8],o[i+9]=a[s+9],o[i+10]=a[s+10],o[i+11]=a[s+11],o[i+12]=a[s+12],o[i+13]=a[s+13],o[i+14]=a[s+14],o[i+15]=a[s+15]}}else o=O.subarray(n>>2,n+64*r>>2);Zr.uniformMatrix4fv(tr.uniforms[e],!!t,o)}},ea:function(e){Zr.useProgram(tr.programs[e])},B:function(e,r,t,n,o){Zr.vertexAttrib4f(e,r,t,n,o)},V:function(e,r){Zr.vertexAttrib4f(e,O[r>>2],O[r+4>>2],O[r+8>>2],O[r+12>>2])},G:function(e,r){Zr.vertexAttribDivisor(e,r)},Ui:function(e,r,t,n,o){Zr.vertexAttribI4ui(e,r,t,n,o)},Ia:function(e,r,t,n,o){Zr.vertexAttribIPointer(e,r,t,n,o)},h:function(e,r,t,n,o,a){Zr.vertexAttribPointer(e,r,t,!!n,o,a)},r:function(e,r,t,n){Zr.viewport(e,r,t,n)},Mb:function e(r,t){var n=new Date(1e3*C[r>>2]);C[t>>2]=n.getUTCSeconds(),C[t+4>>2]=n.getUTCMinutes(),C[t+8>>2]=n.getUTCHours(),C[t+12>>2]=n.getUTCDate(),C[t+16>>2]=n.getUTCMonth(),C[t+20>>2]=n.getUTCFullYear()-1900,C[t+24>>2]=n.getUTCDay(),C[t+36>>2]=0,C[t+32>>2]=0;var o=Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0),a=(n.getTime()-o)/864e5|0;return C[t+28>>2]=a,e.GMTString||(e.GMTString=H("GMT")),C[t+40>>2]=e.GMTString,t},Bh:function(){return Mr.create_input(function(e){e.connect(Mr.driver.get_node())})},Cf:function(){if(Mr.input){const e=Mr.input.mediaStream.getTracks();for(let r=0;r<e.length;r++)e[r].stop();Mr.input.disconnect(),Mr.input=null}},oj:function(e,r,t,n){const o=Tr.get_func(t),a=Tr.get_func(n);return Mr.init(e,r,o,a)},pj:function(){return window.AudioContext||window.webkitAudioContext?1:0},Ji:function(){Mr.ctx&&"running"!==Mr.ctx.state&&Mr.ctx.resume()},Ad:function(e,r){return Or.create(e,r)},xc:function(e,r,t,n,o){const a=Tr.get_func(o);Or.start(e,r,t,n,a)},ac:function(e,r){Tr.stringToHeap(`#${Br.canvas.id}`,e,r)},Bc:function(){return Br.resize_on_start?1:0},yi:function(e,r){Tr.stringToHeap(Br.locale,e,r)},fc:function(e){window.alert(Tr.parseString(e))},ti:function(e,r){const t=Br.canvas.getBoundingClientRect();Tr.setHeapValue(e,t.x,"i32"),Tr.setHeapValue(r,t.y,"i32")},qb:function(){Br.canvas.focus()},Be:function(){return document.activeElement===Br.canvas},zd:function(e){const r=Tr.get_func(e);try{navigator.clipboard.readText().then(function(e){const t=Tr.allocString(e);r(t),Tr.free(t)}).catch(function(e){})}catch(e){}},Ld:function(e){const r=Tr.parseString(e);return navigator.clipboard&&navigator.clipboard.writeText?(navigator.clipboard.writeText(r).catch(function(e){Tr.error("Setting OS clipboard is only possible from an input callback for the HTML5 plafrom. Exception:",e)}),0):1},Xe:function(){return!Ir.visible},pb:function(e,r,t,n,o){const a=Tr.parseString(e),i=Ir.cursors[a];if(t>0){const e=new Blob([Tr.heapCopy(F,r,t)],{type:"image/png"}),i=URL.createObjectURL(e);Ir.cursors[a]={url:i,x:n,y:o}}else delete Ir.cursors[a];a===Ir.shape&&Ir.set_shape(Ir.shape),i&&URL.revokeObjectURL(i.url)},Xf:function(e){Ir.set_shape(Tr.parseString(e))},Ya:function(e){const r=0!==e;r!==Ir.visible&&(Ir.visible=r,r?Ir.set_shape(Ir.shape):Ir.set_style("none"))},lc:function(e){const r=Tr.get_func(e),t=Br.canvas;Nr.add(t,"dragover",function(e){e.preventDefault()},!1),Nr.add(t,"drop",Ur.handler(function(e){const t=e||[];if(!t.length)return;const n=t.length,o=Tr.allocStringArray(t);r(o,n),Tr.freeStringArray(o,n)}))},kc:function(e){const r=Tr.get_func(e);jr.init(r)},ic:function(){return jr.sample(),0},fe:function(){return jr.get_samples().length},Wd:function(e,r,t,n,o,a){const i=jr.get_sample(e);if(!i||!i.connected)return 1;const s=i.buttons,u=s.length<16?s.length:16;for(let e=0;e<u;e++)Tr.setHeapValue(r+(e<<2),s[e],"float");Tr.setHeapValue(t,u,"i32");const c=i.axes,f=c.length<10?c.length:10;for(let e=0;e<f;e++)Tr.setHeapValue(n+(e<<2),c[e],"float");Tr.setHeapValue(o,f,"i32");const l=i.standard?1:0;return Tr.setHeapValue(a,l,"i32"),0},od:function(){const e=navigator.platform||"";return-1!==["Windows","Win64","Win32","WinCE"].indexOf(e)?1:0},nc:function(e,r,t,n,o){const a=Br.canvas,i=Tr.get_func(e),s=[r,t,n,o];["mouseover","mouseleave","focus","blur"].forEach(function(e,r){Nr.add(a,e,function(){i.bind(null,s[r])},!0)})},mc:function(e){const r=Tr.get_func(e);Nr.add(window,"paste",function(e){const t=e.clipboardData.getData("text"),n=Tr.allocString(t);r(n),Tr.free(n)},!1)},qh:function(){return window.devicePixelRatio||1},qe:function(){return"ontouchstart"in window},dc:function(e,r){let t=document.getElementById("-gd-engine-icon");null===t&&((t=document.createElement("link")).rel="icon",t.id="-gd-engine-icon",document.head.appendChild(t));const n=qr.window_icon,o=new Blob([Tr.heapCopy(F,e,r)],{type:"image/png"});qr.window_icon=URL.createObjectURL(o),t.href=qr.window_icon,n&&URL.revokeObjectURL(n)},Ec:function(){const e=Br.canvas;(e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.mozRequestFullscreen||e.webkitRequestFullscreen).call(e)},ec:function(e){document.title=Tr.parseString(e)},gc:function(e){const r=Tr.parseString(e),t=JSON.parse(r);return Br.on_execute?(Br.on_execute(t),0):1},Bi:function(e){const r=Tr.get_func(e);Cr.finish_async(r)},$b:function(){return Rr.is_persistent()},jc:function(e){const r=Tr.get_func(e);Cr._fs_sync_promise=Rr.sync(),Cr._fs_sync_promise.then(function(e){r()})},bc:function(e){Cr.request_quit=Tr.get_func(e)},cc:function(e){window.open(Tr.parseString(e),"_blank")},Wb:function(e,r,t){const n=r,o=Tr.parseString(t);Hr.close(e,n,o)},Vb:function(e,r,t,n,o,a,i){const s=Tr.get_func(n).bind(null,e),u=Tr.get_func(o).bind(null,e),c=Tr.get_func(a).bind(null,e),f=Tr.get_func(i).bind(null,e),l=Tr.parseString(r),d=Tr.parseString(t);let m=null;try{m=d?new WebSocket(l,d.split(",")):new WebSocket(l)}catch(e){return 0}return m.binaryType="arraybuffer",Hr.create(m,s,u,c,f)},ib:function(e){Hr.destroy(e)},Xb:function(e,r,t,n){const o=new Uint8Array(t);let a=0;for(a=0;a<t;a++)o[a]=Tr.getHeapValue(r+a,"i8");let i=o.buffer;return n||(i=new TextDecoder("utf-8").decode(o)),Hr.send(e,i)},gj:function(e){if(!Gr.session||!Gr.pose)return;const r=2===e?1:0,t=Gr.session.renderState.baseLayer,n=Gr.pose.views[r],o=t.getViewport(n),a=Gr.gl,i=a.getParameter(a.FRAMEBUFFER_BINDING),s=a.getParameter(a.VIEWPORT);a.bindFramebuffer(a.FRAMEBUFFER,t.framebuffer),a.viewport(o.x,o.y,o.width,o.height),Gr.blitTexture(a,Gr.textures[r]),a.bindFramebuffer(a.FRAMEBUFFER,i),a.viewport(s[0],s[1],s[2],s[3])},Sb:function(){if(!Gr.space||!Gr.space.boundsGeometry)return 0;const e=Gr.space.boundsGeometry.length;if(0===e)return 0;const r=Tr.malloc(4*(3*e+1));Tr.setHeapValue(r,e,"i32");for(let t=0;t<e;t++){const e=Gr.space.boundsGeometry[t];Tr.setHeapValue(r+4*(3*t+1),e.x,"float"),Tr.setHeapValue(r+4*(3*t+2),e.y,"float"),Tr.setHeapValue(r+4*(3*t+3),e.z,"float")}return r},bj:function(e){if(0===Gr.controllers.length)return 0;const r=Gr.controllers[e];if(!r||!r.gamepad)return 0;const t=r.gamepad.axes.length,n=Tr.malloc(4*(t+1));Tr.setHeapValue(n,t,"i32");for(let e=0;e<t;e++){let t=r.gamepad.axes[e];1!==e&&3!==e||(t*=-1),Tr.setHeapValue(n+4+4*e,t,"float")}return n},cj:function(e){if(0===Gr.controllers.length)return 0;const r=Gr.controllers[e];if(!r||!r.gamepad)return 0;const t=r.gamepad.buttons.length,n=Tr.malloc(4*(t+1));Tr.setHeapValue(n,t,"i32");for(let e=0;e<t;e++)Tr.setHeapValue(n+4+4*e,r.gamepad.buttons[e].value,"float");return n},fj:function(){return Gr.session&&Gr.frame?Gr.controllers.length:0},dj:function(e){if(!Gr.session||!Gr.frame)return 0;const r=Gr.controllers[e];if(!r)return 0;const t=Gr.frame,n=Gr.space,o=t.getPose(r.targetRaySpace,n);if(!o)return 0;const a=o.transform.matrix,i=Tr.malloc(64);for(let e=0;e<16;e++)Tr.setHeapValue(i+4*e,a[e],"float");return i},hj:function(e){if(!Gr.session||!Gr.pose)return 0;const r=2===e?1:0;if(Gr.texture_ids[r])return Gr.texture_ids[r];const t=Gr.session.renderState.baseLayer,n=Gr.pose.views[r],o=t.getViewport(n),a=Gr.gl,i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,o.width,o.height,0,a.RGBA,a.UNSIGNED_BYTE,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.bindTexture(a.TEXTURE_2D,null);const s=tr.getNewId(tr.textures);return tr.textures[s]=i,Gr.textures[r]=i,Gr.texture_ids[r]=s,s},ij:function(e){if(!Gr.session||!Gr.pose)return 0;const r=2===e?1:0,t=Gr.pose.views[r].projectionMatrix,n=Tr.malloc(64);for(let e=0;e<16;e++)Tr.setHeapValue(n+4*e,t[e],"float");return n},kj:function(){if(!Gr.session||!Gr.pose)return 0;const e=Gr.session.renderState.baseLayer,r=Gr.pose.views[0],t=e.getViewport(r),n=Tr.malloc(8);return Tr.setHeapValue(n+0,t.width,"i32"),Tr.setHeapValue(n+4,t.height,"i32"),n},jj:function(e){if(!Gr.session||!Gr.pose)return 0;const r=Gr.pose.views;let t;t=0===e?Gr.pose.transform.matrix:r[e-1].transform.matrix;const n=Tr.malloc(64);for(let e=0;e<16;e++)Tr.setHeapValue(n+4*e,t[e],"float");return n},Rb:function(){return Gr.session&&Gr.pose?Gr.pose.views.length:0},Tb:function(){return Gr.session&&Gr.session.visibilityState?Tr.allocString(Gr.session.visibilityState):0},mj:function(e,r,t,n,o,a,i,s,u,c){Gr.monkeyPatchRequestAnimationFrame(!0);const f=Tr.parseString(e),l=Tr.parseString(r).split(",").map(e=>e.trim()).filter(e=>""!==e),d=Tr.parseString(t).split(",").map(e=>e.trim()).filter(e=>""!==e),m=Tr.parseString(n).split(",").map(e=>e.trim()),p=Tr.get_func(o),g=Tr.get_func(a),v=Tr.get_func(i),h=Tr.get_func(s),b=Tr.get_func(u),E=Tr.get_func(c),y={};l.length>0&&(y.requiredFeatures=l),d.length>0&&(y.optionalFeatures=d),navigator.xr.requestSession(f,y).then(function(e){Gr.session=e,e.addEventListener("end",function(e){g()}),e.addEventListener("inputsourceschange",function(e){let r=!1;[e.added,e.removed].forEach(e=>{e.forEach(e=>{"tracked-pointer"===e.targetRayMode&&(r=!0)})}),r&&h()}),["selectstart","select","selectend","squeezestart","squeeze","squeezeend"].forEach(r=>{e.addEventListener(r,function(e){const t=Tr.allocString(r);b(t,Gr.getControllerId(e.inputSource)),Tr.free(t)})}),e.addEventListener("visibilitychange",function(e){const r=Tr.allocString("visibility_state_changed");E(r),Tr.free(r)});const r=Lr(),t=tr.getContext(r).GLctx;Gr.gl=t,t.makeXRCompatible().then(function(){e.updateRenderState({baseLayer:new XRWebGLLayer(e,t)}),function r(){const t=m.shift();e.requestReferenceSpace(t).then(e=>{!function(e,r){Gr.space=e,e.onreset=function(e){const r=Tr.allocString("reference_space_reset");E(r),Tr.free(r)},Gr.pauseResumeMainLoop(),window.setTimeout(function(){const e=Tr.allocString(r);p(e),Tr.free(e)},0)}(e,t)}).catch(()=>{if(0===m.length){const e=Tr.allocString("Unable to get any of the requested reference space types");v(e),Tr.free(e)}else r()})}()}).catch(function(e){const r=Tr.allocString(`Unable to make WebGL context compatible with WebXR: ${e}`);v(r),Tr.free(r)})}).catch(function(e){const r=Tr.allocString(`Unable to start session: ${e}`);v(r),Tr.free(r)})},Ob:function(e){return!(!Gr.session||!Gr.frame||!Gr.controllers[e])},Ub:function(e,r){const t=Tr.parseString(e),n=Tr.get_func(r);if(navigator.xr)navigator.xr.isSessionSupported(t).then(function(e){const r=Tr.allocString(t);n(r,e?1:0),Tr.free(r)});else{const e=Tr.allocString(t);n(e,0),Tr.free(e)}},Qb:function(){return!!navigator.xr},Pb:function(){Gr.sampleControllers()},lj:function(){Gr.session&&Gr.session.end().catch(e=>{});const e=Gr.gl;for(let r=0;r<Gr.textures.length;r++){const t=Gr.textures[r];null!==t&&e.deleteTexture(t),Gr.textures[r]=null,Gr.texture_ids[r]=null}Gr.session=null,Gr.space=null,Gr.frame=null,Gr.pose=null,Gr.monkeyPatchRequestAnimationFrame(!1),Gr.pauseResumeMainLoop()},Ni:function(e){Vr.requests[e].abort(),Vr.requests[e]=null},Wi:function(e){return Vr.requests[e].readyState},Ri:function(e,r,t){let n=Vr.requests[e].response;null!==n&&(n=new Uint8Array(n).subarray(0,t),F.set(n,r))},Ti:function(e,r,t){const n=Vr.requests[e].getAllResponseHeaders();null!==n&&Tr.stringToHeap(n,r,t)},Vi:function(e){const r=Vr.requests[e].getAllResponseHeaders();return null===r?0:Tr.strlen(r)},Si:function(e){const r=Vr.requests[e].response;return null===r?0:r.byteLength},$i:function(e){return Vr.requests[e].status},Pi:function(){const e=Vr.getUnusedRequestId();return Vr.requests[e]=new XMLHttpRequest,Vr.setupRequest(Vr.requests[e]),e},kb:function(e,r,t,n,o){const a=n>0?Tr.parseString(n):null,i=o>0?Tr.parseString(o):null;Vr.requests[e].open(Tr.parseString(r),Tr.parseString(t),!0,a,i)},Va:function(e){Vr.requests[e]=new XMLHttpRequest,Vr.setupRequest(Vr.requests[e])},nj:function(e,r,t){r?t<0?Tr.error("Failed to send data per XHR: buffer length less than 0"):Vr.requests[e].send(F.subarray(r,r+t)):Tr.error("Failed to send data per XHR: null pointer")},ej:function(e,r){r?Vr.requests[e].send(Tr.parseString(r)):Tr.error("Failed to send string per XHR: null pointer")},Zb:function(e,r,t){Vr.requests[e].setRequestHeader(Tr.parseString(r),Tr.parseString(t))},_b:function(e){var r=Le(U(e));return null===r?-1:r},Wa:function(e,r){var t=ht();try{return W.get(e)(r)}catch(e){if(bt(t),e!==e+0&&"longjmp"!==e)throw e;yt(1,0)}},Ba:function(e,r,t){var n=ht();try{return W.get(e)(r,t)}catch(e){if(bt(n),e!==e+0&&"longjmp"!==e)throw e;yt(1,0)}},nb:function(e,r,t,n,o){var a=ht();try{return W.get(e)(r,t,n,o)}catch(e){if(bt(a),e!==e+0&&"longjmp"!==e)throw e;yt(1,0)}},Dc:function(e,r,t,n,o,a,i){var s=ht();try{return W.get(e)(r,t,n,o,a,i)}catch(e){if(bt(s),e!==e+0&&"longjmp"!==e)throw e;yt(1,0)}},da:function(e,r){var t=ht();try{W.get(e)(r)}catch(e){if(bt(t),e!==e+0&&"longjmp"!==e)throw e;yt(1,0)}},pa:function(e,r,t){var n=ht();try{W.get(e)(r,t)}catch(e){if(bt(n),e!==e+0&&"longjmp"!==e)throw e;yt(1,0)}},Xa:function(e,r,t,n){var o=ht();try{W.get(e)(r,t,n)}catch(e){if(bt(o),e!==e+0&&"longjmp"!==e)throw e;yt(1,0)}},mb:function(e,r,t,n,o,a,i,s){var u=ht();try{W.get(e)(r,t,n,o,a,i,s)}catch(e){if(bt(u),e!==e+0&&"longjmp"!==e)throw e;yt(1,0)}},_i:function(e,r){return ke(_e.EPERM),-1},hb:function(e,r){!function e(){if(!e.called){e.called=!0;var r=(new Date).getFullYear(),t=new Date(r,0,1),n=new Date(r,6,1),o=t.getTimezoneOffset(),a=n.getTimezoneOffset(),i=Math.max(o,a);C[vt()>>2]=60*i,C[gt()>>2]=Number(o!=a);var s=l(t),u=l(n),c=H(s),f=H(u);a<o?(C[pt()>>2]=c,C[pt()+4>>2]=f):(C[pt()>>2]=f,C[pt()+4>>2]=c)}function l(e){var r=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return r?r[1]:"GMT"}}();var t=new Date(1e3*C[e>>2]);C[r>>2]=t.getSeconds(),C[r+4>>2]=t.getMinutes(),C[r+8>>2]=t.getHours(),C[r+12>>2]=t.getDate(),C[r+16>>2]=t.getMonth(),C[r+20>>2]=t.getFullYear()-1900,C[r+24>>2]=t.getDay();var n=new Date(t.getFullYear(),0,1),o=(t.getTime()-n.getTime())/864e5|0;C[r+28>>2]=o,C[r+36>>2]=-60*t.getTimezoneOffset();var a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=n.getTimezoneOffset(),s=0|(a!=i&&t.getTimezoneOffset()==Math.min(i,a));C[r+32>>2]=s;var u=C[pt()+(s?4:0)>>2];return C[r+40>>2]=u,r},y:function(e){_(0|e)},aj:function(e,r,t){return 0},Lb:function(e,r,t,n){var o=C[n+40>>2],a={tm_sec:C[n>>2],tm_min:C[n+4>>2],tm_hour:C[n+8>>2],tm_mday:C[n+12>>2],tm_mon:C[n+16>>2],tm_year:C[n+20>>2],tm_wday:C[n+24>>2],tm_yday:C[n+28>>2],tm_isdst:C[n+32>>2],tm_gmtoff:C[n+36>>2],tm_zone:o?U(o):""},i=U(t),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)i=i.replace(new RegExp(u,"g"),s[u]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["January","February","March","April","May","June","July","August","September","October","November","December"];function l(e,r,t){for(var n="number"==typeof e?e.toString():e||"";n.length<r;)n=t[0]+n;return n}function d(e,r){return l(e,r,"0")}function m(e,r){function t(e){return e<0?-1:e>0?1:0}var n;return 0===(n=t(e.getFullYear()-r.getFullYear()))&&0===(n=t(e.getMonth()-r.getMonth()))&&(n=t(e.getDate()-r.getDate())),n}function p(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function g(e){var r=Kr(new Date(e.tm_year+1900,0,1),e.tm_yday),t=new Date(r.getFullYear(),0,4),n=new Date(r.getFullYear()+1,0,4),o=p(t),a=p(n);return m(o,r)<=0?m(a,r)<=0?r.getFullYear()+1:r.getFullYear():r.getFullYear()-1}var v={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return f[e.tm_mon].substring(0,3)},"%B":function(e){return f[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return l(e.tm_mday,2," ")},"%g":function(e){return g(e).toString().substring(2)},"%G":function(e){return g(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var r=e.tm_hour;return 0==r?r=12:r>12&&(r-=12),d(r,2)},"%j":function(e){return d(e.tm_mday+Wr(Xr(e.tm_year+1900)?Yr:Qr,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var r=new Date(e.tm_year+1900,0,1),t=0===r.getDay()?r:Kr(r,7-r.getDay()),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(m(t,n)<0){var o=Wr(Xr(n.getFullYear())?Yr:Qr,n.getMonth()-1)-31,a=31-t.getDate()+o+n.getDate();return d(Math.ceil(a/7),2)}return 0===m(t,r)?"01":"00"},"%V":function(e){var r,t=new Date(e.tm_year+1900,0,4),n=new Date(e.tm_year+1901,0,4),o=p(t),a=p(n),i=Kr(new Date(e.tm_year+1900,0,1),e.tm_yday);return m(i,o)<0?"53":m(a,i)<=0?"01":(r=o.getFullYear()<e.tm_year+1900?e.tm_yday+32-o.getDate():e.tm_yday+1-o.getDate(),d(Math.ceil(r/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var r=new Date(e.tm_year,0,1),t=1===r.getDay()?r:Kr(r,0===r.getDay()?1:7-r.getDay()+1),n=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(m(t,n)<0){var o=Wr(Xr(n.getFullYear())?Yr:Qr,n.getMonth()-1)-31,a=31-t.getDate()+o+n.getDate();return d(Math.ceil(a/7),2)}return 0===m(t,r)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var r=e.tm_gmtoff,t=r>=0;return r=(r=Math.abs(r)/60)/60*100+r%60,(t?"+":"-")+String("0000"+r).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var u in v)i.indexOf(u)>=0&&(i=i.replace(new RegExp(u,"g"),v[u](a)));var h,b,E=nt(i,!1);return E.length>r?0:(h=E,b=e,P.set(h,b),E.length-1)},Xi:function(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return ke(28),-1},Sa:function(e){var r=Date.now()/1e3|0;return e&&(C[e>>2]=r),r}},it=(function(){var e={a:at};function r(e,r){var t=e.exports;o.asm=t,X((x=o.asm.qj).buffer),W=o.asm.rj,oe()}function t(e){r(e.instance)}function a(r){return(y||!l&&!d||"function"!=typeof fetch?Promise.resolve().then(function(){return de(le)}):fetch(le,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+le+"'";return e.arrayBuffer()}).catch(function(){return de(le)})).then(function(r){return WebAssembly.instantiate(r,e)}).then(r,function(e){b("failed to asynchronously prepare wasm: "+e),ae(e)})}if(ne(),o.instantiateWasm)try{return o.instantiateWasm(e,r)}catch(e){return b("Module.instantiateWasm callback failed with error: "+e),!1}(y||"function"!=typeof WebAssembly.instantiateStreaming||se(le)||"function"!=typeof fetch?a(t):fetch(le,{credentials:"same-origin"}).then(function(r){return WebAssembly.instantiateStreaming(r,e).then(t,function(e){return b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),a(t)})})).catch(n)}(),o.___wasm_call_ctors=function(){return(it=o.___wasm_call_ctors=o.asm.sj).apply(null,arguments)}),st=(o.__Z13godot_js_mainiPPc=function(){return(o.__Z13godot_js_mainiPPc=o.asm.tj).apply(null,arguments)},o._main=function(){return(o._main=o.asm.uj).apply(null,arguments)},o._free=function(){return(st=o._free=o.asm.vj).apply(null,arguments)}),ut=o._malloc=function(){return(ut=o._malloc=o.asm.wj).apply(null,arguments)},ct=o._htons=function(){return(ct=o._htons=o.asm.xj).apply(null,arguments)},ft=o.___errno_location=function(){return(ft=o.___errno_location=o.asm.yj).apply(null,arguments)},lt=(o.__emwebxr_on_input_event=function(){return(o.__emwebxr_on_input_event=o.asm.zj).apply(null,arguments)},o.__emwebxr_on_simple_event=function(){return(o.__emwebxr_on_simple_event=o.asm.Aj).apply(null,arguments)},o._fflush=function(){return(o._fflush=o.asm.Bj).apply(null,arguments)},o._ntohs=function(){return(lt=o._ntohs=o.asm.Cj).apply(null,arguments)}),dt=o._emscripten_GetProcAddress=function(){return(dt=o._emscripten_GetProcAddress=o.asm.Dj).apply(null,arguments)},mt=o._htonl=function(){return(mt=o._htonl=o.asm.Ej).apply(null,arguments)},pt=o.__get_tzname=function(){return(pt=o.__get_tzname=o.asm.Fj).apply(null,arguments)},gt=o.__get_daylight=function(){return(gt=o.__get_daylight=o.asm.Gj).apply(null,arguments)},vt=o.__get_timezone=function(){return(vt=o.__get_timezone=o.asm.Hj).apply(null,arguments)},ht=o.stackSave=function(){return(ht=o.stackSave=o.asm.Ij).apply(null,arguments)},bt=o.stackRestore=function(){return(bt=o.stackRestore=o.asm.Jj).apply(null,arguments)},Et=o.stackAlloc=function(){return(Et=o.stackAlloc=o.asm.Kj).apply(null,arguments)},yt=o._setThrew=function(){return(yt=o._setThrew=o.asm.Lj).apply(null,arguments)};function wt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}o.callMain=xt;function xt(e){var r=o._main,t=(e=e||[]).length+1,n=Et(4*(t+1));C[n>>2]=G(c);for(var a=1;a<t;a++)C[(n>>2)+a]=G(e[a-1]);C[(n>>2)+t]=0;try{_t(r(t,n),!0)}catch(e){if(e instanceof wt)return;if("unwind"==e)return void(w=!0);var i=e;e&&"object"==typeof e&&e.stack&&(i=[e,e.stack]),b("exception thrown: "+i),f(1,e)}finally{!0}}function kt(e){function r(){ot||(ot=!0,o.calledRun=!0,L||(!0,o.noFSInit||we.init.initialized||we.init(),he.init(),Se.root=we.mount(Se,{},null),pe(Q),we.ignorePermissions=!1,pe(K),t(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),St&&xt(e),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)e=o.postRun.shift(),Z.unshift(e);var e;pe(Z)}()))}e=e||u,J>0||(!function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)e=o.preRun.shift(),Y.unshift(e);var e;pe(Y)}(),J>0||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),r()},1)):r()))}function _t(e,r){r&&w&&0===e||(w||(e,pe($),we.quit(),he.shutdown(),!0,o.onExit&&o.onExit(e),L=!0),f(e,new wt(e)))}if(re=function e(){ot||kt(),ot||(re=e)},o.run=kt,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();var St=!1;return o.noInitialRun&&(St=!1),kt(),r.ready}}();"object"==typeof exports&&"object"==typeof module?module.exports=Godot:"function"==typeof define&&define.amd?define([],function(){return Godot}):"object"==typeof exports&&(exports.Godot=Godot);const Preloader=function(){const e=function(r,t,n,o,a){const i=new XMLHttpRequest;o[n]={total:0,loaded:0,final:!1},i.onerror=function(){a<=1?t(new Error(`Failed loading file '${n}'`)):setTimeout(function(){e(r,t,n,o,a-1)},1e3)},i.onabort=function(){o[n].final=!0,t(new Error(`Loading file '${n}' was aborted.`))},i.onloadstart=function(e){o[n].total=e.total,o[n].loaded=e.loaded},i.onprogress=function(e){o[n].loaded=e.loaded,o[n].total=e.total},i.onload=function(){i.status>=400?i.status<500||a<=1?(t(new Error(`Failed loading file '${n}': ${i.statusText}`)),i.abort()):setTimeout(function(){e(r,t,n,o,a-1)},1e3):(o[n].final=!0,r(i))},i.open("GET",n),n.endsWith(".js")||(i.responseType="arraybuffer"),i.send()},r={},t={loaded:0,total:0};let n=null;const o=function(){let e=0,a=0,i=!0,s=!0;Object.keys(r).forEach(function(t){const n=r[t];n.final||(s=!1),i&&0!==n.total?a+=n.total:(i=!1,a=0),e+=n.loaded}),e===t.loaded&&a===t.total||(t.loaded=e,t.total=a,"function"==typeof n&&n(e,a)),s||requestAnimationFrame(o)};this.animateProgress=o,this.setProgressFunc=function(e){n=e},this.loadPromise=function(t){return new Promise(function(n,o){e(n,o,t,r,4)})},this.preloadedFiles=[],this.preload=function(e,r){let t=null;if("string"==typeof e){const t=this;return this.loadPromise(e).then(function(n){return t.preloadedFiles.push({path:r||e,buffer:n.response}),Promise.resolve()})}return e instanceof ArrayBuffer?t=new Uint8Array(e):ArrayBuffer.isView(e)&&(t=new Uint8Array(e.buffer)),t?(this.preloadedFiles.push({path:r,buffer:e}),Promise.resolve()):Promise.reject(new Error("Invalid object for preloading"))}},Utils={createLocateRewrite:function(e){return function(r){return r.endsWith(".worker.js")?`${e}.worker.js`:r.endsWith(".audio.worklet.js")?`${e}.audio.worklet.js`:r.endsWith(".js")?`${e}.js`:r.endsWith(".side.wasm")?`${e}.side.wasm`:r.endsWith(".wasm")?`${e}.wasm`:r}},createInstantiatePromise:function(e){let r=e;return function(e,t){return r.then(function(r){WebAssembly.instantiate(r.response,e).then(function(e){t(e.instance,e.module)})}),r=null,{}}},findCanvas:function(){const e=document.getElementsByTagName("canvas");return e.length&&e[0]instanceof HTMLCanvasElement?e[0]:null},isWebGLAvailable:function(e=1){let r=!1;try{const t=document.createElement("canvas");1===e?r=t.getContext("webgl")||t.getContext("experimental-webgl"):2===e&&(r=t.getContext("webgl2")||t.getContext("experimental-webgl2"))}catch(e){}return!!r}},Engine=function(){const e=new Preloader;let r=".wasm",t=!0,n="",o=null,a=null,i=null,s=null,u=null;function c(t){return null==o&&(n=t,o=e.loadPromise(t+r),e.setProgressFunc(u),requestAnimationFrame(e.animateProgress)),o}function f(){o=null}function l(){this.canvas=null,this.executableName="",this.rtenv=null,this.customLocale=null,this.resizeCanvasOnStart=!1,this.onExecute=null,this.onExit=null,this.persistentPaths=["/userfs"],this.gdnativeLibs=[]}return l.prototype.init=function(e){if(a)return a;if(null==o){if(!e)return a=Promise.reject(new Error("A base path must be provided when calling `init` and the engine is not loaded."));c(e)}let r={};"function"==typeof s&&(r.print=s),"function"==typeof i&&(r.printErr=i);const u=this;return a=new Promise(function(e,a){r.locateFile=Utils.createLocateRewrite(n),r.instantiateWasm=Utils.createInstantiatePromise(o),r.thisProgram=u.executableName,r.noExitRuntime=!0,r.dynamicLibraries=[`${u.executableName}.side.wasm`].concat(u.gdnativeLibs),Godot(r).then(function(n){n.initFS(u.persistentPaths).then(function(o){u.rtenv=n,t&&f(),e(),r=null})})})},l.prototype.preloadFile=function(r,t){return e.preload(r,t)},l.prototype.start=function(){const r=[];for(let e=0;e<arguments.length;e++)r.push(arguments[e]);const t=this;return t.init().then(function(){if(!t.rtenv)return Promise.reject(new Error("The engine must be initialized before it can be started"));if(!(t.canvas instanceof HTMLCanvasElement||(t.canvas=Utils.findCanvas(),t.canvas)))return Promise.reject(new Error("No canvas found in page"));t.canvas.tabIndex<0&&(t.canvas.tabIndex=0),t.canvas.addEventListener("contextmenu",function(e){e.preventDefault()},!1),t.canvas.addEventListener("webglcontextlost",function(e){alert("WebGL context lost, please reload the page"),e.preventDefault()},!1);let n=t.customLocale;return n||(n=(n=navigator.languages?navigator.languages[0]:navigator.language).split(".")[0]),t.rtenv.initConfig({resizeCanvasOnStart:t.resizeCanvasOnStart,canvas:t.canvas,locale:n,onExecute:function(e){return t.onExecute?(t.onExecute(e),0):1},onExit:function(e){t.rtenv.deinitFS(),t.onExit&&t.onExit(e),t.rtenv=null}}),new Promise(function(n,o){e.preloadedFiles.forEach(function(e){t.rtenv.copyToFS(e.path,e.buffer)}),e.preloadedFiles.length=0,t.rtenv.callMain(r),a=null,n()})})},l.prototype.startGame=function(e,r,t){this.executableName=e;const n=this;return Promise.all([this.init(e),this.preloadFile(r,r)]).then(function(){let e=["--main-pack",r];return t&&(e=e.concat(t)),n.start.apply(n,e)})},l.prototype.setWebAssemblyFilenameExtension=function(e){if(0===String(e).length)throw new Error("Invalid WebAssembly filename extension override");r=String(e)},l.prototype.setUnloadAfterInit=function(e){t=e},l.prototype.setCanvas=function(e){this.canvas=e},l.prototype.setCanvasResizedOnStart=function(e){this.resizeCanvasOnStart=e},l.prototype.setLocale=function(e){this.customLocale=e},l.prototype.setExecutableName=function(e){this.executableName=e},l.prototype.setProgressFunc=function(e){u=e},l.prototype.setStdoutFunc=function(e){const r=function(r){let t=r;arguments.length>1&&(t=Array.prototype.slice.call(arguments).join(" ")),e(t)};this.rtenv&&(this.rtenv.print=r),s=r},l.prototype.setStderrFunc=function(e){const r=function(r){let t=r;arguments.length>1&&(t=Array.prototype.slice.call(arguments).join(" ")),e(t)};this.rtenv&&(this.rtenv.printErr=r),i=r},l.prototype.setOnExecute=function(e){this.onExecute=e},l.prototype.setOnExit=function(e){this.onExit=e},l.prototype.copyToFS=function(e,r){if(null==this.rtenv)throw new Error("Engine must be inited before copying files");this.rtenv.copyToFS(e,r)},l.prototype.setPersistentPaths=function(e){this.persistentPaths=e},l.prototype.setGDNativeLibraries=function(e){this.gdnativeLibs=e},l.prototype.requestQuit=function(){this.rtenv&&this.rtenv.request_quit()},l.isWebGLAvailable=Utils.isWebGLAvailable,l.load=c,l.unload=f,l.prototype.init=l.prototype.init,l.prototype.preloadFile=l.prototype.preloadFile,l.prototype.start=l.prototype.start,l.prototype.startGame=l.prototype.startGame,l.prototype.setWebAssemblyFilenameExtension=l.prototype.setWebAssemblyFilenameExtension,l.prototype.setUnloadAfterInit=l.prototype.setUnloadAfterInit,l.prototype.setCanvas=l.prototype.setCanvas,l.prototype.setCanvasResizedOnStart=l.prototype.setCanvasResizedOnStart,l.prototype.setLocale=l.prototype.setLocale,l.prototype.setExecutableName=l.prototype.setExecutableName,l.prototype.setProgressFunc=l.prototype.setProgressFunc,l.prototype.setStdoutFunc=l.prototype.setStdoutFunc,l.prototype.setStderrFunc=l.prototype.setStderrFunc,l.prototype.setOnExecute=l.prototype.setOnExecute,l.prototype.setOnExit=l.prototype.setOnExit,l.prototype.copyToFS=l.prototype.copyToFS,l.prototype.setPersistentPaths=l.prototype.setPersistentPaths,l.prototype.setGDNativeLibraries=l.prototype.setGDNativeLibraries,l.prototype.requestQuit=l.prototype.requestQuit,l}();"undefined"!=typeof window&&(window.Engine=Engine);